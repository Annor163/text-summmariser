@&#MAIN-TITLE@&#
Optimal crowd editing

@&#HIGHLIGHTS@&#
An original crowd scene editing method is proposed.Our approach is based on optimal control theory and adjoint methods.We use a dynamic crowd model and user input constraints.The method applies to any differentiable crowd model.The method applies to any crowd’s state related constraints.

@&#KEYPHRASES@&#
Crowd editing,Crowd simulation,Agent steering,Control,Adjoint methods,Optimal control strategy,

@&#ABSTRACT@&#
Simulating realistic crowd behaviors is a challenging problem in computer graphics. Yet, several satisfying simulation models exhibiting natural pedestrians or group emerging behaviors exist. Choosing among these model generally depends on the considered crowd density or the topology of the environment. Conversely, achieving a user-desired kinematic or dynamic pattern at a given instant of the simulation reveals to be much more tedious. In this paper, a novel generic control methodology is proposed to solve this crowd editing issue. Our method relies on an adjoint formulation of the underlying optimization procedure. It is independent to a certain extent of the choice of the simulation model, and is designed to handle several forms of constraints. A variety of examples attesting the benefits of our approach are proposed, along with quantitative performance measures.

@&#INTRODUCTION@&#
Animating a crowd of thousand of individuals is a challenging task. Most of the time, human crowds exhibit very subtle and specific patterns. The variability of crowd dynamics and behaviors is a consequence of the diversity of the persons inside it (age, sex, social and psychological attributes), as well as the spatial configuration of obstacles and lanes. Nevertheless, several models exist, that can either rely on per-individual strategies, usually grouped under the denomination of steering behaviors or microscopic models, or in contrast on a global definition of the crowd flow and properties: the macroscopic models. Assessing the quality of those models is usually difficult, since several criteria can be evaluated: computation performances, presence of emerging behaviors, individual trajectories respecting the least effort principles, etc. In the context of civil engineering, those models can provide a lot of information about potentially dangerous areas or bottlenecks where problems are likely to occur. The context of graphics is slightly different since animators usually have a precise idea of what they want to show, which may differ from what is actually given by the simulation models. A possibility is then to tweak the different parameters of the used model, in a trial-and-error fashion, until the simulation is acceptable. It is easy to understand that this strategy, depicted in Fig. 1a, is likely to fail for most simulation models regarding the complexity of the dynamics inherent to the crowd if the animator tries to obtain a desired kinematic or dynamic pattern at a given time in the simulation process. This calls for automatic procedures that can reach those constraints while preserving the specificities of the crowd models. This notion of controlling a crowd is investigated in this paper. In practice, because of the discrete nature of pedestrians (and thus the highly discontinuous nature of the solution space), the use of simple gradient based methods yields some difficulties related to collision handling between individuals. This issue has already been encountered in the control of multibody dynamics in [33], where the authors suggest to select a solution from a set of samples (computed on-line on a cluster of machines). In this paper, we propose a combination of a gradient based method along with an heuristic to explore several distinct paths in the solution space.In the presented article, the control of a crowd is seen as an editing process, in the sense that the trajectories produced by the simulation model are deformed to achieve users constraints (Fig. 1b) while minimizing the discrepancy with the simulation model’s dynamics. The types of constraints can be twofold: (i) per-individual constraints, meaning that the user can specify its own properties related to pedestrians (like positions, velocities or even shape-related information) or (ii) macroscopic constraints, such as respecting a given velocity field or higher order dynamical information, like the divergence or rotational components of a velocity field. Those two types of constraints are illustrated in the rest of the paper. Our optimization process uses recipes from optimal control of variational models by formulating the problem with the adjoint theory [16]. It is virtually adaptable to any kind of simulation model provided that it can be analytically described as a variational system. This is usually the case with crowd dynamics model, but not anymore if one considers cognitive modeling of pedestrian steering behaviors. Also, the quality of the produced animation strongly depends on both the realism of the controlled model and on the nature of the constraint imposed by the animator. In that sense our method augments the latent qualities of a given crowd model but is not meant to produce systematically more realistic simulations than advanced techniques. In other words, the resulting scene after control using the model and the users constraints is optimal, but not the model which basically stays the same.First, a presentation of the related work is performed in Section 2, and an overview of the control process is given in Section 3. The optimal control of dynamical system, along with its requirements are then presented (Section 4). Algorithmic aspects of this control will notably be explained in this part. In Section 5, a variety of control are applied on a generic dynamic crowd model to illustrate the power of our method and quantitative convergence results are also presented, before a discussion and a conclusion end the paper (Section 7).

@&#CONCLUSIONS@&#
