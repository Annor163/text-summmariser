@&#MAIN-TITLE@&#
Motion-capture-based walking simulation of digital human adapted to laser-scanned 3D as-is environments for accessibility evaluation

@&#HIGHLIGHTS@&#
An adaptive walking simulation algorithm of the digital human was developed.The environment models are automatically generated from laser-scanned point clouds.A digital human can walk autonomously in various as-built environment models.Simulated walking motion of the digital human is similar to one of real human.Elapsed time of modeling and simulation is short enough for practical application.

@&#KEYPHRASES@&#
Digital human model,Walking simulation,Laser-scanning,Accessibility evaluation,Motion-capture,Human behavior simulation,

@&#ABSTRACT@&#
Owing to our rapidly aging society, accessibility evaluation to enhance the ease and safety of access to indoor and outdoor environments for the elderly and disabled is increasing in importance. Accessibility must be assessed not only from the general standard aspect but also in terms of physical and cognitive friendliness for users of different ages, genders, and abilities. Meanwhile, human behavior simulation has been progressing in the areas of crowd behavior analysis and emergency evacuation planning. However, in human behavior simulation, environment models represent only “as-planned” situations. In addition, a pedestrian model cannot generate the detailed articulated movements of various people of different ages and genders in the simulation. Therefore, the final goal of this research was to develop a virtual accessibility evaluation by combining realistic human behavior simulation using a digital human model (DHM) with “as-is” environment models. To achieve this goal, we developed an algorithm for generating human-like DHM walking motions, adapting its strides, turning angles, and footprints to laser-scanned 3D as-is environments including slopes and stairs. The DHM motion was generated based only on a motion-capture (MoCap) data for flat walking. Our implementation constructed as-is 3D environment models from laser-scanned point clouds of real environments and enabled a DHM to walk autonomously in various environment models. The difference in joint angles between the DHM and MoCap data was evaluated. Demonstrations of our environment modeling and walking simulation in indoor and outdoor environments including corridors, slopes, and stairs are illustrated in this study.

@&#INTRODUCTION@&#
Owing to our rapidly aging society, accessibility evaluation to enhance the ease and safety of access to indoor and outdoor environments for the elderly and disabled is increasing in importance. In the International Organization for Standardization (ISO) 21452, “accessibility” is defined as “provision of buildings or parts of buildings for people, regardless of disability, age or gender, to be able to gain access to them, into them, to use them and exit from them” [1]. Accessibility must be assessed not only from the general standard aspect specified in ISO 21542 [1] but also in terms of physical and cognitive friendliness for users of different ages, genders, and abilities, as recommended in ISO/IEC Guide 71 [2]. An example of the former is dimensional criteria such as corridor width and slope angle, which can be evaluated only by taking account of the shape of the environment. Physical and Cognitive friendliness involves more human-centered criteria, such as tripping risk and ease of wayfinding, which can be evaluated by taking account of both human movement and the environment.Conversely, human behavior simulation has been progressing recently in the areas of crowd behavior analysis and emergency evacuation planning [3], and there is a high possibility that the simulation can be applied to accessibility evaluation. In human behavior simulation, the activities of a pedestrian model can be predicted in 2D indoor and outdoor environment models [4]. Moreover, human behavior simulation using kinematic digital human models (DHMs) even in a 3D environment model has become possible because of recent advances in computer performance [5].However, in previous human behavior simulations [3–5], environment models represent only “as-planned” situations, in contrast to “as-is” environments. Furthermore, in the simulation, a pedestrian model cannot generate the detailed articulated movements of various groups of people including the elderly, children, males, and females. In contrast to an “as-planned” environment, an “as-is” environment exhibits the following characteristics:–It represents the current environment correctly.It includes extra objects which were placed in the environment after building construction (e.g., furniture, dust bins, and fire extinguishers).It includes small barriers and obstacles on the floor that were ignored in the CAD data.The presence of extra objects, small barriers, and small obstacles strongly affects the accessibility of an environment. Basing the accessibility evaluation on really existing facilities is therefore important. However, 2D or 3D CAD data of the existing state of the facility are not always available. In this situation, we have to construct the 3D environment model manually by measuring the environment. This is labor-intensive and tedious, and the constructed environment model is sometimes inaccurate. Using an as-is environment model, which is automatically constructed from the laser-scanned point clouds, therefore offers advantages in terms of both cost and accuracy.Accessibility evaluation based on an as-is environment model is also easily applied to as-planned environments by converting the 3D mesh or solid model to dense point clouds. Therefore, accessibility evaluation systems using as-is environment models have a wide range of applications. For these reasons, the as-is environment model is superior for accessibility evaluation of a current environment.Considering this background, the final goal of our research was to develop a virtual accessibility evaluation by combining realistic human behavior simulation using DHMs with “as-is” environment models. As shown inFig. 1, our research group has already developed a prototype system of environment modeling and basic walking simulation for a DHM to achieve the first step of this goal [6]. In this system, the walking simulation algorithm used only single reference motion-capture (MoCap) data for flat walking and enabled a DHM to walk autonomously in as-is and flat indoor environments while adapting its strides and turning angles accordingly. However, the algorithm does not allow the DHM to walk on non-flat terrain surfaces such as slopes and stairs.Therefore, in this research, we develop an algorithm that enables a DHM to walk autonomously even on the non-flat terrain of as-is indoor and outdoor environments. The strides, turning angles and footprints of the DHM can be adapted to different laser-scanned environment models including corridors, slopes, and stairs. In the algorithm, first, a flat walking motion of the DHM is generated using our previous algorithm [6] based on single reference MoCap data for flat walking. Then, the pelvis and swing ankle joint positions during flat walking are changed to adapt to walking on the non-flat terrain by increasing or decreasing the positions based on our analysis of a preliminary experiment, in which real human walking motions in various environments were measured using a MoCap system. Finally, all the joint angles are determined by analytically solving inverse kinematics (IK) to achieve the adapted pelvis and swing ankle joint positions.Moreover, we develop an algorithm that extracts a stair tread boundary for enabling the DHM to walk on stairs while estimating suitable footprints on the treads. Demonstrations of our environment modeling and walking simulation in indoor and outdoor environments including corridors, slopes and stairs are illustrated. Modeling and simulation efficiency and accuracy are also evaluated.The rest of this paper is organized as follows. In Section 2, related work of the research is introduced and our contributions are clarified. In Section 3, the 3D environmental modeling algorithm for the human behavior simulation is described. In Section 4, the preliminary experiment and the MoCap-based adaptive walking simulation algorithm is described in detail. Finally, the demonstrations, efficiency, and accuracy of the environmental modeling and walking simulation are shown in Section 5.

@&#CONCLUSIONS@&#
In this study, we developed an algorithm for generating human-like walking motion for a DHM in various as-is environments including slopes and stairs. The walking motion of the DHM was generated based on single reference MoCap data for flat walking selected from the gait DB. The DHM could walk autonomously, while adapting its strides, turning angles and footprints to different as-is environment models automatically constructed from laser-scanned point clouds. The simulation results on a 6-deg slope were validated through comparison with MoCap data acquired for the same slope. The differences in joint angles between the DHM and MoCap data were achieved at 5° and 6° for the hip and knee joints on average, respectively. This showed that our proposed walking simulation algorithm could generate human-like walking motion even in the different environments based only on reference MoCap data for flat walking. Additionally, as shown in Fig. 16, it was confirmed that the DHM could walk autonomously in indoor and outdoor environment models based on single reference MoCap data for flat walking acquired from various types of people of different ages and genders. Moreover, an algorithm for 3D as-is environmental modeling from massive laser-scanned point clouds of real environments was also proposed. The 3D environmental modeling required a few seconds, which is significantly faster than manual modeling. Additionally, the elapsed time for one-step walking motion simulation was approximately one second, which is short enough for practical application.In a previous paper [6], we confirmed that the DHM could generate joint angle patterns similar to those of human subjects of different ages and genders (male aged 22, female aged 13, male aged 73, and female aged 72) on flat walking terrain. In this study, the simulated walking motion of the DHM on non-flat terrain was compared only with MoCap data for young subjects acquired in the same non-flat environment. However, as mentioned in Section 5.3, we were unable to compare the simulated walking motion of the DHM on non-flat terrain with MoCap data for elderly subjects. This validation will be addressed in future work.Moreover, in this paper, we have reported only the technologies for the accessibility evaluation, and the concrete results of the evaluation have not been shown. In future work, we plan to develop the accessibility evaluation function in terms of physical friendliness for various people of different ages, genders, and body dimensions by making use of the proposed walking simulation. In particular, we will evaluate tripping risks in the environment, based on the toe-clearance of the DHM during walking simulations.In the proposed human behavior simulation, we used a depth-first search algorithm for walking path selection. This is a “brute force” and is therefore an inefficient approach. However, as shown in Table 1, the elapsed time of this process was less than 0.1s, so it is not a serious problem at this stage. It is possible that the elapsed time will become longer as the walking path structure becomes more complex. Therefore, to achieve efficient and reliable walking path selection in a larger-scale and more complex environment, we plan to introduce a more efficient path selection algorithm, such as an A* algorithm.