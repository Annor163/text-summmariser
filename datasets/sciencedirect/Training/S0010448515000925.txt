@&#MAIN-TITLE@&#
Statistical geometric computation on tolerances for dimensioning

@&#HIGHLIGHTS@&#
A generalized RSS method is proposed for modeling geometric representations of tolerances in the statistical way.A set of basic operations over the new tolerance model are proposed to enable tolerance compositing and cascading.A set of examples demonstrate applications of the new model in tolerance estimation.A tolerance allocation framework based on optimization is also proposed by utilizing analytical forms of the new model.

@&#KEYPHRASES@&#
Statistical tolerance modeling,Tolerance analysis,Tolerance allocation,

@&#ABSTRACT@&#
Dimensions are used to specify the distances between different features in geometric models. These dimensions will often be expressed as a range of allowable dimensions. When considering a group of toleranced dimensions, these ranges can be analyzed as either a worst-case bound on allowable ranges, or as a statistical measure of expected distribution. This paper presents a new geometric model for representing statistically-based tolerance regions. Methods for tolerance estimation and allocation on a geometric model are provided by generalizing root sum square (RSS) methods for compositing and cascading over tolerance zones. This gives us a geometric interpretation of a statistical analysis. Tolerance regions are determined by probabilities of variations of dimensions falling into the region. A dependency graph over dimensions can be represented by a topological graph on which the tolerance cascading and tolerance allocation can be processed. To illustrate applications of this geometric method, we provide examples of tolerance estimation and tolerance allocation on our model. The estimation examples utilize the compositing and cascading operations provided in the analysis method. The allocation examples present an automatic tolerance allocation procedure on the tolerance model. As opposed to existing methods, our allocation method allows us to specify not only a numerical objective of the optimization, but also a statistically-based objective for the geometric shape of the tolerance.

@&#INTRODUCTION@&#
The quality of parts manufacturing is determined by both design and manufacturing tolerances, which affect the geometric and functional features of finished parts  [1]. Engineers are usually required to select appropriate models to describe tolerances so that, on one side, tolerances can be estimated with respect to the design diagram, and on the other side, tolerances can be allocated to each part of the design diagram to meet the target tolerance requirement. Traditionally, there are two major types of tolerance modeling: worst case estimation and statistical variation estimation  [2,3]. The statistical variation model relaxes tolerances by considering distributions of variations so that each tolerance is associated with a distribution. Tolerance propagation can be achieved by summing up related tolerances with statistical rules. A statistical analysis model estimates a distribution describing the target tolerance rather than computing extreme values described in the worst case estimation. This paper focus on presenting a new framework for modeling tolerances by statistical variations as well as operations that perform tolerance compositing and cascading on this new model. Since our work is on modeling tolerances, we demonstrate that our model is not only appropriate for tolerance estimation  [4] but also for tolerance allocation  [5].Tolerance analysis covers techniques that compute the variations of tolerances for worst case estimation or for statistical variation estimation. General reviews on this topic are available in  [6,4,7]. A key part of tolerance modeling is representing the tolerance zone in an appropriate way so that variations of tolerances can be obtained and propagated. Worst case estimation models the uncertainties of tolerances by simple geometric entities that are guaranteed to bound variations of dimensions  [8,9]. Geometric objects employed are usually higher dimensional polytopes or dual-cones, which represent the allowed region as intervals of coefficients in their algebraic parameterization  [10–12]. Part features, such as form, orientation, and size of tolerances can be obtained from such models relatively easily, though further computations on tolerances can still be very complicated. Statistical models consider distributions of variations of tolerances so that each tolerance is associated with a statistical distribution model  [13–15,3,16]. Computations on the statistical model, such as tolerance compositing, cascading, or allocation, are far more complicated than those of the worst case estimation.Several prior methods have proposed addressing tolerance compositing and cascading. Tolerance compositing on statistical models focuses on describing distributions of tolerances as well as providing geometric interpretations (tolerance zones) on models. Tolerance cascading on statistical models studies methods for propagating tolerances along the dimensioning chain or the tolerance dependency graph. Tolerance charting methods are the traditional method for estimating tolerance propagation using engineers’ experience. An alternative is computer-aided tolerance charting  [17], which aims to reduce the number of iterations of physical trial-and-error runs. However, this method cannot handle complex high dimensional tolerance propagation nor geometric tolerances. Many methods for modeling more general tolerances in both the worst case approach and the statistical variation approach have been proposed  [18–20,13,21–26]. One particular approach has used Small Displacements Torsor (SDT)  [27,28] to model tolerances  [18]. Another approach has used Technologically and Topologically Related Surfaces (TTRS) to form any part as a tree representing the succession of surface associations  [24,19,21,23]. Statistically, the cascading of tolerances of parts could be simulated by a Monte Carlo method  [20,13].Several prior methods have also proposed addressing tolerance allocation. Tolerance allocation is an inverse operation to tolerance estimation, in which tolerances are allocated to dimensions with respect to target tolerances as well as design requirements. Chase et al.  [5] present an allocation method based on the root square method (RSS). Choi et al.  [29] also present an optimal tolerance allocation method on a statistical model. Another allocation method based on optimization is proposed by Forouraghi  [30] using a special multi-objective particle swarm optimizer. Loof et al.  [31] present an allocation method for linear dimensions by formulating an analytical cost function and analytical constraints to minimize the manufacturing cost, which is hard to extend to handle geometric tolerances. Singh et al.  [32] propose an allocation method built on the T-Map model. However, pure geometric operations are hard to implement robustly and to associate directly with probability distribution functions for statistical tolerance analysis.Recently, some new methods for modeling tolerances and their applications have raised research interest. A representative work is presented by Sahani et al.  [33] that describes a systematic solution for the tolerance stack up problem involving geometric characteristics on both the worst case model and the statistical model. Gayton et al.  [34] present a method for predicting the defect probability for all allowable production batches on the statistical tolerance model. Beaucaire et al.  [14] aim to evaluate a predicted quality for the designer by using the statistical tolerance analysis. Tsai et al.  [16] study non-normal distributions and presented a method to analyze the resultant tolerance specification. Barkallah et al.  [13] apply statistical analysis methods to study how manufacturing tolerances should be determined for milling operations. Qureshi et al.  [15] propose a mathematical formulation of the tolerance analysis integrating quantifier so that a single description of the geometrical requirement can be obtained.Traditional methods usually use Monte Carlo simulation to apply statistical rules to tolerance estimations. Though the method implementation is easy, the simulation time cost is usually very high, which limits the usage over complicated dimensioning diagrams. In addition, as the inverse of tolerance estimation, it is hard to design tolerance allocation methods based on simulations. In this paper, we present a new geometric model for statistical tolerances that avoids simulations. Our goal is to decompose the complicated analytical computation of the conventional statistical tolerance analysis into a series of simple geometric computations, without losing the intrinsic statistical meaning. We first use a multivariate statistical model to represent or approximate the tolerance distribution for one single part in the system, which is associated with several dimensions that describe part features. For a given confidence value, we can determine a geometric region that describes the tolerance zone. Those regions are usually bounded by high dimension ellipsoids. We propose a set of operations on the statistical model so that geometric zones from different parts can be cascaded and tolerances can be propagated along the tolerance dependency graph. We also propose an operation to extract the lower degree of freedom (DOF) information from a high DOF representation so as to facilitate the tolerance estimation, such as the clearance estimation of an assembly graph. Since we propose a new model for statistical tolerance computation, we demonstrate its applications both on tolerance estimation and on tolerance allocation. We argue that our new model contributes to the computation of tolerances in both statistical and geometric ways.To summarize contributions of this paper:–We generalized the RSS method from the space of one DOF to the space of high DOFs and proposed complete geometric representations of tolerances without sacrificing the underlying statistical meaning.On our tolerance model, we described a set of operations as a part of the generalized RSS method to enable tolerance compositing and cascading. Those operations have both geometric and statistical explanations.We proposed applications for tolerance estimation with our tolerance model. The estimation utilizes operations on tolerance zones so that tolerances can be composited and propagated.We also proposed applications for tolerance allocation with our tolerance model, that utilize the analytical representation of our model and provide an automatic allocation paradigm based on optimizing cost. As opposed to conventional methods, our allocation method allows us to specify not only numerical constraints, such as zone areas, but also geometric constraints, such as zone principal directions.This paper is organized as follows. Section  2 explains tolerance compositing. We build tolerance zones for primitives within this section. Section  3 explains the generalized RSS method and a set of operations based on the statistical model. Section  4 proposes applications on our tolerance model, including tolerance estimation and tolerance allocation.In this section, we use the multivariate normal distribution (MND) to approximate distributions of tolerances. We also use theχ2distribution to yield geometric representations of tolerances.Assume an object is constrained bynDOFs which formulate a vectorμ∈Rn, and assume the correlation between pairs of DOFs inμis defined by a covariance matrixΣ∈Rn×n. We use the multivariate normal distribution (MND) to formulate the uncertainty zone of vectorμ. We describe this zone using a probability density function (PDF)  [35] that gives the probability of some variablexfor a givenμandσ. The PDF is given byP(x;μ,Σ)=1(2π)n2|Σ|12exp(−12(x−μ)TΣ−1(x−μ)).We writex∼N(μ,Σ)for short. The MND is related to theχ2distribution byP((x−μ)TΣ−1(x−μ)≤χp,α2)=1−α,whereχp,α2indicates the chi-square distribution withpdegrees of freedom, evaluated atα. What this states is thatxwill fall into a particular region with confidence(1−α). The shape of this confidence region of the MND will usually be an ellipsoid of high dimension. The center of the ellipsoid is decided byμ, and directions and lengths of the ellipsoid axes are decided by the covariance matrixΣ.If given real manufacturing data, we can easily obtain the correlation matrixΣ. Given two sets of random data for two random variables, we use the technique in  [36] to compute the correlation coefficient. Correlation coefficients between elements of a given random vector, which form a correlation matrix, can be obtained by computing the correlation between random variables pairwise. For 2D cases, consider the covariance matrixΣ=(σ12ρσ1σ2ρσ1σ2σ22). Twoeigenvaluesλ1,2=12(σ12+σ22±4σ22σ12ρ2+σ14−2σ22σ12+σ24), yield axes with lengthli=λiχp,α2, wherep=2for 2D ellipsoids. Corresponding eigenvectors define axis directions.Fig. 1(a) shows the PDF of a binormal distribution, a specific case of the MND. Fig. 1(b) shows the confidence region for confidence values 0.95 (blue ellipse) and 0.995 (red ellipse). Black dots are simulation results. The motivation for modeling uncertainty probabilities of tolerances with the MND is based on several considerations:–Distributions of tolerances can usually be represented or approximated by the MND. Some previous work (that we will build on) presented the RSS method for linear dimension stacking over normal distribution models  [6]. MND, as a generalization of the normal distribution, can be used to model tolerances in the space of high DOFs as well as the inter-correlations between different DOFs.Some asymmetrical distributions can be approximated by shifted MNDs. The basic MND has a symmetrical form over tolerance distributions, however it can be easily adjusted (as we show below) via a shift. Some asymmetric distributions can be approximated more accurately with a shifted version of the MND.Analytically, the MND has a compact mathematical form for facilitating the computation over tolerance zones. The confidence region can be naturally viewed as a geometric tolerance zone if the confidence rate is given. Tolerance cascading can be achieved easily by summing up two MNDs.These observations inspired us to use MNDs to model tolerances in a statistical way and to use confidence regions to model corresponding tolerance zones. Below, we show how to composite a tolerance zone for a given confidence rate, which serves as the base for building tolerance cascading.A symmetric tolerance zone can be naturally modeled with an MND for which the expected value is the nominal value of the dimension and variances can be obtained from statistical data. Fig. 2(a) shows the symmetric zone for this condition. The red dashed line indicates the nominal value of the dimension. The tolerance zone is bounded by two black solid lines. As a reminder, the position of these black lines will be determined by the confidence rate.However, we can approximate certain asymmetric distributions by shifting the nominal value to be different from the expected value of the distribution. Fig. 2(b) shows the corresponding tolerance zone for such a case. The red dashed line still shows the nominal value of the dimension, which does not overlap with the symmetric axis of the distribution. Two black solid lines, not symmetric to the red line, show the tolerance zone.We want to use the (inherently symmetric) MND as the basic model for describing the tolerance zones in this work. When we need to approximate an asymmetric tolerance distribution with the symmetric model, we can use a nonlinear regression to find what shift will produce the closest (shifted) MND to our asymmetric distribution. We can then use this shifted version in all further computations. Fig. 3(a) shows a Weibull distribution, which has been shown to be useful for describing asymmetric tolerance uncertainties caused by worn-out tools  [37]. As shown in Fig. 3(b), we can approximate this distribution closely with a shifted MND.The original RSS method is built on the normal distribution for computing tolerance cascading along a tolerance chain of dimensions in a single degree of freedom (when we refer to “linear” below, we mean a single degree of freedom). Cascading of two tolerance variancesσ1andσ2can be represented byσ12+σ22. Though the method is simple and straightforward, there are some limitations.–Since the RSS method works on linear dimensions, tolerance chains are required to be composed by 1D dimensions. Accordingly, variances and tolerance zones are also linear, which limits the representation of tolerance zones to be only a tolerance interval rather than a geometric region. Therefore, tolerance zones provide no geometric meaning, such as principal directions, shapes, etc.High DOFs are required to be decomposed before composing the tolerance chain, which complicates the computation of the dependency graph for tolerance cascading.The independence between a pair of DOFs is assumed since dimensions are decomposed, which ignores the representation of covariance within DOFs.There is thus a strong motivation to generalize the RSS method to overcome all those limitations. Below we decouple our generalized RSS method into several basic operations. We explain each operation with its assumptions and limitations. By applying those operations in a proper sequence, we achieve the tolerance compositing and cascading on high DOFs in a systematic way. We also explain how all limitations of the traditional RSS method are overcome with our new generalized RSS method.The generalized RSS method is built on the linear combination of multivariate normal distributions. In detail, suppose we have two independent sets of random variables (vectors)x∼N(μx,Σx)andy∼N(μy,Σy), wherex,y∈Rn. The linear combinationz=Mx+Ny+Lhas the probability distributionz∼N(Mμx+Nμy+L,MΣxMT+NΣyNT), whereMandN∈Rn×Rn, andL∈Rn. We give a short proof for this assertion.ProofSincexandyare independent, the joint probability distribution forxandyis(xy)∼N[(μxμy),(Σx00Σy)].The linear combinationz=Mx+Ny+Lturns to bez=(MN)(xy)+L∼[(MN)(μxμy)+L,(MN)(Σx00Σy)(MTNT)]∼N(Mμx+Nμy+L,MΣxMT+NΣyNT).This combination has two assumptions. One is that bothxandyuse the same bases in the space of DOFs. The other is that bothxandyhave the same number of DOFs. With those assumptions we can cascade tolerances.Fig. 4shows two examples of tolerance cascading. Tolerance zones are composited with the confidence rate 0.95. We assume all MNDs have the form(1)P(x;μ1,μ2,σ12,σ22,ρ)∼N[(μ1μ2),(σ12ρσ1σ2ρσ1σ2σ22)].In Fig. 4(a), the black ellipse is the tolerance zone of distributionP(x;1.0,2.0,0.2,0.3,3/5)and the green ellipse is the tolerance zone of distributionP(y;5.0,7.0,0.3,0.2,−1/5). The blue ellipse (circle) is the cascaded tolerance zone ofxandy. In Fig. 4(b), the black ellipse is the tolerance zone of distributionP(z;1.0,2.0,0.2,0.3,3/5)and the green ellipse is the tolerance zone of distributionP(w;5.0,7.0,0.3,0.2,−3/5). The blue ellipse (circle) is the cascaded tolerance zone ofzandw.However, the previous two assumptions are not always satisfied. For most cases, we neither ensure different parts use the same bases of DOFs nor ensure that they have the same number of DOFs. When the first assumption is invalid, we use an Alignment operation to adjust the frame of DOFs; when the second assumption is invalid, we use Projection to combine part of all DOFs.The alignment operation is used when two tolerances are not spanned by the same bases of DOFs. Basically, we will apply a rotation to one set of bases, and calculate the distribution that provides the best match for that rotated set of bases. Given the tolerance chain in Fig. 5(a), the bases for the tolerance formed by dimensiona→bis different from those for the tolerance formed by dimensionb→c. Cascading these two tolerance zones requires us to transform bases, which is the essential motivation behind the alignment operation. Let the tolerance zone fora→bfollow the distributionP(x)∼N(μx,Σx)and the zone forb→cfollow the distributionP(y)∼N(μy,Σy). Assume the orientations of bases for the two tolerance zones are consistent. We need a rotationRto align the two bases. Without loss of generality, we can view the bases ofP(x)as the static reference. The probability ofP(y)is aligned to beP̃(y)=(μy,RTΣyR), whereRis the rotation matrix to rotate the bases ofP(y)to align withP(x).We show an alignment example in Fig. 5(b).P(y)∼[(1.02.0),(0.2000.3)]. The green ellipse shows the tolerance zone with confidence rate 0.99. We align the vertical axis of the bases to the direction(3,1)T. The rotation matrix turns out to be(0.5−0.8660.8660.5), which yields the new aligned distributionP̃(y)∼[(1.02.0),(0.2750.04330.04330.225)]. The black ellipse shows the new zone with confidence rate 0.99. This aligned tolerance can be cascaded with the zone ofP(x)using previous cascading techniques.Since tolerances of a part associated with several DOFs can be modeled by MND, we can cascade two tolerance zones having different bases of DOFs, with the help of the alignment operation. Note that avoiding the DOF decomposition is our motivation for the alignment operation. The alignment operation keeps the correlation of DOFs so that the tolerance estimation is more accurate than the traditional method requiring decomposition.When cascading two tolerance zones with different numbers of DOFs, we provide the projection operation to combine them together. LetP(x)∼N(μx,Σx)havedxDOFs andP(y)∼N(μy,Σy)havedyDOFs, wheredx>dy. We assumeP(x)andP(y)use the same set of bases, i.e., the bases ofP(y)are a subset of the bases ofP(x). The process to cascadeP(x)andP(y)can be finished in three steps. First, reorder matrixΣyto beΣy1so that the order of bases used byP(y)is the same as that ofP(x). Second, augment matrixΣy1toΣy2to have the same number of DOFs asΣxso that corresponding rows from two matrices indicate the same DOFs. Empty spaces are filled with zeros. Last, mergeΣxandΣy2using cascading rules. Since this operation projects bases ofP(y)to corresponding bases ofP(x), we call it Projection.Fig. 6is an example using projection to cascade tolerances of one DOF and two DOFs. Assume the tolerance of two DOFs has probabilityP(x;1.0,2.0,0.2,0.3,3/5)and the tolerance of one DOF has probabilityP(y)∼N[(5,7)T,0.5]. Note that we will need to know which of the two bases ofxthat the basis ofycorresponds to. Fig. 6(a) shows the results of projections onto different DOFs. The black ellipse is the zone ofx. The blue ellipse is the result of projectingyto the first DOF ofx. The green ellipse is the result of projectingyto the second DOF ofx. Fig. 6(b) shows the final cascading result for the two different interpretations. All those zones have a 0.95 confidence rate.Previous operations allowed us to obtain tolerances represented by high dimensional ellipsoids. More generally, we would often like to know the variance on lower DOF measurements, such as the clearance of an assembly. To do this, we need a slicing operation to reduce the PDF from higher DOFs to lower DOFs. Fig. 7(a) shows three cuts of the 2D MND PDF.Note that the slicing operation is not equivalent to the conditional distribution of the MND. The conditional distribution is obtained by fixing some DOFs and considering the distribution of the remaining DOFs. Though the nominal values of the conditional distribution are changed according to fixed value points, the variances are constant. Fig. 7(b) shows the conditional distribution PDFs for the three cuts in Fig. 7(a). Given a confidence rate, all three PDFs report confidence intervals having the same width, which is not consistent with the ellipsoidal zone of the 2D MND. Thus, we need a different approach than the conditional distribution, which we call our slicing approach.We illustrate the PDF compositing of slicing on 2D DOFs, which can be easily extended to high DOFs. Consider the covariance matrixΣ=(σ12ρσ1σ2ρσ1σ2σ22). Assume we fix the second DOF, corresponding toσ2. We shrinkσ1to beσ1⋅1.0−d/w, wheredis the offset of the second DOF from the nominal center andwis the maximal offset of the second DOF constrained by the ellipse. For example, if we are taking a slice halfway from the nominal center to the boundary of the ellipsoidal region, thend/w=12. Using the newσ1, we compute the conditional distribution and take it as the distribution produced by the slicing operation, which yields the variance1−d/w⋅σ1⋅(1−ρ2). Note that the variance diminishes as we move farther from the nominal point of the MND. Thus, we know that the width of the confidence interval must also be shrinking as we move farther away (unlike the “pure” conditional distribution). Fig. 7(c) shows the composited PDFs for three cuts. Fig. 7(d) shows the corresponding three confidence intervals.Several points are worth noticing. One is that we do not have to slice in the directions of bases. With the help of the alignment operation, we can adjust the covariance matrix of the MND model so that we can slice in any direction, which facilitates the estimation of target dimensions. Another point is that the slice operation do not have to go through the center, which helps us estimate when using a shifted MND model. Third, since the sliced result still follows an MND, it can serve as a part of further tolerance cascading.The shifting operation solves the problem of shifted distributions. We change the nominal value of dimensions having shifted distributions. In detail, if the nominal value of the distribution isμand the shifting offset is vectorδ, we useμ+δas the new nominal value for the tolerance cascading. By applying the shifting operation, we can apply our previous cascading rules onto shifted distributions with almost no extra effort.Users might want more conservative tolerance estimations under some conditions. Although this is mainly a “hack” to allow users to inflate tolerance zones, it can be used to provide a more conservative bound that accounts for numerical error in cascading operations. We allow users to inflate tolerances in one or more DOFs. The inflation operation on a tolerance zone consists of multiplying the variance of bases in the covariance matrix of the distribution by a constant. For example, given a distribution as formula (1), the inflation on base one isP(x;μ1,μ2,s1σ12,σ22,ρ), wheres1>1is a constant. We can also inflate two bases by two constantss1>1ands2>1asP(x;μ1,μ2,s1σ12,s2σ22,ρ). Using the same confidence rate, the new tolerance zone will be larger than the original one, therefore the tolerance estimation becomes more conservative than before.To conclude this section, we revisit the limitations of the traditional RSS method mentioned previously. The limitation of numbers of DOFs has been naturally overcome by the generalized version, since the new method is built on high DOFs using the MND model. DOFs associated with one part do not need to be decomposed before applying cascading operations. Alignment and projection can be viewed as auxiliary operations for preparing DOFs before cascading. Slicing provides the tolerance estimation of lower DOFs. Last, the new method allows us to represent the correlation among DOFs by covariance matrices. All those properties imply that the generalized RSS provides a flexible framework for tolerance analysis on a statistical model.We have presented the generalized RSS method for estimating tolerance propagation along the tolerance chain. In this section, we illustrate the procedure to apply the generalized RSS method to both tolerance estimation and tolerance allocation.Before estimating tolerance zones of general parts, we need a directed acyclic graph (DAG) of dimension dependencies indicating the relative dependencies of individual parts. Each directed edge indicates a dependency from the reference part to the target part, where the reference one is viewed to be static to the target one. As opposed to the traditional graph of the tolerance chain, we allow nodes of the DAG to be geometric primitives, such as points, segments, or general parts having complicated geometric shapes, which facilitates the formulation of DAG quite a bit. Tolerances of primitives can be achieved using operations in the generalized RSS method. And tolerances over general parts can be formulated with related dimensions. We illustrate this idea with an example in Fig. 8.When compositing the tolerance for a general part (such as a box), we must notice that different types of dimension schemas yield different tolerance zones. Fig. 8 gives two dimension schemas for the box. The left one has two dimensionsxandy. Therefore, every point on the whole box has the same covariance matrix, which yields tolerance zones with the same size and shape. Centers of those zones are coordinates of corresponding points. The right figure has four dimensions. The four corners of the box are defined as(x1,y1),(x1,y2),(x2,y1)and(x2,y2). In other words, the four corners have their own tolerance zones. For points on edges, we use the tolerance model for the segment to describe the tolerance, as shown in Fig. 9. Tolerances of points on the segment can be obtained by interpolating tolerances at the two ends. Assume the zones ofq1andq2have been given. The zones ofp3andp1are also represented by the MND model, with the interpolated mean values and variances ofq1andq2. We assumep2depends onp1of which the relative tolerance zone (i.e. assumingp1is fixed) is colored in green. We can use the cascading technique to propagate the tolerance fromp1top2. The cascaded region is colored in pink.Fig. 9 also shows a good example for handling geometric tolerances such as angularity and perpendicularity. The variation zone ofp2can be spanned by two directions that are along (denoted byΔr) and orthogonal to (denoted byΔθ) segmentp1p2respectively. In geometry, variance ofθ, the angle between two segments, actually indicates the angular variation of segmentp1p2. Therefore, the configuration of angularity and perpendicular are adaptive to our tolerance model. Other linear features could be handled in a similar way.Next, we apply our method to assemblies of some simple geometric parts. Fig. 10(a) shows an example of tolerance cascading. The zone of the box below is colored in green while the zone of the box above is colored in blue. Since the box above depends on the box below, we propagate the green tolerance to the blue one and obtain the cascaded pink zone. Note that each box is related to two orthogonal dimensions that do not correspond in this case to the dimensions ofxandy. Therefore, all points on each box share the same tolerance zones. Variances ofd1andd2can be obtained by applying the slicing operation in two orthogonal directions.Fig. 11shows an example of axis alignment in tolerance cascading. The box and the triangle have different frames of DOFs in Fig. 11(a). The axis alignment and the tolerance cascading results are shown in Fig. 11(b). The orange zone, which shows the zone of the box, has a frame which is not aligned with the global coordinate system. By applying the alignment operation, the covariance matrix is changed so that the frame is rotated to be aligned with the global system. The green zone, which shows the zone of the triangle, has a frame aligned with the global system. Therefore, we can cascade the green zone and the aligned orange zone. The result zone is colored in pink. The variance of dimensiondcan be obtained by applying the slicing operation on the pink zone.For a part of a general shape, such as the part in Fig. 12, we compute its tolerance zone with respect to related dimensions. We will illustrate by briefly describing how we would use the operations we have described to estimate the height of the circle centerP. We first estimate tolerance zones of pointsA,B,CandD. The four points are related with dimensionsx1,y1andz1. We use the compositing technique to build four 3D ellipsoids indicating tolerance zones for each point. Next we estimate tolerance zones of pointsE,F,GandH, which are related to dimensionsx1,y3, andz1. We know four 3D ellipsoids describing their tolerance zones. We propagate tolerances fromA,B,CandDtoE,F,GandHusing the cascading technique and get final variation zones ofE,F,GandH. We relate pointPwithQ, the middle point of edgeGH. The tolerance zone of pointQis the interpolation of the zones ofGandH, which is also a 3D ellipsoid. We propagate this tolerance toPvia dimensiony4using the projection operation, since now we have mismatched bases of DOFs of tolerances. We have a 3D ellipsoid to describe the variation of pointP. Finally the slicing operation yields the variation ofPin the vertical direction.Note that we do not consider over-constrained dimensions within our current work, which means we can always find unique related dimensions to composite the tolerance zone of a given point. We know that the tolerance of one vertex is decided by two dimensions within a 2D graph and is decided by three dimensions with 3D cases. Therefore, our method can be generalized to cases of high DOFs easily.Assume that we have two stacked objects. Previous techniques provide methods to propagate the tolerance from one object to the other. This process is tolerance estimation. Tolerance allocation is the reverse process. Given the cascaded zone, we need a method to decompose the zone to two zones for two objects respectively. There are infinite solution configurations for the allocation without any constraints, so people search for allocation schemes that optimize certain merits. Chase et al.  [5] presented basic guidelines for tolerance allocation by analytical methods. The basic idea is to find an applicable tolerance configuration within the whole possible tolerance space. Preferences for some tolerances are differentiated by weighted allocations. However, this scheme is limited by the designer’s experience as well as by the number of DOFs of tolerance constraints, since only numerical ranges of the tolerance are allowed to be constrained. We have no chance to specify geometric information, such as zone shapes or principal directions. In contrast, our method is automatic so that no designer experience is required. Meanwhile, we allow designers to specify geometric information over tolerance constraints.We associate the tolerance zone with a scalar measurement, such as the area or the manufacturing cost, so that a cost function taking the scalar measurement as the parameter can be formulated. Solving the problem by optimizing the cost function by numeric methods yields the optimal allocation scheme. We assume that we want to maximize weighted areas of tolerance zones for each part on the tolerance chain, which formulates the objective function of the optimization. The reason to choose this merit cost is that a bigger tolerance zone implies more flexible requirements on designing and processing. Meanwhile, we allow users to add preferences over different tolerances by adding weights. The optimization over the tolerance allocation becomesmax∑wiArea(ti).(2)st.t0=T0where thetiare tolerance zones related to each node on the tolerance chain.t0is the given tolerance zone specified by designers with the geometric valueT0.We illustrate this problem on an example of 2D tolerance zones. The tolerance allocation problem becomes how to decompose the given covariance matrixΣso thatΣA+ΣB=ΣwhileArea(tA)+Area(tB)is maximized.Σencapsulates all geometric information of the constrained zone.Consider the tolerance varianceΣA=(σ12ρAσ1σ2ρAσ1σ2σ22)of the reference. Absolute values of two singularity values areλ1,2=||12(σ12+σ22±4σ22σ12ρA2+σ14−2σ22σ12+σ24)||. The area of the tolerance zone isπl1l2, whereli=λiχp,α2. The area oftAisπl1l2=πλ1λ2χp,α2. Similarly, we assume the area oftBisπl3l4=πλ3λ4χp,α2. The optimization problem becomesmax(πλ1λ2χp,α2+πλ3λ4χp,α2), subject to the constraintΣA+ΣB=Σ. This nonlinear optimization can be further reduced to bemax(λ12λ22+λ32λ42)(3)st.ΣA+ΣB=Σ,which can be solved with a numerical nonlinear optimization solver.Fig. 13shows a numerical example for one level 2D allocation. We haveΣ=(1.00.80.82.0),ρA=0.5andρB=0.7. Applying the optimization with weightsw1=w2=1, we gotΣA=(0.11−0.079−0.0790.22)andΣB=(0.890.880.881.78). The black ellipse is the area zone ofΣ, blue is forΣAand green is forΣB.We revisit Fig. 12 for illustrating the allocation technique over real parts. To simplify the analytical form in discussion, we only consider the tolerance within the plane formed by pointsC,G,DandH. We study how a prescribed tolerance ofPcan be allocated to those four points. Tolerance dependencies within the plane includeC→G,D→H,GandH→Q, andQ→P. Therefore, the variance ofPcan be obtained using estimation techniques asΣ̃P=12(ΣC+ΣG+ΣD+ΣH)+ΣP.Note thatΣ̃Pis the final tolerance ofPwhich is formed by tolerances propagated from other parts. Similarly, we use absolute values of singularity values to estimate the area of tolerances zones. For symmetry in this example, we require thatCandDhave the same tolerance zones, andGandHhave the same tolerance zones too. By specifying the same weights to all zones, we yield the optimization system as below.max(λC12λC22+λD12λD22+λG12λG22+λH12λH22+λP12λP22)(4)st.Σ̃P=ΣandΣC=ΣDandΣG=ΣH,whereλ, distinguished by point names, indicates singularity values for the covariance matrix of each point.LetΣ=(2.00.60.63.0)and letρC=0.3,ρD=0.3,ρG=0.2,ρH=0.2andρP=0.15. By plugging-in those values into formula (4) and optimizing the system, we have the tolerance zone for each point as below.ΣC=ΣD=(1.0080.3750.3751.550),ΣG=ΣH=(0.7290.1810.1811.122), andΣP=(0.2620.0440.0440.372).

@&#CONCLUSIONS@&#
