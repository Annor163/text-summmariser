@&#MAIN-TITLE@&#
Enhancing vehicle cornering limit through sideslip and yaw rate control

@&#HIGHLIGHTS@&#
Phase-plane analysis of direct yaw moment control based on yaw rate and sideslip.Two novel formulations of integrated yaw rate and sideslip angle control.Singular value decomposition and controllability analysis.Virtual and experimental validation of the controllers on a fully electric vehicle.

@&#KEYPHRASES@&#
Direct yaw moment control,Fully electric vehicle,Yaw rate and sideslip control,Phase-plane analysis,Singular value decomposition,Enhanced Sport Mode,

@&#ABSTRACT@&#
Fully electric vehicles with individually controlled drivetrains can provide a high degree of drivability and vehicle safety, all while increasing the cornering limit and the ‘fun-to-drive’ aspect. This paper investigates a new approach on how sideslip control can be integrated into a continuously active yaw rate controller to extend the limit of stable vehicle cornering and to allow sustained high values of sideslip angle. The controllability-related limitations of integrated yaw rate and sideslip control, together with its potential benefits, are discussed through the tools of multi-variable feedback control theory and non-linear phase-plane analysis. Two examples of integrated yaw rate and sideslip control systems are presented and their effectiveness is experimentally evaluated and demonstrated on a four-wheel-drive fully electric vehicle prototype. Results show that the integrated control system allows safe operation at the vehicle cornering limit at a specified sideslip angle independent of the tire-road friction conditions.left front wheelright front wheelleft rear wheelright rear wheelfront axlerear axlea generic discrete parameterfront and rear semi-wheelbaseslongitudinal accelerationlateral accelerationmaximum reference value of lateral accelerationprocess equation matrices in the extended Kalman filterstiffness parameter of the brush-type model of the tiresdamping ratio of the actuatorserror vectoryaw rate errorsideslip angle errorfirst output singular vector, second output singular vector, singular vector matrix within the singular value decomposition of the sensitivity functionlongitudinal tire forcelateral tire forcevertical tire forcestatic vertical loadplant transfer functiontransfer function (with componentsGMz,randGMz,β) from the actual yaw moment to vehicle statestransfer function (with componentsGp,randGp,β) from the reference yaw moment to vehicle statestransfer function of the shaped planttransfer function (with componentsGδ,randGδ,β) from steering angle to vehicle statesmeasurement equation matrices of the extended Kalman filterroll center heightvertical distance between center of gravity and roll centeridentity matriximaginary unityaw mass moment of inertiahalf-length of tire contact patchslope for the increase of the reference yaw rate after the de-activation of the sideslip controllersuspension roll stiffnesscontrol system matrixparameter of the yaw rate correction algorithmproportional gainyaw rate controllerH∞optimal controllersideslip angle controllerfinal controller formulationvehicle wheelbasevehicle massreference control yaw momentactual yaw moment applied to the vehicleyaw moment contribution related to yaw rate controlfeedback part of Mz,rfeedforward part of Mz,ryaw moment contribution related to sideslip controlthreshold ofMz,βfor activating the reference yaw rate rampstability derivatives in the yaw moment balance equationyaw rate, yaw accelerationyaw rate output from the look-up tablereference yaw ratereference vectorworst reference direction, best reference direction, matrix with the worst and best reference directions according to the singular value decompositionLaplace operator or abbreviation for secondclosed-loop sensitivity functionslip ratiotimetrack widthintegral parameterinput and output complementary sensitivity functionsplant inputfirst output singular vector, second output singular vector, singular vector matrix within the plant singular value decompositionvehicle speedinput singular vector of the plantpre- and post- compensatorsextended Kalman filter process and measurement noisesweighting factor for sideslip estimationstate vectorstability derivatives in the lateral force balance equationoutput vectorslip angle and sliding limit slip anglesideslip angle, sideslip rateestimated sideslip anglesideslip angle estimated by the extended Kalman filtervalues of sideslip angle and sideslip rate at the equilibrium for the passive vehiclevalues of sideslip angle and sideslip rate at the equilibrium for the controlled vehicle in Sport Modesideslip angle estimated through the integration methodactivation parameters of the sideslip controllerpeak value of sideslip anglereference value of sideslip anglesideslip control activation thresholdsideslip thresholdcamber anglesteering anglesteering wheel angleload transfer induced by the aerodynamic forcesload transfer caused by lateral accelerationreference yaw rate correction and corresponding thresholdtime stepoffsets between the nominal activation thresholds and the actual activation and deactivation thresholds in the relay activation scheme of the sideslip controllermaximum robust stability marginparameter of the brush-type model of the tyresactual and estimated tire-road friction coefficientminimum and maximum singular valuesmatrix resulting from the singular value decomposition of the plantfrequencynatural frequency of the actuatorscut-off frequency of the reference yaw rateangular wheel speed

@&#INTRODUCTION@&#
Fully electric vehicles with individually controlled electric motor drives provide significant benefits in terms of vehicle cornering response. In particular, the control of the left-to-right and front-to-rear wheel torque distributions, also called torque-vectoring or direct yaw moment control, has been shown to be beneficial in: i) shaping the understeer characteristic (i.e., the graph of steering wheel angle against lateral acceleration) [1,2] in quasi-static conditions (i.e., when driver inputs are slowly changing), including non-zero longitudinal accelerations; and ii) enhancing the transient cornering response through the reduction of the delays between steering wheel angle and yaw rate, the decrease of the yaw rate and sideslip overshoots, and the increase of the yaw rate damping [1]. With respect to ii), the precise controllability of the individual wheel torques, together with the higher bandwidth typical of electric motor drives and their capability of generating both positive and negative torques, allows better dynamic performance in comparison with conventional stability control systems based on the actuation of the friction brakes [3,4].Several controllers have been proposed for the direct yaw moment control of fully electric vehicles with multiple motors, such as proportional integral derivative (PID) controllers running in parallel with non-linear feedforward contributions [1], linear quadratic regulators [5,6], and various configurations of sliding mode control [7,8], each of them with specific advantages and disadvantages. From the viewpoint of the low-level controllers for allocating the wheel torques, some authors propose energy-efficient wheel torque distribution criteria for the generation of the reference yaw moment and total wheel torque demand [2,9]. Despite the substantial amount of research, a consensus among the experts regarding the ideal control structure for implementing continuous torque-vectoring control in fully electric vehicles does not currently exist.With respect to sideslip control, various control structures [5,6,10] have been presented for the concurrent control of yaw rate and sideslip angle, in which sideslip control is used for vehicle stabilization purposes, either continuously or only in emergency conditions, especially if the tire-road friction coefficient estimation [11–14] (required for yaw rate control) is not accurate. In some of these applications a reference sideslip angle of 0 deg is used, whilst in other cases the sideslip controller intervenes only when a sideslip angle threshold (sometimes variable with sideslip rate) is reached. Ref. [15] uses model predictive control for actuating an active steering system (and not a torque-vectoring controller as in this paper) in order to limit vehicle sideslip in emergency conditions. On the other hand, in a recent study on a torque-vectoring controller for a fully electric vehicle [16], the author states that the “lateral velocity or sideslip angle are not considered as controlled outputs because it is not possible to control the yaw rate and the sideslip angle independently, using only the yaw moment. Trying to control both properties leads to a functionally uncontrollable system with uncontrollable directions. Controlling the lateral velocity (or the sideslip angle) and the yaw rate is possible only by including an additional device like an active steering system.” Hence, the potential benefits of concurrent yaw rate and sideslip control for electric vehicles with multiple motors are to be further investigated. In this respect, one of the main contributions of this paper is to explore the possibilities of a driving mode created through the torque-vectoring capability of a high-performance four-wheel-drive vehicle that purposely induces sustained significant values of sideslip angle to provide an enhanced/controlled driving experience at the vehicle’s cornering limit.11The development and experimental demonstration of novel, easy-to-tune, industrially-oriented and computationally efficient torque-vectoring controllers for generating and maintaining high values of sideslip angle, was a requirement of the car makers of the European Union FP7 consortium E-VECTOORC [17].From a theoretical viewpoint, phase-plane methodologies (e.g., [18,19]) allow comprehensive characterization of the dynamic response of a non-linear system and as such are well suited for this study. These analysis techniques use simplified linear and non-linear models to derive either the phase-plane of sideslip rate as a function of sideslip angle, or the phase-plane of yaw rate as a function of sideslip angle. To date, phase-plane analysis has been used for passive vehicles (i.e., without any controller) or vehicles with active steering systems; the investigation of the response of a vehicle with combined yaw rate and sideslip torque-vectoring control through the phase-plane technique represents a further contribution of this paper. The phase-plane analysis will be used to demonstrate the significant benefits associated with the integrated control of yaw rate and sideslip angle with respect to yaw rate control only, in terms of extension of the vehicle stability region in cornering conditions on the phase-plane of sideslip rate as a function of sideslip angle.In summary, the objectives of the paper are:i)The development of a specific driving mode, called ‘Enhanced Sport Mode’, purposely inducing large and controlled values of sideslip angle;The development and analysis of two controllers, respectively based on the combination of proportional integral derivative and feedforward control (denoted as PID+FF), and on H∞loop-shaping, for the implementation of the novel driving mode in i);The analysis of the extension of the cornering limit achievable through the proposed approach;The simulation-based assessment and experimental demonstration of the performance of the controllers on a fully electric vehicle prototype with four individually controlled electric drivetrains.The electric vehicle demonstrator used in this study has a four-wheel-drive layout. To capture the particular characteristics the vehicle model combines a non-linear model of the sprung and unsprung masses, implemented with IPG CarMaker, with a detailed model of the four on-board electric drivetrains, implemented in Matlab-Simulink, mainly focused on the torsional dynamics of the half-shafts. The CarMaker model includes a non-linear tire model based on the Pacejka Magic Formula with relaxation dynamics. The two models run together in a co-simulation scheme. Examples of experimental validation in quasi-static and transient conditions are shown in [1].A simplified non-linear vehicle model is used for the phase-plane analysis of the yaw rate and sideslip angle controllers. The model formulation is based on the yaw moment and lateral force balance equations:(1){Jzṙ(t)=(Fy,LF(t)+Fy,RF(t))a−(Fy,LR(t)+Fy,RR(t))b+Mz(t)mv(r(t)+β̇(t))=Fy,LF(t)+Fy,RF(t)+Fy,LR(t)+Fy,RR(t)According to the common hypotheses for this kind of phase-plane implementations, vehicle velocity is considered to be constant. The lateral forces for each wheel,Fy, are modeled through the Pacejka Magic Formula:(2)Fy(t)=Fy(α,SR,γ,Fz,μ)The non-linear model considers the load transfers among the four wheels arising from aerodynamic effects (usually negligible in practical terms) and lateral acceleration in cornering conditions:(3)Fz,LF=Fz,STATIC,LF−∆Fz,AERO,F2+∆Fz,ay,F(4)Fz,RF=Fz,STATIC,RF−∆Fz,AERO,F2−∆Fz,ay,F(5)Fz,LR=Fz,STATIC,LR+∆Fz,AERO,R2+∆Fz,ay,R(6)Fz,RR=Fz,STATIC,RR+∆Fz,AERO,R2−∆Fz,ay,Rwhere the load transfer caused byayis estimated through the following steady-state formulas:(7)∆Fz,ay,F=mayTF(bHRCL+kROLL,FHROLLkROLL,F+kROLL,R)(8)∆Fz,ay,R=mayTR(aHRCL+kROLL,RHROLLkROLL,F+kROLL,R)The simplified non-linear model is run for assigned constant values of steering wheel angle,δSW, and vehicle speed,v, with a set of initial conditions in terms of sideslip angle,β, and yaw rate,r. The outputs of the simulation runs are the trajectories ofβ̇as a function ofβ. For example,Fig. 1 is the phase-plane plot atv=90km/h andδSW=50deg. For the whole set of initial conditions (indicated by the open circles in the Figure) the system shows convergence to the equilibrium pointβeq,β̇eq=−5.2deg,0. However, many of the initial conditions are associated with trajectories characterized by an initial significant increment of|β|(>40deg), and can be considered unstable from the practical viewpoint of the vehicle user.A linearized single-track model is used for designing the controllers (PID + FF and H∞), with two variables,randβ, being the controlled outputs. By re-arranging Eq. (1), the single-track model equations are:(9){Jzṙ(t)=Nββ(t)+Nrr(t)+Nδδ(t)+Mz(t)mv(t)(r(t)+β̇(t))=Yββ(t)+Yrr(t)+Yδδ(t)Eq. (9) is converted into a transfer function form:(10)r(s)β(s)=GMzsMzs+Gδ(s)δ(s)with(11)GMzs=GMz,r(s)GMz,β(s),Gδs=Gδ,r(s)Gδ,β(s)where:(12)GMz,r(s)=mvs−YβJzmvs2−JzYβ+Nrmvs−NβYr+Nβmv+NrYβ(13)Gδ,r(s)=JzYδs+YrNδ−YδNr−mvNδJzmvs2−JzYβ+Nrmvs−NβYr+Nβmv+NrYβ(14)GMz,β(s)=Yr−mvJzmvs2−JzYβ+Nrmvs−NβYr+Nβmv+NrYβ(15)Gδ,β(s)=Nδmvs+NβYδ−NδYβJzmvs2−JzYβ+Nrmvs−NβYr+Nβmv+NrYβThe stability derivatives are functions of the front and rear axle cornering stiffnesses.As an electric drivetrain is typically poorly damped, the actuator dynamics should also be considered in the loop when designing the controller. Based on experimental torque sweep tests and tip-in tests (presented in more detail in [1]), a second order model is employed to represent the dynamics between the demanded yaw moment,Mz, and the actual yaw moment applied to the vehicle,Mz,actual:(16)Gas=Mz,actualMzs=ωna2s2+2Daωnas+ωna2whereωnaandDaare approximated at 8Hz and 0.2, respectively. By integrating the actuator model with the single-track vehicle model, the overall model for designing the controller is:(17)r(s)β(s)=GpsMzs+Gδ(s)δ(s)where:(18)Gp(s)=Gp,r(s)Gp,β(s)=GMz,r(s)Ga(s)GMz,β(s)Ga(s)Gp(s)is the main transfer function for designing the feedback controller, as it relates the control input (i.e.,Mz) and outputs (i.e.,randβ).Gδ(s)contains the information of how the disturbance affects the system (the driver׳s steering wheel input is a disturbance during the control system design), however it has no direct influence on the closed-loop performance.The values of cornering stiffness in the single-track vehicle model are selected for the vehicle operating in critical conditions, i.e., with a large steady-stateay(8.7m/s2). Owing to the criticality of large lateral acceleration conditions, a design for the cornering limit will allow the controller to cope with less demanding cornering conditions as well. This is especially relevant for the H∞design approach, characterized by favorable robustness properties. In the following section the vehicle is considered to operate at 90km/h and the model for control system design is parameterized for this velocity. For other speeds, the controller needs to be redesigned, as the overall system dynamics are functions ofv. In the vehicle implementation phase, the corresponding controller can be chosen based on the estimated vehicle speed by using a gain scheduling approach, as described in [20]. The gain scheduling scheme should adopt a bumpless transfer design, to ensure that the switching between the controllers does not create undesirable transients.This section presents the design of the feedback controllers for continuous reference yaw rate tracking, and sideslip tracking when the sideslip angle is beyond assigned thresholds. The control problem is formulated into a multivariable control framework with one input (i.e.,Mz) and two outputs (i.e.,randβ) of the controlled plant (Fig. 2). The yaw moment consists of two contributions; the first one is from the yaw rate controller and the second one is from the sideslip controller.The aim of the yaw rate controller is to continuously shape the understeer characteristic, i.e., the diagram ofδSWas a function ofay. The procedure for the definition of the look-up tables of the steady-state reference yaw rate,rLUT=rLUT(δSW,v,ax,μ^), is explained in [1]. With this approach, the vehicle can be set up with different driving modes on-the-fly. For example, in [1] a Sport Mode is implemented, which, compared to the passive vehicle, has a reduced understeer gradient, a wider region of linear vehicle response and a greater maximum lateral acceleration,ay,max. The Sport Mode is designed so thatay,maxstays within the available friction limits and is associated with a stable constant value ofβ.As an extension, the Enhanced Sport Mode is proposed in this paper, which is purposely designed to provoke a progressive increase ofβby raising the maximum values ofrLUT(and implicitlyay,max) for eachvandμ^. To control and limit the increasing sideslip angle at a desired thresholdβth, the sideslip contribution of the controller is activated. In most cases when|β(t)|<βth, only the yaw rate controller is active. In such case the tracking error of sideslip angle,eβ, is set to zero and does not contribute to the yaw moment demand. When|β(t)|≥βth,eβbecomes non-zero and the sideslip angle-related portion of the yaw moment starts forcingβtowards its reference value. In the meantimerdeviates fromrref.The next sub-sections will focus on:i)The definition of the variable thresholds for activating and de-activating the sideslip contribution of the controller;The design of the H∞loop-shaping controller and the PID + FF controller;The controllability analysis of the system.Two activation schemes of the sideslip control contribution are proposed: firstly, a variable threshold activation scheme, and secondly, a constant threshold activation scheme.According to the activation scheme with variable threshold, the activation condition of the sideslip controller is based on the boundaries in theβ̇(β)phase-plane shown inFig. 3. The continuous lines in Fig. 3 are the nominal stability boundaries according to phase-plane analyzes (e.g., Fig. 1). When the vehicle is within the boundaries, it is considered to be stable; when it operates outside the limits, the vehicle is considered unstable. The intersections between the continuous lines and the axes identify the nominal threshold values for sideslip angle and sideslip rate, which are referred to asβmax,βmin,β̇max, andβ̇min. To guard against chattering a relay-based algorithm is included for the activation and deactivation of the controller, where the actual thresholds are defined with an offset (according to the dashed lines in Fig. 3) with respect to the nominal stability boundaries. For instance, in the right part of Fig. 3, the activation conditions are:(19){β(t)>∆βvertβ̇(t)>(β̇max+∆β̇)−β̇max+∆β̇βmax+∆ββ(t)with∆β=(∆β̇+β̇max)βmaxβ̇max−βmax. The deactivation conditions are:(20){β(t)<−∆βvertβ̇(t)<(β̇max−∆β̇)−β̇max−∆β̇βmax−∆ββ(t)Once the sideslip controller is active, the sideslip angle error forβ>0is calculated as:(21)eβ=MAX(−∆βvert;(−β̇max+∆β̇+β̇(t))βmax−∆ββ̇max−∆β̇)−β(t)In the case of sideslip control with a constant thresholdβth, the error is:eβ=βref(t)−β(t), withβref(t)defined as:(22){βreft=βt,if|βt|<βth,sideslipcontrollerinactiveβreft=βth,if|βt|≥βth,sideslipcontrolleractiveThe selection of the numerical values of the activation thresholds and sideslip reference parameters is based on the outputs of phase-plane stability analyzes, and can be parameterized as a function of the vehicle operating conditions (e.g., steering wheel angle, torque demand, tire-road friction coefficient), so that the sideslip contribution of the controller intervenes only when it is strictly required. This aspect will be the subject of further research and is one of the main benefits of the proposed approach, with respect to the existing integrated feedback controllers for yaw rate and sideslip control.Two PI regulators are applied for synthesizing the PID+FF scheme; one for yaw rate control and a second one for sideslip control. The parameters of the yaw rate controller are based on the Bode diagram analysis approach. The design procedure shows that it is possible to achieve phase margin exceeding 90 deg and gain margin of ≅3, which are sufficient for robust design. The sideslip controller is tuned to achieve satisfactory performance through simulations with the non-linear CarMaker model. Bode diagram-based methods cannot be used for sideslip control design, as these are only suitable for single-input single-output control systems. When the sideslip controller is activated, the yaw moment is regulated to control both yaw rate and sideslip angle, which is a single-input multiple-output problem.As more advanced alternative, the multivariable robust design approach H∞loop-shaping is employed to design the two-input single-output controller. It includes three steps [20]:Step i) Selection of the elements of the diagonal pre- and post-compensators,W1∈R1×1andW2∈R2×2. The pre-compensator,W1, is selected in the form of a PI filter. This typical choice of pre-compensator provides high gain at low frequencies (for good reference tracking) and low gain at high frequencies (for sensor noise rejection). The pre-compensatorW1of this study is:(23)W1=Kp(1+1Tis),Kp=436Nm/deg,Ti=1sThe post-compensator,W2, is used for defining the relative importance of the outputs to be controlled. In this design, more weight onβis required in order to prioritize sideslip control for safety reasons whenβexceeds the limit. At this stage, the design of the feedback control system of the PID+FF controller is complete;Step ii) Robust stabilization of the shaped plantGs=W2GpW1. In this step, the design is ‘robustified’ so thatGstolerates as much coprime uncertainty as possible. The controller can be synthesized by directly solving the Riccati equations indicated in [20] without any design iteration. The resulting controllerKshas the same order asGs, which is five for this study. The final controller to be implemented in the feedback loop isK∞=W1KsW2, which is of sixth order;Step iii) Implementation of the controller in the Haunts form [20] for allowing effective anti-windup of the integral terms.As an indication of the level of robust stability of the designed controller,Table 1 reports the values ofϵmax(i.e., the maximum coprime uncertainty that can be tolerated before instability) for different values of the weight among the contributionsKrandKβ. The sub-controllerKrin the synthesized controllerKcan be solely used for yaw rate control. Its performance and robustness are degraded when using a large weight on β; the maximum stability margin degrades as the weight increases. However, with the selected weights, the values ofϵmaxachieved by the H∞controller are larger than those achieved by using two PI controllers (i.e., one for yaw rate control and a second one for sideslip control, according to the PID+FF scheme), with gains selected according to the pre- and post-compensators adopted for H∞design. The weight selected for the control system implementation is 4, which gives a robust stability margin of 0.41 when usingKβandKrtogether, and 0.58 when usingKralone. The simulation results also indicate that this weight allows satisfactory β-tracking performance. Hence, the post-compensatorW2is:(24)W2=[1004]The overall reference yaw moment is given by:(25)Mz=Mz,r+Mz,β=Mz,r,FF+Mz,r,FB+Mz,βMz,r,FFis the non-linear feedforward contribution of the reference yaw moment determined from a multi-dimensional look-up table, which is computed through an off-line optimization procedure based on a quasi-static vehicle model (see [1,2]). This contribution is not strictly required for controllers with a significant integral yaw rate component, and in the presented results was used only within the PID+FF controller.With respect to the problem of yaw rate and sideslip control through torque-vectoring only, the system is controllable according to the Kalman’s controllability definition, i.e., the determinant of the controllability matrix is different from zero [20]. However, the system is functionally uncontrollable as the number of inputs is smaller than the number of outputs, which means that the two outputs (βandr) cannot be independently controlled. Therefore, a detailed analysis is required to understand the actual performance of the designed controller. To this purpose, the steady-state gain ofGp(s)is calculated for the specific linearization point of the system and the resulting matrixGp(0)is subject to singular value decomposition:(26)Gp(0)=[0.1550−0.1193]×10−4=[0.79250.6098−0.60980.7925]︸U=[u1u2][0.1955×10−40]︸Σ[1]︸VHThe first output singular vectoru1=[0.7925−0.6098]indicates in which output direction the plant can be most effectively controlled, while in the other directionu2=[0.60980.7925]the plant cannot be controlled, as the corresponding element ofΣis zero. This means that when a control input (i.e.,Mz) is applied, the effect is to move the outputs in opposite directions.The same conclusions can be drawn for the closed-loop performance, defined by the closed-loop sensitivity functionS(s):(27)S(s)=II+Gp(s)K∞(s)For a reference tracking problem,S(s)represents the gain from the reference input to the tracking errorS(s)=e(s)/ref(s). This gain depends on the direction ofref(s)and is bounded by the maximum and minimum singular values ofS(jω),σ¯(S(jω)), andσ̲(S(jω)), respectively. The worst-case direction ofref(s)corresponds toσ¯(S(jω))and the best-case direction corresponds toσ̲(S(jω)). In formulas:(28)σ̲(S(jω))≤‖e(ω)‖2‖ref(ω)‖2≤σ¯(S(jω))In case of a controller with multiple outputs, the singular values ofS(jω)are small at low frequency in order to obtain a small tracking error and they approach 1 at high frequencies. However, as shown inFig. 4,σ¯(S(jω))is not small (above 0dB) at low frequencies. Therefore, in the worst-case direction the system is uncontrollable. The singular value decomposition of the steady-state value ofS(jω)is:(29)S(0)=[0.95620.29270.2927−0.9562]E=[e1e2][1.2268000][0.60980.79250.7925−0.6098]R=[r1r2]which confirms the best and worst directions already discussed for the singular values of the plant.The robustness properties of the closed-loop system can be analyzed via the maximum singular values of the input and output complementary sensitivity functions,TIandTO, indicating the robustness against the multiplicative input and output plant uncertainties, respectively:(30)TI=K∞(s)Gp(s)/(I+K∞(s)Gp(s))(31)TO=GpsK∞(s)/(I+GpsK∞(s))As shown inFig. 5,TIandTOstay below 0dB and reduce quickly at high frequencies, which indicates good robustness.Based on the presented analysis, the co-existence of yaw rate and sideslip angle control in vehicles with torque-vectoring capability could be a matter of controversy. However, continuous yaw rate control needs the generation of a smooth reference yaw rate, which is a function ofμ^. Asμestimation is more difficult and slower than sideslip estimation and can be subject to significant oscillations even in constant friction conditions [11–14], the yaw rate controller on its own is not sufficient in practice. In particular, the sideslip controller must be designed to be dominant over the yaw rate controller once it is active. At the same time, a control structure with the two yaw moment contributions applied individually with a switching algorithm (i.e., withMz,βoff whenMz,ris on and vice versa) is not practical, as this could imply significant discontinuities ofMz.The experience of the authors is that the two controllers can easily co-exist if the integral contribution ofMz,r,FBis relatively low and a reasonably high weight is assigned to the sideslip contribution. If the integral contribution ofMz,r,FBis significant, the functional uncontrollability of the system provokes a progressive increase ofMz,rin opposite direction to the sideslip-related contribution. The divergence among the two contributions can be solved by a reduction of the reference yaw rate for the yaw rate controller by similar amount to the actual yaw rate reduction provoked by the sideslip contribution. The sideslip-related yaw rate reduction,∆rref, is expressed as the integral of the sideslip-related yaw moment contribution divided by the yaw mass moment of inertia. In fact,Mz,β/Jzis the variation of yaw acceleration caused byMz,β. If|Mz,β|is smaller than the thresholdMz,β,lim, then through the second condition in Eq. (32)rrefis progressively ramped back to the valuerLUT(δSW,v,ax,μ^). In formulas:(32)∆rref={Kcorr∫Mz,βJzdtif|Mz,β|≥Mz,β,lim∫−krampsign(∆rref)dtif(|Mz,β|<Mz,β,lim)and(|Δrref|≥Δrref,lim)0if(|Mz,β|<Mz,β,lim)and(|Δrref|<Δrref,lim)Therefore, the reference yaw rate has the form:(33)rref=(rLUT(δ,v,ax,μ^)+∆rref)ωrs+ωrThe actual implementation of the controller implies specific algorithms for the selection of the initial conditions and the reset of the integrators in Eq. (32).Mz,βis based on a sideslip estimator combining two algorithms:i)An algorithm calculating the following integral solution:(34)β^int=∫(ayv−r)dt+βth,intAn extended Kalman filter (EKF) based on the non-linear vehicle model formulation discussed in Section 2 (Eq. (1) of the model for the phase-plane analysis of vehicle behavior) and a tire brush model [21] with the lateral force characteristic given by (the subscripts referring to the individuals wheels are omitted for simplicity):The brush model formulation, here presented for the condition of pure cornering (sufficient for the specific maneuvers), can be easily extended to the case of combined slip, with the approach discussed in detail in [21]. Also, the EKF equations can be enhanced to include the states related to tire relaxation. However, given the frequency range typical of vehicle yaw dynamics, the modeling of this second approximation effect is not required for the specific application.The non-linear equations are linearized at each time step and implemented in a discretized state-space representation, whereẋ≈x(k+1)−x(k)∆t:(37){xk+1=Akxk+Bkuk+D¯x,k+Wwkzk=Hkxk+Dkuk+D¯z,k+ZvkThe EKF formulation follows the standard set-up discussed in [22].The estimated sideslip angle is given by:(38)β^=wβ(β^)β^EKF+(1−wβ(β^))β^intwhere the weighting factorwβ, function ofβ^, provides a smooth transition between the region at medium-low sideslip angle, in which the EKF contribution is the dominant one, and the region at significant sideslip angle, in which the contribution deriving from the integral solution is the dominant one. The combination of the two algorithms provides good performance as confirmed by experimental tests, seeFig. 6. As mentioned in Section 3, the Enhanced Sport Mode exhibits a progressive increase of sideslip after the steering wheel input application is completed in absence of the contributionMz,β.In addition to experimental testing (Section 6), a simulation-based study was conducted to allow assessment of the control system performance over a wide set of conditions.The controllers developed in Section 4 are implemented in the non-linear vehicle model for the phase-plane analysis of vehicle response, thus providing a first phase-plane-based assessment (so far missing in the literature) of integrated yaw rate and sideslip control.Fig. 7 reports the results for the vehicle with the H∞yaw rate controller only, and the vehicle with the H∞yaw rate and sideslip controller (in this case with a constant activation threshold). In both cases the reference yaw rate is the one of the Sport Mode, andvandδSWare the same (90km/h and 50 deg, respectively) as for the phase-plane plot of Fig. 1. In Fig. 7(a) the circles represent the initial conditions yielding a stable motion towards the equilibrium of the system in Sport Mode corresponding toβeq,Sport,β̇eq,Sport=−5.5deg,0. The asterisks show the initial conditions for which the vehicle with the yaw rate controller results in an unstable motion. This observation allows the first conclusion of this analysis: even if the steady-state reference yaw rate is within the cornering limits of the vehicle, for significant initial negative values ofβ(lower than −10 deg) the yaw rate controller alone cannot direct the vehicle to a stable operating condition.In case of concurrent yaw rate and sideslip control (Fig. 7(b)), the stable points identified with the yaw rate controller only (Fig. 7(a)) remain stable and converge to the same final point, as shown by the circles located at their initial conditions and the rhomboidal shape located at the equilibrium(βeq,Sport,β̇eq,Sport). However, many of the initial points corresponding to the stable conditions with the yaw rate controller are located in the activation region of the sideslip controller (Fig. 3). As a consequence, they imply interventions of the sideslip contribution, which tends to provoke larger|β̇|(with positiveβ̇in case of negativeβand negativeβ̇in case of positiveβ) than with the yaw rate controller only, in order to swiftly bring the vehicle within the stable region in theβ̇(β)phase-plane. For instance, forβ>0the trajectories with the yaw rate and sideslip controller starting in the activation region of the sideslip contribution are characterized by a path with peak values ofβ̇of about −80deg/s compared to −40deg/s for the corresponding trajectories with the yaw rate controller only. The unstable points with the yaw rate controller become stable with the combined controller; the corresponding initial conditions are shown with squares in Fig. 7(b). The corresponding (second) equilibrium with the integrated yaw rate and sideslip controller is indicated by a triangle, for the (very significant) valueβminof −16.5deg adopted in the control system tuning for the specific simulations. The fact that the integrated controller allows an extension of the region of stable vehicle operation also whenrrefis within the boundaries allowed by the tire-road friction limits is an important conclusion of this phase-plane analysis, demonstrating the major safety-related benefit of sideslip control.Fig. 8 is the equivalent of Fig. 7 with the Enhanced Sport Mode, characterized by a larger|rref|. In particular, Fig. 8(a) shows the destabilizing effect of the yaw rate controller caused by a reference yaw rate higher than the limit corresponding to the tire-road friction conditions. All the initial conditions, indicated by the asterisks in Fig. 8(a), lead to unstable vehicle operation. In contrast, the concurrent yaw rate and sideslip controller allows the vehicle to reach the set equilibrium, corresponding to the coordinatesβmin,0=(−16.5deg,0), with any initial condition (Fig. 8(b)). The values ofβminandβmaxare important tuning parameters of the Enhanced Sport Mode as they define the final steady-state values of sustained vehicle sideslip.This part of the analysis work is aimed at the time domain investigation of the potential benefits of sideslip control compared to yaw rate control only, when the friction conditions are not correctly estimated, and therefore|rref|is in excess of the value corresponding to the actual friction conditions. The adopted model is the CarMaker – Simulink model presented in Section 2.1. Using the Sport Mode, a sequence of three step steers (each with an amplitude of 100deg) is simulated starting from an initialvof 90km/h and a constant wheel torque demand.Table 2 reports the results for the maneuver executed atμ=1with the correspondingrref(first raw of results), and executed atμ=0.5whilerrefis deliberately maintained to be the one forμ=1(second row of results). The considered controller configurations are analyzed with the yaw rate contribution only, and with the combined yaw rate and sideslip contributions. Also, the combined controller is tested with constant (|βth|=5deg) and variable (|βmin|=|βmax|=5deg) activation thresholds for the sideslip contribution (see Fig. 3). The PID+FF controller is implemented in the form of a P+FF in order to assess the performance benefit of an advanced control structure such as the H∞controller over a simple controller set-up.Figs. 9 and 10 reportr(t)andβ(t)for the passive vehicle and the vehicle with the P+FF controller forμ=0.5. The analysis of the results allows the following conclusions:•In the case of correct friction coefficient estimation, the introduction ofMz,βdoes not provide a benefit;Yaw rate controllers can provide safe vehicle operation on their own only with correct friction estimation. For example, in the case of overestimation of the friction conditions, yaw rate controllers can provoke|βpeak|in excess of 15deg;In the case of erroneous friction coefficient estimation, even a basic P+FF controller including both the yaw rate and sideslip contributions is sufficient to provide safe vehicle operation;The H∞control scheme provides some performance benefit with respect to the P+FF controller, for example, by reducing|βpeak|by more than 1deg. However, during the analysis it was observed that the performance of a PI+FF controller (instead of a P+FF controller) could become relatively close to the performance of the H∞controller;The variation of the sideslip controller activation threshold as a function of the estimated sideslip rate (Eqs. (19)–(21)) introduces a further improvement in the control system performance with a reduction of|βpeak|between 0.8 and 0.9deg. Therefore, this formulation is recommended for an industrial implementation of the control scheme;Relatively simple control structures such as the ones presented here allow safe vehicle operation even without a friction coefficient estimator. Hence, considering the difficulty involved in friction estimation, integrated yaw rate and sideslip control seems to promise a greater industrial development potential than very sophisticated model-based yaw rate controllers that rely on accurate real-time friction estimation.

@&#CONCLUSIONS@&#
The paper discussed the integration of sideslip control within a continuously active yaw rate controller for a four-wheel-drive fully electric vehicle with individually controlled drivetrains, through vehicle dynamics simulations in the time domain, novel phase-plane analyzes and experimental tests. The main conclusions are:•The implementation of the H∞and PID+FF control structures on the vehicle demonstrator of the European FP7 project E-VECTOORC allowed the successful experimental demonstration of an Enhanced Sport Mode, which keeps the car at a set sideslip angle during cornering in limit conditions;The combination of yaw rate and sideslip control actuated only through torque-vectoring has been demonstrated to be beneficial to the vehicle cornering response, even if the system is functionally uncontrollable. Novel design solutions for limiting the effect of the functional uncontrollability were proposed, based on the variation of the reference yaw rate as a function of the sideslip-related yaw moment contribution integrated along time;Feedback sideslip control, even in the form of a simple proportional controller, significantly increases the stable region of vehicle operation on theβ̇(β)phase-plane, also in case of driving modes characterized by a not particularly ‘aggressive’ set of reference understeer characteristics. This is a major contribution of the paper. Moreover, sideslip control allows simple control structures with conventional friction estimation algorithms (or even without friction estimation algorithms, see Section 5) to provide safe vehicle operation during extreme transient maneuvers;A combined yaw rate and sideslip controller can be tuned so that the vehicle trajectories tend to converge to the sideslip angle threshold of the sideslip controller for any initial condition;In practical terms, during realistic maneuvers a very simple control structure (e.g., based on proportional controllers for both the yaw rate and sideslip contributions) can be effective with tracking performance comparable to more complex control structures such as H∞-based controllers.