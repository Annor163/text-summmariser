@&#MAIN-TITLE@&#
Automatic room detection and reconstruction in cluttered indoor environments with complex room layouts

@&#HIGHLIGHTS@&#
We reconstruct an architectural model from a laser scanned indoor environment.Our algorithm can handle complex and highly concave room arrangements.It automatically detects all rooms without knowing the number of rooms in advance.Our pipeline can cope with occlusions and clutter using a robust heat diffusion process.An evaluation on artificial and real world data shows the accuracy of the method.

@&#KEYPHRASES@&#
Indoor scene reconstruction,LIDAR reconstruction,Point cloud processing,

@&#ABSTRACT@&#
Graphical abstract

@&#INTRODUCTION@&#
In architecture and engineering, there is a substantial need for semantically rich 3D models of buildings. As 3D designs are most often not available, or significantly different from the “as-is” condition of a given building, technology for creating models from observations is of primary importance. 3D acquisition devices such as laser scanners are now available for fast, accurate and cost-effective acquisition of 3D data. However, efficient methods must be devised to extract higher-level models from the acquired raw point-cloud data.Of particular interest is the problem of determining the architectural structure of indoor environments (e.g., room walls, floors and ceilings). Indoor reconstruction exhibits a number of distinctive challenges that make it significantly harder to manage than the more well-studied problem of building shape reconstruction from outdoor scans (see also Section 2). First of all, indoor reconstruction methods must be significantly more tolerant to missing data than their outdoor counterparts, since environments such as offices and apartments exhibit extremely high levels of clutter. This typically results in heavy occlusions of walls and other structures of interest (see also Fig. 1). Secondly, windows and other highly reflective surfaces are often present in such scenes. As a result, the acquired model is heavily affected by large-scale artifacts, measurement noise and missing data, due to the critical interaction properties of the reflective elements with the measurement devices (see also Fig. 1). Finally, creating structured 3D models of typical indoor environments, such as apartments and office buildings, poses the challenge of recognizing their interior structure in terms of a graph of connected rooms and corridors.Much of the work on interior environments has focused so far on the analysis and classification of the objects in the scene [1,2], while the problem of recovering architectural components is less developed, and has concerned mostly floor plan reconstruction and wall boundary determination (see Section 2). Most current methods rely on the implicit assumption that the architectural components are well sampled. Even those approaches that include an explicit filtering stage in their pipeline are only able to tolerate small amounts of clutter and can fail in many situations that are commonly found in real world scenes. Moreover, many of the existing solutions are targeted at simply connected environments such as corridors and cannot reconstruct the shape of individual rooms within more complex environments.In this paper, we present a robust pipeline for reconstructing a clean architectural model of an indoor environment from a set of cluttered 3D input scans that partially cover the scene of interest (typically 1 or 2 panoramic scans per room). Our method only assumes that the scanner positions are known, and the environment is composed of multiple rooms bound by vertical walls, which holds true for a vast majority of buildings, and is capable to recover a room graph, as well as an accurate polyhedral representation of each room.The whole pipeline is depicted in Fig. 2. An occlusion-aware process extracts vertical planar patches as candidates for genuine wall segments, separating them from clutter and coping with missing data by using efficient viewpoint-based visibility computations on a per-scan basis. Starting from a space partitioning induced by the candidate walls, we use a robust heat diffusion process to propagate similarities between cells of the partitioning which belong to the same room. We then cluster the area into multiple rooms using an iterative binary subdivision algorithm. Unlike standard methods like k-means, our solution automatically finds the correct number of rooms without a termination threshold by exploiting the knowledge of the scanner positions.This work is a significantly extended version of our CADCG 2013 contribution [3]. Besides supplying a more thorough exposition, we provide here significant new material and a number of important novel contributions. Our main improvements are the following:•a thorough description of the room detection process, which shows in more detail the properties of the computed diffusion embedding and provides a comprehensive analysis of the subdivision scheme;important methodological improvements, including a post-processing stage that corrects possible imperfections in the clustering results and a more effective robust technique based on M-estimators[4] for the reconstruction of the final wall planes;an extended evaluation, where we perform both a qualitative and quantitative analysis on a wider set of inputs, including two large real-world datasets and two new synthetic datasets that feature more complex room layouts and high variability in the shapes of the rooms.The overall approach is the first indoor reconstruction pipeline capable of coping with heavy occlusions and missing data, while automatically recognizing different rooms as separate components. Such a room labeling is useful in many real-world applications, such as room asset planning and management or the definition of thermal zones for energy simulation. As demonstrated in Section 7, the method is applicable to large real-world environments with an extremely high level of clutter and is robust to scanning noise and large artifacts originating from reflecting surfaces.

@&#CONCLUSIONS@&#
We have presented a system for the automatic reconstruction of complex indoor architectural environments that can correctly partition the input model into the appropriate number of separate rooms. Our method is robust against clutter and occlusions, and performs well in real-world scenarios. With respect to the previous solution [3], we have improved the accuracy of the room detection as well as the performance of our method. We also added an in-depth analysis of our algorithm and provided both additional visual and quantitative evaluations of a wider range of more complex models.Most of the limitations of our approach are directly linked to our starting assumptions – we target only buildings that have planar, vertical walls and horizontal ceilings; structures that cannot be fully explained with a 2D cell complex, such as slanted walls (see Fig. 16(a)), ceilings of different heights (see Fig. 16(b)) or structures like staircases cannot be correctly reconstructed by our pipeline. We focus on the robust extraction of the basic room shapes, and do not attempt to recognize fine architectural details. We rely on the assumption that each room contains at least one scan position; rooms that do not satisfy this condition (Fig. 16(c)) cannot be extracted by the iterative clustering procedure. All environments shown in the results are composed of rooms which share a border with the outside (i.e. the clusterK∞of unlabeled faces, see Section 5.4); additional tests (see Fig. 17) showed that our method can reconstruct an environment containing one room completely contained in another, but more complex cases (e.g. multiple, adjacent rooms surrounded by other rooms) should be investigated in more detail in future work.We view our algorithm as a first step towards going beyond simple geometric reconstruction to extract semantic information from the input dataset. We plan to combine this with methods for the automatic detection of indoor objects like furniture [32] in an indoor reconstruction pipeline. As a future goal we would like to create a fully parametrized architectural CAD model that could serve as a basis for subsequent editing work of a designer. We plan to incorporate general slanted walls, curved surfaces and other typical architectural structures into our pipeline. Finally, we are interested in extending our virtual scanning prototype so that it realistically models the behavior of time-of-flight scanners.