@&#MAIN-TITLE@&#
A comprehensive study of three dimensional tolerance analysis methods

@&#HIGHLIGHTS@&#
Introduce four major 3D tolerance analysis models briefly.Make a comprehensive comparison and discussion between them.Expound the connotation of 3D tolerance analysis.Present a perspective overview of the future research about 3D tolerance analysis.

@&#KEYPHRASES@&#
3D tolerance analysis,T-Map,Matrix,Unified Jacobian–Torsor,Direct linearization method,Comparison,

@&#ABSTRACT@&#
Three dimensional (3D) tolerance analysis is an innovative method which represents and transfers tolerance in 3D space. The advantage of 3D method is taking both dimensional and geometric tolerances into consideration, compared with traditional 1/2D tolerance methods considering dimensional tolerances only. This paper reviews four major methods of 3D tolerance analysis and compares them based on the literature published over the last three decades or so. The methods studied are Tolerance-Map (T-Map), matrix model, unified Jacobian–Torsor model and direct linearization method (DLM). Each of them has its advantages and disadvantages. The T-Map method can model all of tolerances and their interaction while the mathematic theory and operation may be challenging for users. The matrix model based on the homogeneous matrix which is classical and concise has been the foundation of some successful computer aided tolerancing software (CATs), but the solution of constraint relations composed of inequalities is complicated. The unified Jacobian–Torsor model combines the advantages of the torsor model which is suitable for tolerance representation and the Jacobian matrix which is suitable for tolerance propagation. It is computationally efficient, but the constraint relations between components of torsor need to be considered to improve its accuracy and validity. The DLM is based on the first order Taylor’s series expansion of vector-loop-based assembly models which use vectors to represent either component dimensions or assembly dimensions. Geometric tolerances are operated as dimensional tolerances in DLM, which is not fully consistent with tolerancing standards. The results of four models with respect to an example are also listed to make a comparison. Finally, a perspective overview of the future research about 3D tolerance analysis is presented.

@&#INTRODUCTION@&#
The objective of tolerance analysis is to check the feasibility and quality of assemblies or parts for a given GD&T scheme. The results of tolerance analysis include worst case variations and statistical distribution of functional requirement, acceptance rates, contributors and their percent contributions, and the sensitivity coefficients with respect to each contributor. Tolerance analysis is an essential part for mechanical design and manufacturing because it affects not only the performance of products but also the cost.Tolerance analysis, including tolerance representation and tolerance propagation (tolerance transfer), can be classified into many categories based on the analysis objective and analysis approach, as shown in Fig. 1. According to dimensionality, there are one dimensional (1D), two dimensional (2D) and three dimensional (3D) tolerance analyses. Three approaches are applied for 1/2/3D tolerance analysis, i.e., worst case (deterministic case), statistical case and Monte Carlo simulation. Rigid and flexible tolerance analysis are two different models in the light of analysis objective. The former is surface-based and needs shape closure only, such as engines’ tolerance analysis; the latter is point-based and needs shape and force closure simultaneously, such as auto-bodies’ tolerance analysis where the finite element method (FEM) is used to take the deformation into consideration  [1–4]. The division into part level and assembly level is another classification. The stack-up effect of assembly can be described by virtue of assembly function explicitly or implicitly, depending on the assembly method and sequence, as well as the property of components  [5]. Tolerance analysis runs through the whole process of the product, including design, process planning, manufacturing, inspection, but the objective may be different in each phase. For example, the tolerance scheme, i.e., conventional (parametric) and geometric tolerance will be selected and specified, and then tolerance analysis for functional requirement will be carried out in design phase. Meanwhile, besides manual analysis, computer aided tolerancing software (CATs), such as VisVSA®, 3DCS®  and CETOL®  are applied to tolerance analysis successfully  [6–9]. To be sure, the classification of tolerance analysis will be more and more complicated with the development of mechanical design and manufacturing.Over the last thirty years, a large amount of fundamental research efforts has been given to explore the mathematical basis for tolerance analysis. For tolerance representation, the models or concepts include variational geometry  [10–12], variational class [13,14], virtual boundary  [15,16], feasibility space  [17,18], vectorial approach  [19], virtual joints  [20], degree of freedom (DOF) [21–23], Tolerance-Map (T-Map)  [24,25], topologically and technologically related surfaces (TTRS)  [26], infinitesimal matrix  [27], matrix  [28–30], small displacement torsor (SDT)  [31,32], and proportioned assembly clearance volume (PACV)  [33,34]. Similarly, for tolerance propagation, the approaches or methods consist of the linearization method  [35], system moments  [36,37], quadrature  [38–40], reliability index  [41,42], the Taguchi method  [43,44], Monte Carlo simulations  [45,46], network of zones and datums [47], kinematic formulation  [48], the direct linearization method (DLM)  [49,50], Jacobian matrix  [51,52], state space  [53,54], and the variational method  [55]. It is worth noting that the partition of two categories mentioned above is approximate and based mainly on their strong suits, because there is no boundary between the tolerance representation and propagation for these models, such as the TTRS  [56].As new generations of tolerancing standards, i.e., ASME Y14.5-2009  [57] and ISO 1101  [58] were released and popularized, geometric tolerances are generally accepted as industry practices. The traditional 1/2D tolerance analysis models are insufficient to meet the ever-tightening and increasingly complex requirements of tolerance analysis in various fields  [59]. More specifically, variations of a feature caused by geometric tolerances are three dimensional, which cannot be considered by 1/2D methods. Researchers and engineers need a new method that can analyze how those geometric tolerances are represented and propagated in three dimensional space urgently. It is the 3D tolerance analysis method. Let us take a combustion engine as an example, as shown in Fig. 2. The translational and rotational variations of piston accumulated by geometric and dimensional tolerances of crank-link parts have a significant impact on the compression ratio. In addition, tolerances of parts affect not only the dimensional quality of assembly, but also other qualities such as frictional work  [60,61] and sealing. Finding out the mapping relationship of tolerance between parts and functional requirements and performance indexes is important to engine design. 3D tolerance analysis methods will offer a significant clue for understanding the role of every tolerance of parts in the variation stream (gray boxes in Fig. 2).The 3D tolerance analysis is an innovative method which represents and transfers tolerance in 3D space. Geometric tolerances and dimensional tolerances, as well as the interaction between them in the tolerance zone can be taken into consideration by 3D tolerance analysis methods. Moreover, abundant results, i.e., the translational and rotational variations of target feature are obtained in these methods. Many models have been developed for 3D tolerance representation and propagation since 1990s. Portman  [27] introduces a spatial dimensional chain where the individual error is represented as an infinitesimal matrix to model the tolerance propagation. Fleming  [47] illustrates the geometric relationships by a network of zones and datums connected by arcs to which constraints are assigned. The effects of these constraints are calculated through the network between nodes. Rivest et al.  [48]propose a kinematic formulation which exploits the kinematic character of a toleranced feature relative to its datum. These three methods are preliminary explorations of 3D methods. Laperrière and Lafond  [20,51] use virtual joints for tolerance representation and the Jacobian matrix for tolerance propagation. Davidson et al.  [24] present a T-Map representing all possible variations of size, position, form, and orientation for a target feature. Desrochers and Rivière  [29] represent the variations of a feature with a displacement matrix and transfer them with a homogeneous matrix. An SDT model introduced by Clément et al.  [31] uses six small displacement vectors to represent the position and orientation of an ideal surface in relation to another ideal surface in a kinematic way. Desrochers et al.  [62] put forward a unified Jacobian–Torsor model which combines the advantages of the torsor model and the Jacobian matrix. Chase et al.  [50] introduce a DLM based on the first order Taylor’s series expansion of vector-loop-based assembly models which use vectors to represent either component dimensions or assembly dimensions. Some models mentioned above have been applied extensively by virtue of CATs.The purpose of this work is to discuss four typical methods of 3D tolerance analysis, i.e., the T-Map model, the matrix model, the unified Jacobian–Torsor model and DLM, all of which are research hotspots recently. The TTRS theory is also introduced because it is the basis of the matrix and torsor models. Although several review papers have introduced these methods briefly  [63–70], it is the first time to put them together to make a comparison in 3D context. It should be noted that the concept of 3D here emphasizes tolerance representation and propagation in three dimensional space, other models, such as the state space model which focuses on tolerance transfer with a state space method, the variational method which pays close attention to variation propagation of fixtures with total deterministic locating (3–2–1 scheme), are not discussed because they are point-based tolerance schemes where variations caused by geometric tolerances are not three dimensional.The rest of the paper is organized as follows: Section  2 gives an overall introduction of these 3D tolerance analysis models. Section  3 makes a comprehensive discussion and comparison between them. Finally, conclusions with a perspective overview of the future research about 3D tolerance analysis are given in Section  4.The T-Map®  (Patent No. 6963824) model developed by Davidson et al.  [24] is a hypothetical Euclidean volume of points, the shape, size, and internal subsets of which represent all possible variations in size, position, form, and orientation of a target feature. A T-Map is a convex set resulting from a one-to-one mapping from all the variational possibilities of a feature within its tolerance zone, constructed from a basis-simplex and described with areal coordinates.The areal coordinates use areal parameters to describe the position of a point in a reference triangle. Given three fixed pointsσ1,σ2,σ3, called basis points that are chosen in Euclidean space, the position of any pointσis uniquely determined by the linear equation:(1)σ=λ1σ1+λ2σ2+λ3σ3whereλ1,λ2,λ3are areal coordinates aboutσ, and have the relationλ1+λ2+λ3=1. Either one or two of these coordinates will be negative whenσis chosen outside▵σ1σ2σ3.In order to illustrate the modeling process of T-Map, here we consider a cross-section of a round bar with a size toleranceton its length, as shown in Fig. 3. Fig. 3(a) shows the tolerance zone ABCD where all points of the end face must lie in, and the Cartesian coordinate system. Assuming a perfect round plane with diameterdand no thickness, the possible displacement of this plane is the tolerance zone, i.e., the volume limited by the planesσ1andσ2, and the cylindrical diameter of the bar. The plane would translate along thezaxis and rotate around thexaxis freely on two dimensional occasions where the plane is always parallel to thexaxis. The planeσ3in Fig. 3(a) represents the greatest clockwise tilt of the perfect plane in tolerance zone. After that, the two dimensional set of planes in Fig. 3(a) defined by three basis planesσ1,σ2,σ3are mapped to the areal coordinates, as shown in Fig. 3(b). Any end plane of the round bar that satisfies the size tolerance and is parallel to thexaxis will be represented byσexpressed as Eq. (1). Especially, the points on the line-segmentσ1σ2in Fig. 1(b) represent the parallel planes that are perpendicular to thezaxis in Fig. 1(a) and lie betweenσ1andσ2. The points on the line-segmentσ1σ3in Fig. 1(b) correspond to these planes in Fig. 1(a) that are parallel to thexaxis, pass through pointB, and lie in the tolerance zone betweenσ1andσ3. Similarly, the points on the line-segmentσ2σ3in Fig. 1(b) correspond to these planes in Fig. 1(a) that are parallel to thexaxis, pass through pointC, and lie in the tolerance zone betweenσ2andσ3.The three dimensional tolerance zone at the end of the round bar is obtained by a full sweeping operation aroundzaxis with the rectangle ABCD in Fig. 3(a). Therefore, the three dimensional T-Map is modeled by revolving the triangle in Fig. 3(b) a full turn around the lineσ1σ2, it is a right-circular dicone shown in Fig. 3(c). It should be mentioned that the areal coordinates can also be used to identify points in three dimensional space where four basis points are non-coplanar. The pointsσ1,σ2,σ3,σ4in Fig. 3(c) are selected to establish a tetrahedron of reference for three dimensional area coordinates in the T-Map. Setting∑λi=1, any end plane of the round bar that satisfies the size tolerance will be represented by the linear equation:(2)σ=λ1σ1+λ2σ2+λ3σ3+λ4σ4.The transformation from T-Map in Fig. 3(c) to Cartesian coordinates in Fig. 3(a) is worth mentioning. Presuming a plane in the Cartesian coordinates, as shown in Fig. 4, its position can be described by the equationpx+qy+rz+s=0.p,q,rare the direction cosines in whichris approximately equal to 1 because the rotation displacement of the plane shown in Fig. 3(a) around thezaxis is smaller than other two rotation displacements in the tolerance zone, andsis the absolute distance from the plane to the origin of coordinates. Therefore, the planes in the tolerance zone are distinguished by the coordinatesp,qandsonly.q′in Fig. 3(b) is obtained by assigning dimension or length onqin Fig. 3(a) becauseqis dimensionless. The lateral dimensiontofq′axis in Fig. 3(b) ist=d(t/d)=d⋅tan(α)=dq=q′.p′is obtained in the same way asq′. Consequently, the transformation of any plane in the tolerance zone of Fig. 3(a) from areal coordinates to Cartesian coordinates is:(3)[pqrs]=[000t/d00t/d01111t/2t/200][λ1λ2λ3λ4].It should be stressed that a T-Map for a single part is always convex. This property allows the usage of fundamental principles of convex sets, such as Minkowski sums and differences.We continue to use the round bar shown in Fig. 3 as an objective to illustrate the modeling process of form and orientation tolerance for T-Map, but now a flatness tolerancet1and a parallelism tolerancet2which is relative to a datum plane (another end of bar) are specified besides the size tolerancet. According to the tolerancing standards, the flatness tolerance zone is defined by two parallel planes with the distancet1. Its position and orientation are not constrained within the size tolerance zone. The internal triangular sub-set drawn with a dashed line in Fig. 5(a) represents the flatness tolerance while the hatched triangle corresponds to positions that the flatness tolerance zone can occupy. The Minkowski sum of the sub-set of the dashed triangle and the hatched triangle is the tolerancet. Similarly, the parallelism tolerance zone is defined by two parallel planes which are parallel to planesσ1andσ2with the distancet2, represented by the dashed triangle in Fig. 5(b). Because the parallelism tolerance zone can only translate up or down within the tolerance zonet, the Minkowski sum of sub-set of dashed triangle and its translational zone shown in Fig. 5(b) is a truncated map along theq′axis.In order to illustrate the tolerance propagation of T-Map, a simple assembly composed of two parts is shown in Fig. 6as an example. Part 1 is a round bar. Part 2 consists of two round bars separated by an offsetb. They are assembled end to end coaxially. The functional surface is the upper face of the bar with diameterd2in part 2. The dimensions and tolerances of assembly can be seen in Fig. 6. The coordinate frames are similar to Fig. 3.The variations of orientation in the tolerance zone of part 1 are amplified and cause positional variations of the functional surface because of the offsetb. The accumulation T-Map depends on the offsetband the diametersd1andd2since functional requirements for the target face in the assembly control the assignment of tolerances to the individual parts. Here we only consider the condition whered1>d2. The T-Maps of part 2 and functional requirements in which the aspect ratios are unity are selected to be constructed on the basis tetrahedronσ1σ2σ3σ4in Fig. 3(c). Whenb=0, the half-section of the accumulation (solid line) and functional requirement (dashed line) T-Maps are shown in Fig. 7(a) in which the accumulation T-Map is inscribed in the functional T-Map in order to avoid specifying excessively tight tolerances on individual parts.taandtfwhich are equal tot1+t2represent accumulation tolerance and functional requirement tolerance along the length direction.ta′which is equal tot11⋅(d2/d1)+t2represents orientation tolerance of functional surface, which is tighter than functional requirement.However, it is somewhat complicated ifb≠0. Assuming a rotational angle−q1in the tolerance zone of part 1,sof T-Map of part 1 becomess+bq1which results in pointσ3in Fig. 3(c) moves downward by the amountbt11/d1and the opposite pointσ7moves upward by the same amount. That is an oblique elliptic dicone truncated by the orientation tolerancet11, shown by the dashed line in Fig. 7(b). Whenb≤(d1−d2)/2, the pointσ3in T-Map of part 1 is still within the functional T-Map, and the accumulation tolerance in the axial direction ist1+t2. Whenb>(d1−d2)/2, the pointσ3in T-Map of part 1 touches the lineσ1fσ3f, and the accumulation tolerance along the axial direction ist11⋅((2b+d2)/d1−1)+t1+t2.Besides round bars, T-Maps have been developed for other features, such as polygonal bars  [25], axes  [71–73], angled faces  [74], point–line clusters  [75], and planar and radial clearance with a statistical way  [76–78]. T-Map can also be used for tolerance allocation or synthesis, the detailed discussion is not within the scope of this paper.The matrix model introduced by Desrochers and Rivière  [29] uses a displacement matrixDto describe the small displacements of a feature within the tolerance zone and the clearance between two features. Using the theory of the set of displacements by Hervé  [79], Clément et al.  [26,31,32] have proven that there are only seven elementary surface types, as shown in Table 1. The combinations of surfaces are called TTRS when two surfaces belong to the same part or Pseudo-TTRS when two surfaces belong to two different parts  [80]. The reference elements are classified by the concept of minimum geometric datum element (MGDE)  [81]. Thirteen relative positioning constrains of basic components of the MGDE, i.e., point, line and plane are defined, as shown in Table 1. The concept of functional requirements is also declared in the wake of the TTRS  [82].The 4×4 homogeneous matrixDincluding a 3×3 rotational matrix and a 3×1 translational matrix is chosen here to represent the relative displacement of a feature within tolerance zone:(4)[CγCβ−SγCα+CγSβSαSγSα+CγSβCαuSγCβCγCα+SγSβSα−CγSα+SγSβCαv−SβCβSαCβCαw0001]whereα,β,γare rotational displacements around thex,y,zaxes respectively;u,v,ware translational displacements along thex,y,zaxes respectively;Cis the abbreviation ofcos()andSissin().Tolerance is only meaningful in directions other than those that leave a surface invariant with respect to itself  [83], so every parameter in the matrix can be seen as a micro DOF that leaves the feature non-invariant. Let us take a planar surface shown in Fig. 8as an example, the ideal plane without form tolerance and thickness can translate along thexaxis and rotate around theyandzaxes in the tolerance zone. In other words, a plane has three non-invariant degrees, i.e.,β,γanduwithin its tolerance zone. Another three displacements (α,vandw) are invariant and set to zero. Therefore, Eq. (4) can be simplified for the planar non-invariant matrixD(see Eq. (5)). Non-invariant displacement matrix of the other five surfaces can be seen in Table 1.(5)[CγCβ−SγCγSβuSγCβCγSγSβ0−Sβ0Cβ00001].The matrix representation is completed by a set of inequalities defining the bounds of every component in the matrix. These inequalities depend on the type of surface and tolerance. If more than one tolerance is specified on the same feature, their effects are calculated through the principle of effects overlapping. Taking the four vertexes (A,B,C,D) into consideration, the bounds of the planar surface withtshown in Fig. 8 can be expressed by:(6){tSL≤u(A,B,C,D)≤tSU−t/a≤β≤t/a−t/b≤γ≤t/b}with{uAuBuCuD}=D×{CACBCCCD}whereCA,B,C,Dare coordinates for pointsA,B,C, andD.Two types of datum reference frame (DRF) need to be identified for tolerance transfer in the matrix model when the assembly graph is created, i.e., global DRF (R) which is the evaluation reference of the functional feature and local DRF (Ri) of each part feature. The homogeneous matrixPwhich depends only on the nominal geometry represents the transformation of theRto theRi. Given two points inRi, the theoretical pointMand the same pointM′after a displacement in the tolerance zone,[MM′]represents the total displacement of theMbecause of matrixDi, which can be expressed by:(7)[MM′]R=PR→Ri−1×[MM′]Ri=PR→Ri−1×([M′]Ri−[M]Ri)=PR→Ri−1×(Di−I)×[M]Ri.The equation above gives the range of displacements of theith feature in the global DRF that is allowed by the tolerance zone. More points are necessary to specify the constraints that keep the feature inside the bounds of the tolerance zone. Taking the planar surface shown in Fig. 8 as an example, the additional constraints of pointsA,B,CandDare:(8)tSL≤(Di−I)×[MA,B,C,D]Ri⋅x⃗≤tSUwherex⃗represents the directional vector of tolerance zone.It should be mentioned that other geometric tolerances, such as orientation tolerance, also can be modeled by Eq. (8) through the arithmetic operation of some vertex points according to the tolerancing standards. Moreover, a cylindrical clearance zone can be viewed as an equivalent concentricity tolerance in the matrix model.For convenience, the assembly in Fig. 6 is also used to demonstrate the tolerance analysis of the matrix model, as shown in Fig. 9where three local DRFs (R1,R2,R3) and one global DRF (R0) are specified. The assembly graph is shown in Fig. 10. The functional requirement is the displacement of pointaalong thezaxis in the global DRF, which is equal toza/D1+za/D2. Two matricesD1andD2which are similar to Eq. (5) are established for tolerance representation of the upper surface relative to the under surface of two round bars. With Eq. (7), we can obtain the two displacements of pointa:(9)za/D1=u1+b⋅cos(β1)⋅sin(α1)+l2⋅(cos(β1)⋅cos(α1)−1)(10)za/D2=u2.The constraints of the components ofD1under the tolerancet1andt11with respect to four vertexes of part 1 are:(11)−t12≤{u1+(d1⋅cos(β1)⋅sin(α1))/2u1−d1⋅sin(β1)/2u1−(d1⋅cos(β1)⋅sin(α1))/2u1+d1⋅sin(β1)/2}≤t12(12)−t11≤{d1⋅cos(β1)⋅sin(α1)d1⋅sin(β1)}≤t11.The constraints of the components ofD2under the tolerancet2with respect to four vertexes of part 2 are:(13)−t22≤{u2+(d2⋅cos(β2)⋅sin(α2))/2u2−d2⋅sin(β2)/2u2−(d2⋅cos(β2)⋅sin(α2))/2u2+d2⋅sin(β2)/2}≤t22where−t1/2≤u1≤t1/2,t2/2≤u2≤t2/2,t11/d1≤α1≤t11/d1,t11/d1≤β1≤t11/d1,t2/d2≤α2≤t2/d2,t2/d2≤β2≤t2/d2.Standard optimization algorithms, such as simplex, can be applied to solve this problem.The statistical method of the matrix model for tolerance analysis can be found in  [30]. It is worth mentioning that some CATs based on the matrix model have been developed and applied successfully, such as CATIA.3D FDT®   [6] and FROOM  [68,69].The unified Jacobian–Torsor model introduced by Desrochers et al.  [62] combines the advantages of the torsor model which is suitable for tolerance representation and the Jacobian matrix which is suitable for tolerance propagation. Tolerance analysis of this model is in a kinematic way because of the concept of torsor which is also on the basis of TTRS.The torsor, also known as small displacement torsor (SDT), is a small displacement screw used to represent the position and orientation of an ideal surface or its feature (axis, centerline, plane) in relation to another ideal surface with a kinematic way  [34]. As shown in Fig. 11, at a given pointOon nominal surfaceS0, the SDT of variational surfaceS1fromS0can be expressed as:(14)T=[ρ1/0ε1/0]=[αuβvγw]whereρ1/0is the rotational vector around the axis including three specific vectors, i.e.,α,βandγindicate the vectors around the axesx,yandzin the local reference system respectively; likewise,ε1/0is the translational vector andu,v,ware three specific vectors along the axesx,yandzrespectively.The relative translation between two surfaces at any pointMin Euclidean space can be obtained by a linearization rule in terms ofε1/0and a cross product ofρ1/0and vectorOM⃗.(15)dM⃗=ε1/0+ρ1/0×OM⃗=[uvw]+[−γy+βzγx−αz−βx+αy].The SDT is well suited to not only 3D tolerance representation but also 3D metrology  [84,85]. It should be noted that the SDT for tolerance representation is the first order approximation of the matrix model introduced in the previous subsection  [86]. The rotation angles in Eq. (4) can be simplified bysin(θ)≈θandcos(θ)≈1because the angles are very small in the tolerance zone. Then the 3×3 rotational matrix can be written as:(16)[1−γβγ1−α−βα1].And the small displacement of any pointMcan be obtained by:(17)dM⃗=[uvw]+[1−γβγ1−α−βα1]×[xyz]=[uvw]+[−γy+βzγx−αz−βx+αy].Generally, the constraints of components of SDT depend on the type of tolerance and feature. The SDT used for tolerance representation of planar and cylindrical surfaces, as well as their joints (clearance) has been studied deeply. Seven types of surface and their screws are listed in  [86]. The concept of non-invariant of the matrix model is also effective in the SDT model.α,vandwin Eq. (14) that have no effect on tolerance analysis of the plane shown in Fig. 8 can be set to zero to reduce the scale of computational work.Tolerance representation with SDT is concise and intuitionistic, but it is difficult for tolerance transfer  [64,65]. Therefore, Jacobian matrix is introduced into tolerance analysis.The Jacobian method is a linear arithmetic formulation applied in series robot system, mapping the displacement or velocity of joints to end joint. Laperrière and Lafond  [20,51] bring it into tolerance analysis by introducing the concept of functional pairs expressed by a set of virtual joints.There are two types of functional pairs in the assembly, i.e., internal pair and contact or kinematic pair. The former is composed of two functional elements (FEs) on the same part; the latter is made up of two FEs on different parts if there is a physical or potential contact between them.The Jacobian matrix forith FE can be expressed as:(18)[J]FEi=[[R0i]3×3⋅[RPti]3×3⋮[Win]3×3⋅([R0i]3×3⋅[RPti]3×3)⋯⋮⋯[0]3×3⋮([R0i]3×3⋅[RPti]3×3)]where[R0i]represents the local orientation ofith frame with respect to 0th frame that is the global reference system;[RPTi]is a projection matrix designating the unit vectors along local axes respectively for tolerance zone tilted according to the direction of tolerance analysis;[Win]is a skew-symmetric matrix allowing the representation of the vector among theith andnth frame (end point), defined in Eq. (19);[R0i]⋅[Win]reflects the leverage effect when the small rotations of FE are being multiplied by terms of the Jacobian matrix.(19)[Win]3×3=[0dzin−dyin−dzin0dxindyin−dxin0]wheredzin=dzn−dzi,dyin=dyn−dyi,dxin=dxn−dxi.The SDT model is suitable for tolerance representation while the Jacobian matrix is suitable for tolerance propagation. The unified Jacobian–Torsor model combines the advantages of both methods, the expression of which can be written as follows:(20)[(u¯,u¯)(v¯,v¯)(w¯,w¯)(α¯,α¯)(β¯,β¯)(γ¯,γ¯)]FR=[[J]FE1⋯[J]FEn][[(u¯,u¯)(v¯,v¯)(w¯,w¯)(α¯,α¯)(β¯,β¯)(γ¯,γ¯)]FE1⋮[(u¯,u¯)(v¯,v¯)(w¯,w¯)(α¯,α¯)(β¯,β¯)(γ¯,γ¯)]FEn]where FR represents the functional requirement; (α¯,α¯) is the tolerance interval whereαmust lie in, other vectors follow the same way. The interval arithmetic is incorporated into Eq. (20) to allow tolerance analysis to be performed on a “tolerance zone basis” rather than on a “point basis”.The assembly graph of Fig. 9 with the unified Jacobian–Torsor model is shown in Fig. 12, including two internal FEs and one contact FE. The target feature is the upper face of the bar with diameterd2in part 2. All coordinate frames are in the middle of the tolerance zone or contact zone. The contact pair between part 1 and part 2 is considered as zero because there is no clearance between two contacting planes. With Eq. (20), the final expression of the unified Jacobian–Torsor formulation about the assembly in Fig. 9 is:(21)[(u¯,u¯)(v¯,v¯)(w¯,w¯)(α¯,α¯)(β¯,β¯)(γ¯,γ¯)]FR=[[1000l2−b010−l200001b00000100000010000001]FE1[100000010000001000000100000010000001]FE2][[(0,0)(0,0)(−t1/2,t1/2)(−t11/d1,t11/d1)(−t11/d1,t11/d1)(0,0)]FE1[(0,0)(0,0)(−t2/2,t2/2)(−t11/d2,t11/d2)(−t11/d2,t11/d2)(0,0)]FE2].As can be seen, the orientation tolerance mainly limits the rotational displacements of the upper surface of part 1. We only focus on the value along thezaxis of FR in this paper. The result showswmust lie in the interval of[−((t1+t2)/2+bt11/d1),((t1+t2)/2+bt11/d1)]. It should be pointed out that thebt11/d1of the result is the so called leverage effect caused by the small rotational displacementt11/d1and the offsetb.The statistical method of the unified Jacobian–Torsor model where Monte Carlo simulation is applied has been developed [87–89]. Moreover, the unified Jacobian–Torsor model can also be used for redesign of assembly tolerance where the contribution of each FE can be calculated  [90], and geometrical variations management in a multi-disciplinary environment  [91].The DLM (Direct Linearization Method) proposed by Chase et al.  [49,50] is based on the first order Taylor’s series expansion of the assembly kinematic constraint equations with respect to both the assembly variables and the manufactured variables in assembly. The assembly equations expressed by the vector-loop-based assembly models which use vectors to represent either component dimensions or assembly dimensions take three main sources of variation into account in a mechanical assembly. They are dimensional variations and geometric feature variations which are the results of the natural variations in manufacturing processes, and kinematic variations are small adjustments between mating parts that occurred at assembly due to the dimensional and geometric variations in manufacturing phrase.It is the kinematic variations which result in implicit assembly functions. As shown in Fig. 13, the kinematic variableFdepends on the variablesθ,R,tandH, and the position of contact pointsaandbwhich are called kinematic joints (dashed rectangles). Kinematic joints describe motion constraints at the contact points between mating parts. There are six common joints in 2D assemblies and twelve common joints in 3D assemblies.The vectors in a matrix form are arranged in chains or loops representing the accumulation of variations mentioned above in vector-loop-based assembly models. Firstly, ignoring the geometric tolerances, the assembly constraints with the vector-loop-based assembly models can be expressed as a concatenation of homogeneous transformation matrices:(22)R1⋅T1⋅R2⋅T2⋯Ri⋅Ti⋯Rn⋅Tn⋅Rf=HwhereRiis the rotational transformation matrix between the vectors at nodei;Tiis the translational matrix of vectori;Rfis the final closure rotational transformation matrix with the global DRF;His the resultant matrix which is equal to the identity matrix for a closed loop, or the final gap or clearance and its orientation for an open vector loop.Eq. (22) describes a series of rotations and translations to transform the local coordinates from vector-to-vector until it has traversed the entire vector loop and returned to the starting point. It is important to note that the rotational value ofRiis always relative to the prior vector. It is a positive angle when the rotational direction is same as the prior vector. It is a negative angle, otherwise.Although smaller than dimensional variations, the accumulation and propagation of geometric feature variations are similar to dimensional variations. In the vector-loop-based assembly models, geometric tolerances are considered by placing at the contact point between mating surfaces with zero length vectors having specified variations or tolerances. In other words, the geometric tolerance associated with each joint may result in an independent translational variation or rotational variation or both. It should be pointed out that the effect of feature variations in 3D depends upon the joint types and which joint axis you are looking down. Fig. 14shows the effects of flatness tolerancetat the kinematic jointbof Fig. 13. Fig. 14(a) represents a translational variation in thex–yplane while Fig. 14(b) represents a rotational variation in thex–zplane. There are three variations in all at this joint where another rotational variation around thezaxis is not shown, which implies the DOF of kinematic motions and the DOF of feature variations are mutually exclusive.All the possible combinations of geometric feature tolerances with kinematic joint types in 2D space and 3D space can be seen in  [92].Assuming a geometric feature tolerance is added to jointi, assembly constraint equation (22) can be rewritten as:(23)R1⋅T1⋅R2⋅T2⋯[Rig⋅Tig]⋅Ri⋅Ti⋯Rn⋅Tn⋅Rf=Hwhere[Rig⋅Tig]is the transformation matrix caused by geometric tolerance ofith feature.It is complex to solve Eqs. (22) and (23) because they are nonlinear equations. But the approximate solution with the DLM method is accurate enough for tolerance analysis. The first order Taylor’s series expansion of assembly constraint equations for a closed loop can be written as:(24)ΔHC=A⋅ΔX+B⋅ΔU+F⋅Δα=[0].And for an open loop is:(25)ΔHO=C⋅ΔX+D⋅ΔU+G⋅ΔαwhereΔHCis the vector of clearance variations in a closed loop andΔHOis the vector of assembly variations in an open loop;ΔXis the vector of variations of dimensional variables;ΔUis the vector of variations of assembly variables;Δαis the vector of variations of geometric feature variables;AandCare the first order partial derivatives of the dimensional variables in the closed loop and open loop respectively;BandDare the first order partial derivatives of the assembly variables in the closed loop and open loop respectively;FandGare the first order partial derivatives of the geometric feature variables in the closed loop and open loop respectively.Among Eqs. (24) and (25),ΔUis obtained by solving these two equations. For the closed loop,ΔUis given in Eq. (26) ifBis a full-ranked matrix and in Eq. (27) ifBis a singular matrix.(26)ΔU=−B−1⋅A⋅ΔX−B−1⋅F⋅Δα(27)ΔU=−(BT⋅B)−1⋅BT⋅A⋅ΔX−(BT⋅B)−1⋅BT⋅F⋅Δα.From Eqs. (25) to (27), we can obtain theΔUin the open loop as:(28)ΔU=(C−D⋅B−1⋅A)⋅ΔX+(G−D⋅B−1⋅F)⋅Δα(29)ΔU=(C−D⋅(BT⋅B)−1⋅BT⋅A)⋅ΔX+(G−D⋅(BT⋅B)−1⋅BT⋅F)⋅Δα.Tolerance accumulation of DLM can be estimated with a worst case way and a statistical way, as shown in Eqs. (30) and (31).(30)TW=∑j=1m|Sijd|⋅Tijd+∑j=1n|Sijα|⋅Tijα(31)TS=(∑j=1m|Sijd|⋅Tijd)2+(∑j=1n|Sijα|⋅Tijα)2whereSijdandSijαare sensitivity matrices of dimensional variables and geometric variables respectively, which are the coefficients of theΔXandΔαin Eqs. (26)–(29);mandnare the number of dimensional and geometric variables respectively.Let us continue to take the assembly shown in Fig. 9 as the example to demonstrate the computational process of DLM. That is an open loop where the assembly constraint equations are explicit because no adjustable elements exist. The geometric tolerancet11involves a rotational variableαaround thexaxis in part 1 which is equal tot11/d1. According to Eq. (23), the resultant vector along thezaxis at pointaisl1+l2⋅cos(α)+b⋅sin(α). From Eq. (25), the stack-up variation along thezaxis is±(t1+t2⋅cos(α))/2+(b⋅cos(α)−l2sin(α))⋅α.The second order tolerance analysis (SOTA) method where the second order Taylor’s series expansion of the assembly kinematic constraint equations is taken into account by Monte Carlo simulation has been developed to enhance the accuracy of DLM  [93].Because the derivatives of the assembly function with respect to both the assembly and manufactured variables are more readily from the vector model, the DLM is more computationally efficient over other models for tolerance analysis. Owing to the long-term research by association for the development of computer-aided tolerancing software (ADCATS), DLM has been applied on CATs successfully, such as CETOL 6 Sigma®.So far, we have listed four 3D tolerance analysis methods particularly based on the literature published over the last three decades or so. And a simple example has been used to demonstrate the analysis process of these models. Each of them has its advantages and disadvantages. This section discusses and compares them in detail.The T-Map based on area coordinates cannot only model all 3D variations of a feature, such as size, orientation and form, but also model completely and precisely the interactions of them. It is completely compatible with the ASME/ISO standards for geometric tolerance and suitable for tolerance synthesis. The size and shape of the accumulation map are controlled by the dimensions and shapes of target surfaces in assembly, which gives expression to the connotation of 3D tolerance analysis. However, the Minkowski operation for tolerance propagation is not straightforward and not suitable for computation by hand, and the calculation of clearance for two planar surfaces or the pin-hole assembly has been developed in 1D situation only. In other words, T-Map has not yet been fully developed. A mass of efforts is still needed to study the algorithms of sensitivities of contributors and their percent contributions, as well as the statistical arithmetic. Moreover, the T-Map for axes is four dimensional, which is difficult for illustration in 3D situation. A better method for the visualization of higher dimensional maps is needed.The matrix model uses a displacement matrix to describe the small displacements of a feature within the tolerance zone and the clearance between two features. This model, completed by a set of inequalities defining the bounds of the tolerance zones, reproduces the measurable or non-invariant displacements associated with various types of tolerance. It is very efficient for computation and can be integrated into CAD systems easily. The statistical method for the matrix model has also been developed which brings the constraint relations between the translational displacements and rotational displacements into computation by Monte Carlo simulation. But the analysis objective and constraint objective are points, which lead to different results with respect to different points. The optimization may be difficult when lots of inequalities are obtained. In addition, it is unable to take the form tolerance into account.The unified Jacobian–Torsor model combines the advantages of the torsor model which is suitable for tolerance representation and the Jacobian matrix which is suitable for tolerance propagation. To overcome the limitations and difficulties of point-based approaches, the interval arithmetic is brought into the model to allow tolerance analysis to be performed on a “tolerance zone basis” rather than on a “point basis”. Tolerance analysis of this model is in a kinematic way because of the concept of torsor. It is more suitable for the representation and propagation of clearance in 3D situation. The statistical method and tolerance allocation for this model have also been studied. Nevertheless, the constraint relations between the components of torsor need to be considered to improve the accuracy of results and conform to the tolerancing standards better. As with the matrix model, the unified Jacobian–Torsor model cannot deal with the form tolerance too.The DLM is based on the first order Taylor’s series expansion of the assembly kinematic constraint equations with respect to both the assembly variables and the manufactured variables in an assembly. Three main sources of variations, i.e., dimensional variations and geometric feature variations, as well as kinematic variations, are distinguished and represented by the vector-loop-based assembly models. Although all types of tolerance can be modeled, and the results of statistical case and worst case can be calculated efficiently with the sensitivity matrix, this method heavily depends on the user’s expertise and experience to obtain correct results. More specifically, how to define the joint types and the effects of geometric variations are dependent of user’s choices. Meanwhile, the relationship between the geometric tolerance and the dimensional tolerance needs continuous optimization to coincide with the tolerancing standards better.The difference and comparison between four models with six items are listed in Table 2. The symbol ‘–’ represents unknown or unable to calculate based on the published literature. ‘•’ and ‘□’ represent point-based and surface-based respectively.wandαrepresent the variation of target surface along thezaxis and around thexaxis in the assembly depicted in Fig. 6 respectively.The results of four models corresponding to the assembly shown in Fig. 6 are listed in Table 3where only the condition ofb>(d1−d2)/2is considered. It should be noted that the result of the matrix model is obtained by ignoring the constraint inequalities because the symbolic parameters impede the optimization. Residual gaps between 3D and 2D which ist1+t2are approximated and simplified. As can be seen, the residuals reflect the property of 3D tolerance which takes the structure of assembly and the geometric tolerance into consideration. This is a significant difference of tolerance analysis between 3D and traditional 1/2D methods. The result of T-Map depends on not only the shapes of target surface but also the diameters of bars in the assembly. Because the rotational variation aroused by the orientation tolerancet11is very small, the results of the matrix model and DLM can be approximated and simplified as±((t1+t2)/2+bt11/d1), which is the result of the unified Jacobian–Torsor model.The rotational displacementαcan be obtained by the T-Map model and the unified Jacobian–Torsor model because these two models are surface-based approaches. More specifically, the accumulation maps illustrated in Fig. 7 express both translational and rotational variations of functional surface. Similarly, Eq. (21) of the unified Jacobian–Torsor model includes all of translational and rotational variations of functional surface. However, the result of the matrix model is the variation of pointaon functional surface. The pose of a point in space is described by position rather than orientation. If another point of functional surface is selected as the target objective, the result may be different. So does the DLM. Compared with point-based approaches, the advantages of surface-based models include: (1) the results reflect not only position but also orientation of the analytic objective clearly in 3D space; (2) the variations caused by selection of different points are avoided.

@&#CONCLUSIONS@&#
