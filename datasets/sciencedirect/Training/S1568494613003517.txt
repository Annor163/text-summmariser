@&#MAIN-TITLE@&#
An ant colony algorithm for the multi-compartment vehicle routing problem

@&#HIGHLIGHTS@&#
Ant Colony System is used to solve benchmark capacitated vehicle routing problems efficiently.Pre-processing by k-means clustering can greatly reduce computation time, and produces improved routings when the network nodes form aggregations.The ACS algorithm is extended to model multi-compartment CVRPs where the nodal demands are split among different categories of product, and the collection vehicle has separate compartments for each category.The extended algorithm has produced high-quality solutions for test problems involving two compartments.The program can be used to optimize routes for recycling waste collection from households using multi-compartment trucks and kerbside sorting.

@&#KEYPHRASES@&#
Ant colony optimization,Capacitated vehicle routing problem,Clustering,Multi-compartment vehicles,Waste collection,

@&#ABSTRACT@&#
We demonstrate the use of Ant Colony System (ACS) to solve the capacitated vehicle routing problem associated with collection of recycling waste from households, treated as nodes in a spatial network. For networks where the nodes are concentrated in separate clusters, the use of k-means clustering can greatly improve the efficiency of the solution. The ACS algorithm is extended to model the use of multi-compartment vehicles with kerbside sorting of waste into separate compartments for glass, paper, etc. The algorithm produces high-quality solutions for two-compartment test problems.

@&#INTRODUCTION@&#
Vehicle routing problems (VRPs) are an extension of the classic travelling salesman problem (TSP), in which one or more vehicles travel around a network, leaving from and returning to a depot node. Customers are located on the network and each customer must be visited by exactly one vehicle. Customers are usually located at network nodes (although in arc routing problems they are distributed along arcs of the network). The object is to find the vehicle routing(s) of minimum cost, e.g. to minimise the total route length.An important type of VRP for practical application is the capacitated vehicle routing problem (CVRP). In this, there is a demand associated with each customer, representing an amount of goods which must be collected (or delivered). Each vehicle has a capacity which cannot be exceeded, and when the vehicle is full (or empty) it returns to the depot. There are many variants of CVRP with additional constraints, for example CVRPTW in which each customer may have a time window during which a visit must be scheduled. A survey of such variants is given in [1]. The study of CVRPs has become of increasing practical importance as distribution networks become more complex, and with the growth of online shopping, leading to a recent resurgence of research interest [2].In this paper we consider a basic CVRP applied to the collection of domestic waste for recycling. Waste collection is becoming an increasingly complicated task for municipal authorities, and growing environmental concerns are gradually changing the orientation of solid waste management. In the UK, recyclable waste generated by households is organised by local authorities (LAs, for example District Councils), either with their own vehicles or contracted to private companies. Each LA decides on the nature and level of service it will provide, taking into account social and economic factors under the headings of collection, transportation and disposal [3,4]. Reports have shown that logistics costs represent up to 95% of the total cost of recycling [5], so the importance of devising the most cost-efficient routes using the minimum number of vehicles is crucial. A new factor motivating research in this area is the imposition of large fines for missing government-set recycling targets.Once a waste collection vehicle is full to capacity, it must move to a waste disposal site (commonly referred to as a tip) to unload. Frequently the tip is at the same location as the vehicle depot, but it may be located at a different node in the network. At the tip, the waste is sorted into its constituent types (paper, glass, etc.) which are disposed of or recycled in different processes.A recent development is the introduction of multi-compartment stillage trucks for domestic waste collection. These vehicles typically have four separate compartments, so that glass can be stored separately from paper, for example. The vehicle crew must perform kerbside sorting of the waste in customers’ recycling boxes, and this slows up the collection process. This disadvantage is hopefully outweighed by the improvement in quantity and quality of the recyclable material produced. The pros and cons of kerbside sorting as against commingled collection in single-compartment vehicles, are discussed in [5–7].Standard OR techniques of dynamic programming, or branch and cut, can be used to produce exact solutions for only small CVRP problems; as of 2007, the largest problem to be solved exactly had 135 nodes [8]. Starting with the algorithm of Clarke and Wright in 1964, several heuristics have been proposed, which construct tours and/or improve existing tours [9]. In particular we mention the improvement of a completed sub-tour (from the depot through some or all nodes and returning to the depot) by r-optimal methods [10]; the 2-opt algorithm tests whether a tour length can be shortened by crossing two of its non-adjacent arcs, i.e. by replacing arcs (a, b) and (c, d) by (a, c) and (b, d). Constructive heuristic methods are tailored for specific problems, which restricts their use in wider applications. This has led to the development of more versatile metaheuristics, which offer global search strategies for exploring the solution space. Metaheuristics which have been applied to the VRP include tabu search [11,12] and simulated annealing [13]. More recently, soft computing techniques have proved successful in solving CVRP instances. Thangiah [14] used genetic algorithms in conjunction with these two metaheuristics in 1999, and since 2003 several papers [15–20] have extended the use of genetic algorithms for the VRP, including with time windows. Khouadjia et al. [21] have used particle swarm optimisation and variable neighbourhood search for a dynamic VRP. Adaptive Large Neighbourhood Search [8] uses a variety of heuristic algorithms (chosen by roulette wheel selection) to destroy and then repair solutions, and has been shown to solve a range of VRP variants, including CVRP, CVRPTW and multi-depot CVRP.Perhaps the most successful soft computing approach for the TSP and related problems such as job shop scheduling and quadratic assignment, is ant colony optimization (ACO). The details are given in the next section, but essentially the algorithm as applied to the VRP is as follows. At the start of each iteration, ants (autonomous agents) are placed at random nodes of the network, ready to construct tours; their initial tour length is the distance from the depot to their starting node. They maintain a tabu list to avoid returning to already-visited nodes, and decide their next move stochastically, with probabilities based on the amount of pheromone present on the possible arcs. Once all ants have completed their tours they return to the depot node. They then update the pheromone levels on the arcs they visited (local updating), and the levels on the arcs in the tour with the shortest total length are further increased (global updating). Over a large number of iterations, the pheromone levels encourage ants to use high-quality paths through the network, resulting in shorter-length tours being discovered. The original algorithm is known as Ant System (AS), and a later, more successful variant is called Ant Colony System (ACS); both are described in Dorigo and Stützle's book [22].Mazzeo and Loiseau [23] used the ACS to solve some benchmark CVRP problems, and report good performance in comparison with some of the methods described above. Karadimas et al. [24,25] applied an ACO algorithm to the problem of urban solid waste collection, although they avoided the need to include capacity constraints in the ACO by first breaking the network into a set of sub-areas, each of which could be serviced by a single vehicle without unloading, an approach also followed in [26]. ACO was also applied to urban waste collection in [27], although they model the problem as a capacitated arc routing problem (CARP) extended to comply with traffic rules. They apply two versions of the ACO: the Ant System, and a populational AS in which only a subset of elite solutions update the pheromone trails. They highlight the benefits of integrating these methods with decision support systems to aid planners in their decisions. Rizzoli et al. [28] describe a commercial ACO package and its performance on a number of real-world freight distribution problems, including dynamic handling of orders. ACO algorithms for the VRP have been hybridized with scatter search [29], with genetic algorithms [32], and with savings algorithms and problem decomposition [30,31].The multi-compartment VRP (MCVRP) was identified already in 1979 as a variant of VRP which had practical significance; Christofides et al. [9] give as examples a delivery vehicle which has refrigerated and non-refrigerated compartments for foodstuffs, and a tanker which distributes different types of petroleum products. The problem has not however attracted the attention of researchers until recently. There have been heuristic approaches to the petroleum distribution problem in [33,34], and the food distribution problem in [35], the latter using Lagrangean relaxation. In 2008 El Fallahi et al. [36] tackled a distribution problem in which a depot stocks m different products which must be delivered to customers by a fleet of identical vehicles, each with m compartments of limited capacities. Unlike in the multi-compartment waste collection problem, it is permitted for different vehicles to deliver different products to the same customer. The paper demonstrates a memetic algorithm (a genetic algorithm hybridised with a local search procedure) and a tabu search procedure for the MCVRP. Most recently, in 2010 Muyldermans and Pang [38] addressed the MCVRP applied to distribution. Their heuristic started by constructing the Clarke and Wright solution, and used 2-opt for improvement, coupled with guided local search. They used this algorithm to compare the costs of MC-collection against commingled collection.The two main phases of the ACO algorithm are the ants’ route construction and the pheromone update. In the tour construction phase, M ants concurrently build tours beginning from starting nodes randomly chosen in the network of N customer nodes (plus the depot node). At each construction step, ant k currently at node i applies a probabilistic random proportional rule to decide which node to go to next. It selects the move to expand its tour by taking into account the following two values:•The heuristic function ηijwhich represents the attractiveness of the move, usually calculated as the inverse of the distance/cost on the arc from node i to node j.The level of pheromone on the arc (i, j), denoted τij, which indicates how useful it has been in the past to traverse this particular arc.Given these parameters, the probability with which the ant chooses to go to node n next is(1)pink=(τin)α(ηin)β∑l∈Nik(τil)α(ηil)βif noden∈Nik, andpink=0otherwise. Here,Nikis the feasible neighbourhood (i.e. the nodes which are directly accessible from node i and not previously visited), and α and β are heuristic parameters. Each ant maintains a memory (a tabu list) of the nodes already visited. Once all ants have completed a tour, the pheromone trails are updated. This is done by first lowering the pheromone levels on all arcs (to represent evaporation and in order to progressively forget bad solutions and encourage exploration of new arcs) and then adding pheromone to the arcs that have been traversed.The Ant Colony System improves on the ACO in the following main aspects:•Route construction: During tour construction, ant k, located at node i, moves to node n chosen according to the following pseudorandom proportional rule. A random variable q uniformly distributed over [0, 1] is evaluated, and if q>q0 the node n is chosen according to the standard ACO rule (1), using α=1. Otherwise, choose n by(2)n=arg maxj∈Nik{(τij)(ηij)β}.So, with probability q0, the ant makes the best move described by the pheromone trails and heuristic information (exploiting the learned knowledge), while with probability (1−q0) it performs a biased exploration of the arcs.Pheromone update: The ACS method uses two types of pheromone updates: global and local. The local update is performed every time an ant traverses an arc (i, j) and the pheromone is modified as follows:(3)τij←(1−ξ)τij+ξτ0where 0<ξ<1 and τ0 is the initial pheromone value defined asτ0=(NLnn)−1where Lnnis the length of the nearest neighbour tour (a tour in which each move is to the nearest unvisited node; this is used as a baseline tour length). The global update, however, is only carried out by the ant that produced the best tour so far and is implemented by the following equation for each arc of the tour:(4)τij←(1−ρ)τij+ρΔτijbs,∀(i,j)∈TbswhereΔτijbs=(Lbs)−1, ρ is a parameter governing decay and Tbsis the best found tour so far with Lbsits length. This enables the algorithm to converge faster by directly concentrating the search around the best tour.We have extended the ACS algorithm by allowing each ant to keep a record of the amount of waste collected during its tour, and forcing a return to the depot for unloading whenever it is unable to proceed to a new node without exceeding its vehicle capacity V. This idea is relatively unexplored; most reports in the literature tackle the CVRP by implementing an heuristic savings algorithm, which combines customers into tours following a greedy strategy [30,37]. An ACO algorithm with a path scanning heuristic involving vehicle capacity was described in [27], solving a CARP for waste collection in an urban environment.A matrix tour records the nodes visited by each ant, including the depot node for unloading. Our program uses an additional input vectorv(N)giving the amount of waste or ‘demand’vito be collected at node i, and so within the ants’ memory structure, we include a matrix load recording the vehicle load volume at each step of each ant's tour.Let the graph involve N nodes where waste is to be collected, together with the depot as node 0. The depot node has zero waste demand, and is not included in the path node selection algorithm in Section 3. It is directly accessible from all nodes. While it is common to use 10 ants, we have used N ants, placed randomly at each node initially, because of the increased complexity of the route to be constructed. The tour matrix is expanded to allow space in the tour for all the collection nodes plus the required number of unloading trips mtip to the depot node. The latter is estimated by dividing the total demand by the vehicle capacity and rounding up to the next largest integer. This is valid provided each pair of nodes is connected by an arc of finite length. We have worked with volume demand and capacity, although weight collected could easily be included as an alternative or additional calculation. The first column of the matrix load storing the waste volume collected by each ant, is initialised as the demand at the ant's starting node.As an ant moves from node to node, the volume of waste collected by it is updated in successive columns of load. The ant selects a new node to move to using (1) or (2), from among the feasible nodes (unvisited and directly accessible) for which collection from that node will not exceed the vehicle capacity. If no collection nodes can be chosen without exceeding capacity, the ant moves instead to the depot node to unload. In this case the ant's waste volume in load is set to zero.To resume its tour from the depot node, the ant selects at random an unvisited node to move to; this was found to be better than selecting the nearest unvisited node, or the furthest. When all nodes have been visited the ant makes a final move to the depot node to unload. Each ant's tour is then improved by applying the 2-opt algorithm separately to each sub-tour (i.e. each loop from the depot and back to unload), and the resulting total tour length calculated. Note that a tour consisting of K sub-tours can equivalently be considered as a solution with K vehicles each making a simple tour loop from the depot and back. Pheromone updating is not performed on arcs to or from the depot node.The algorithm pseudocode is summarised as follows:Algorithm 4.1INPUT N (no. of nodes), M (no. of ants), miter (no. of iterations)INPUT parameters α, β, q0, ρ, ξINPUT coordinates of nodes 1 to N and of depot node 0Form matrix of arc lengths dist(N, N) including node 0, and of heuristic function η(N, N)5:INPUT vector of nodal demandsv(N)and vehicle capacity Vmtip= ceiling(Σvi/V){no. of unloading trips required}mstep=N+mtip {tour length (without depot at start and end)}Calculate τ0 as in (3) and initialise pheromone matrix τ(N, N)Store values ofτijηijβin separate matrix choice(N, N) {to avoid repeated recalculation in (2)}10:Zero tour(M, mstep) {each ant's tour of nodes}Zero load(M, mstep) {vehicle load at each step of each ant's tour}Allocate ants randomly to starting nodes: ant k starts at node start(k)foriter=1 to miterdo {iteration loop}Initialise tabu list {nodes visited so far by ant k}15:fork=1 to Mdo {loop over ants}i=start(k) {ant starts its tour by moving from depot to node i}Add node i to tabu list for ant ktour(k, 1)=iload(k,1)=v(i)20:end forforistep=1 to mstepdo {loop over each step of tour}ifistep<mstepthen {tour not yet completed}fork=1 to Mdo {loop over each ant}i=tour(k, istep) {ant k currently at node i}25:Select next node n in tour as follows:ifi=0 then {ant is at depot node}Select n at random from feasible nodeselseChoose random variable q∈[0, 1]30:Compile list of feasible nodes which can be visited without exceeding vehicle capacity, i.e. nodes j for whichload(k,istep)+v(j)<VifNikis empty thenn=0 {return to depot to unload}else ifq>q0then {use equation (1)}Calculate probabilities pijfor these nodes35:Choose n by roulette wheel selectionelse {use equation (2)}Choose node n which has the maximum value of choice(i, j)end ifend if40:tour(k, istep+1)=nifn=0 thenload(k, istep+1)=0 {vehicle has unloaded}elseload(k,istep+1)=load(k,istep)+v(n)45:Add node n to tabu list for ant kend ifLocal pheromone updating using (3)end forend if50:end forAdd depot node to start and (if necessary) end of each ant's tourApply 2-opt improvement to each sub-tour (from depot and back to depot) of each tourFind length of each tour using tour and distRecord shortest tour and apply global pheromone updating (4)55:Update best tour found so farend forPRINT best tourRETURNFor networks in which the nodes naturally form clusters (corresponding to centres of population), performance can be improved by first clustering the nodes, and then applying the ACS to each cluster in turn. We first determine the number of clusters by dividing the total demand by vehicle capacity and rounding up, as in Section 4.1. When there are additional constraints, a more sophisticated calculation uses an integer linear programming (ILP) formulation. This model assumes a fixed number K of vehicles, and so the algorithm is run repeatedly with increasing values of K until a feasible solution is found. For the cost function we use the total time spent by vehicles on unloading trips to the depot. This model is based on the linear programming (LP) models of [39]; further details including the constraints used are in [40]. In a solution the program will output the number of unloading trips to be made, and the number of households to be serviced, by each vehicle.For the clustering we employed the in-built k-means clustering algorithm within MATLAB. This uses the geographical coordinates of the nodes, iteratively allocating nodes to the cluster whose centroid is closest to that node, but does not take into account the nodal demands. We therefore need to adjust the clusters in order to balance the total load of each cluster, so that each cluster can be serviced by a single vehicle, making unloading trips when necessary. The load-balancing algorithm first sums the total demand in each cluster, calculates the average demand per cluster, and identifies the clusters with excess demand. It then tries to move an outlying node of the cluster with greatest excess demand to a neighbouring cluster, so that the total excess demand of the network is reduced. Once a node has been moved, the algorithm recalculates the centroids and cluster demands, and iterates as in the k-means algorithm. If load balancing cannot be achieved such that the total demand of each cluster does not exceed the vehicle capacity, the whole algorithm is restarted with the number of clusters increased by 1.The final clustering information was fed into the ACS algorithm, which was run separately on each cluster. As will be seen in the next Section, the solution of several smaller ACS problems rather than a single large problem results in a much reduced processing time.We now seek to use ant colony optimisation to route a multi-compartment vehicle as described in Section 1. It is straightforward to further extend the ACS algorithm described at the start of this section, by replacing the matrix load recording the waste collected by each ant, with a 3D array recording the waste volume collected in each compartment for each ant at each step of its tour. The capacities of each compartment are specified, and the demands at each node are split by waste category, e.g. glass, paper, plastic and metal. The programming principles are as described above, with each compartment load being updated as the ant moves from node to node. When it is unable to make a further move without one or more compartments becoming overfull, it returns to the depot where all compartments are unloaded, i.e. reset to zero. The required number of unloading trips is predicted by calculating mtip as in Section 4.1 for each compartment separately, and the maximum of these is used in allocating array space. However this may now be an underestimate, if the unloading trips are driven by one type of waste in one part of the network, and by another type elsewhere. Allowance should thus be made for longer tours being necessary (this is also the case for single-compartment problems where travel is not permitted on some arcs).The algorithm has the following modifications to Algorithm 4.1:•Line 1: Also input L (no. of waste compartments on vehicle)Line 5: INPUT matrix of nodal demandsv(N,L)and compartment capacities V(L)Line 6: mtip is maximum over l ofceiling(Σvil)/VlLine 10: Zero load(M, mstep, L)Line 19:load(k,1,l)=v(i,l)for l=1 to LLine 30: Nodes must satisfyload(k,istep,l)+v(j,l)<V(l)for l=1 to LLine 42: load(k, istep+1, l)=0 for l=1 to LLine 44:load(k,istep+1,l)=load(k,istep,l)+v(n,l)for l=1 to LWhile this extension to multiple compartments is straightforward, it is an open question whether the ACS algorithm will perform acceptably, or indeed converge at all. The experiments in the next section seek to answer this.The ACS and clustering algorithms described in the previous section were programmed in MATLAB as part of successive MSc projects [40,41]. The basic ACS was first tested on a selection of the freely available TSP examples at TSPLIB (http://comopt.ifi.uni-heidelberg.de/software/TSPLIB95) and in all cases produced the optimal solution, although in the larger examples (of over 500 nodes) required large numbers of iterations to do so.The VRP is an NP-hard problem. As an illustration of this, Reimann et al. report [31] that while their ants algorithm could find the best known solution (BKS) of a 50-node VRP problem in under 3s, for a problem with 199 nodes it took up to 40min to obtain a solution within 2% of the BKS. Given this situation, and due to the time and resource limitations of the projects, the experimentation performed has the limited aim of demonstrating proof of concept: that ACS with 2-opt improvement and incorporating unloading trips can produce good solutions of small and medium-size single- and multi-compartment CVRP problems in a short time. We also want to examine the potential of clustering to improve solutions. We note that in a real-world application the priority is to produce a good-quality – even if sub-optimal – solution quickly, and that any computer-generated solution will anyway be reviewed and adjusted manually by schedulers [39].There is a set of 14 CVRP problems, collected by Christofides [9] which are widely used in the literature as benchmarks. Data files are available online at: http://www.rhsmith.umd.edu/faculty/bgolden/Christofides_benchmarks.zip.The data set for each problem consists of:•nodal coordinates {(xi, yi), i=1, N}depot coordinates (x0, y0)nodal demands{vi,i=1,N}vehicle capacity V.Description of problems: Problems C1, C2, C3 contain 50, 75, 100 nodes respectively, which are located randomly within the square 0<x, y<100. Each pair of nodes is connected by an arc of length given by the Euclidean distance between them. Nodal demands are distributed randomly in the range0<vi<50. For C1/C2/C3 the total demands are 777/1364/1458, and the vehicle capacities 160/140/200, meaning that the solutions should involve 5/10/8 unloading trips respectively. In the last two problems C11/C12 the dimension is 120/100, with the nodes generally located in well-defined clusters. Further description is given in Section 5.3.Published solutions: Problems C1–C3 were solved in the 1960s by two methods – the first using the Clarke and Wright savings algorithm and the other using 3-opt improvement. The best solutions (shortest total tour length) are reported in [9] and are given here as the upper and middle values in the cells of column 2 of Table 1. In 1993 improved solutions for the Christofides benchmarks were found by Taillard [11] using a parallel Tabu Search method, and these are still the best known solutions. These are the lower values in column 2 (also for C11 and C12).Parameters used: In all runs the ACS heuristic parameters were set as: α=1, β=2, q0=0.9, ξ=ρ=0.1, as recommended in [22,42].We used M=N ants, i.e. one ant is placed at each node of the network. We set a maximum of 2000 iterations because of the project limitations; the consequences of this choice are discussed below. For each problem, ten runs of the program were performed, and we summarise the results in columns 3 and 4 of Table 1. The best, average and worst tour lengths obtained are in the centre, top left and bottom left of each cell. The CPU time taken (elapsed seconds, using the MATLAB function) is in the bottom right, and in the top right of the cell is the number of sub-tours in the best solution.The 50-node problem C1 was solved extremely well by the ACS algorithm. As can be seen in Table 1, one run produced the best known solution (BKS) with optimal tour length 524.61 (Fig. 1), and did so within 700 iterations. Even the worst solution found after 2000 iterations was within 4.1% of the BKS length.When the algorithm was run without 2-opt improvement, the resulting solution lengths for problem C1 were in the range 573.21–620.06 (10 runs, 2000 iterations), but even then, in the best solution found, only one node was allocated to the wrong sub-tour, and all but one sub-tour was correctly constructed (graphs in [41] Appendix G).On the larger problems, the algorithm performance worsened: for C2 (75 nodes) the best solution (877.75) was 5.1% away from the BKS, although comparable to the best reported using a 3-opt algorithm. For C3 (100 nodes) the best solution (919.67) was 11.3% from the BKS after 2000 iterations. Given the excellent performance on C1 and the scale-up experience of Reimann quoted above, we conclude that this degradation with problem size is due to the NP-hard nature of the CVRP problem, rather than any fault with the algorithm itself.Not unsurprisingly, use of the clustering algorithm on these unstructured networks resulted in much poorer results (column 4 of Table 1). On problem C1 the clustering algorithm did identify three sub-tours reasonably correctly. However on this and C2 the load-balancing algorithm forced the creation of an extra cluster. However, the fact that several small single-subtour problems were being solved by ACS separately, did result in much shorter run times (18–39s, compared to 139–711s without clustering) for the same number of iterations.Problem C12 has 100 nodes grouped in ten well-defined clusters, well-separated from the centrally-placed depot node (Fig. 2). Each cluster is serviceable in a single sub-tour. The standard ACS algorithm is much slower in converging to a solution as compared to the same-size unstructured network C3: best solution (1147.20) is 40% away from BKS compared to 11.3% for C3 after 2000 iterations. However, when the k-means clustering algorithm is used (last cell of column 4 of Table 1) the performance is much better than for C3 (862.03 is 5.2% from BKS). In the graph of this solution (Fig. 3) only one inter-cluster arc is included, and this arises because the cluster “at 5 o’clock” has a total demand exactly equal to the vehicle capacity, so one or more nodes have been moved by the load-balancing algorithm. The solution was found about 30 times faster than in the algorithm without clustering.Problem C11 is larger (120 nodes) and the clustering is less clear-cut. There are five well-defined outlying clusters, with the remaining nodes closely surrounding the depot node located at one edge of the region (graph is in [41] Appendix G). This means that the clustering algorithm needs to add some of the surrounding nodes to each outlying cluster, and then form the remaining clusters from an unstructured data-set. Despite this, performance using clustering is still good (1136.69 is 9.1% from BKS). A more sophisticated decomposition algorithm, as in [31], would be needed in this situation.To test the ACS algorithm for multi-compartment vehicles, we have constructed a pair of two-compartment problems from problem C1. The vehicle capacity of V=160 units is split into a larger compartment of V1=120 units and a smaller one of V2=40 units; let us say that these are collecting glass and paper respectively. For simplicity we assume both compartments are unloaded at the depot. The demandsviat each node have also been split into glassvi1and papervi2. Clearly, if these nodal demands were all in the ratio 3:1 the compartments would fill up at the same rate and the algorithm should perform as in the single-compartment case. In Problem C1A we have used this demand ratio at all nodes except for those in the lower left corner of the region (nodes with both coordinates in Fig. 1 in the range 0<x, y<35). In this region the demands are split in the ratio 2:1. As there is greater demand for paper collection in this corner region, meaning that this vehicle compartment will fill up faster, we hope to see shorter sub-tours appearing there, while the sub-tours in the rest of the graph should resemble those for the optimal single compartment case (Fig. 1).In Problem C1B we have again used the ratio 2:1 for nodes in the lower left corner, but a ratio 4:1 for the split at the remaining nodes. Now we hope to see the paper compartment filling first and triggering an unloading trip for sub-tours in the corner, while the glass compartment will fill first on the other sub-tours.The ACS program was run ten times on each problem, again allowing 2000 iterations, and the best results found for problems C1A and C1B are shown in Figs. 4 and 5respectively. The total tour lengths were 560.74 and 564.04, which are within 7.5% of the optimal 524.61 for the single compartment problem, despite the increased constraints which have led to an additional sub-tour being required to service all nodes. In both cases the extra final sub-tour involves just two nodes, but these are nodes very close to the depot, so that the extra routing is minimised. Comparing Fig. 4 with Fig. 1, we do indeed see that the sub-tours away from the lower left corner in problem C1A closely resemble the optimal single compartment solution. Table 2shows the progress of the filling of the two compartments in problem C1B for each sub-tour (starting empty from, and ending with unloading at, the depot at node 51). In the second and fifth sub-tours the smaller compartment has filled first, while in the first, third and fourth sub-tours it is the larger compartment which triggers the unloading. In all cases except for the final sub-tour, the critical compartment is almost completely full before returning to unload. This demonstrates the efficiency of the solution.In terms of convergence, the algorithm performs just as efficiently as for the single compartment problem, with the final tour length being about 70% of the initial length, and graphs of tour length against iteration number (not shown here) looking very similar, with the best solution reached after 500–800 of the permitted 2000 iterations. More detailed results are given in [41].

@&#CONCLUSIONS@&#
While the ACS algorithms’ performance for the larger problems would have been improved by allowing a larger number of iterations, and by tuning the ACS parameters, the results from this simple feasibility study are sufficient to demonstrate the effectiveness of the method. The Ant Colony System incorporating unloading trips is competitive with other metaheuristics for the Capacitated Vehicle Routing Problem, and more significantly, an extension is able to solve multi-compartment problems with equal efficiency. The MCVRP solutions produced match the sub-tours of the best known solution in regions where the compartmentalisation has less effect, and produce efficient sub-tours (i.e. only unloading when the critical compartment is almost full) in all regions. Moreover, the rate of convergence is the same as with the single-compartment data. Further improvement could be made by including other constructive heuristics such as the Clarke and Wright algorithm.As local authorities and private recycling companies increasingly purchase fleets of multi-compartment vehicles for kerbside sorting, the multi-compartment CVRP will grow in importance. There is an immediate need for further studies of this problem, including the development of benchmark problems and the use of alternative metaheuristics.While the clustering algorithm has improved solutions and run times for structured problems, a more sophisticated algorithm needs to be developed, which integrates the nodal demands within the clustering process, and which is itself hybridised with the ACO solution process.Practical extensions of the simple two-compartment model considered here include the use of more compartments, and the location of the depot site separately from the vehicle depot (and possibly separate disposal sites for the different waste categories). Sensitivity analyses are also important, as the amounts of waste in the recycling boxes set out by households cannot be accurately predicted, and will vary from one week to the next.