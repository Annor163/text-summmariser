@&#MAIN-TITLE@&#
A Machine-to-Machine protocol benchmark for eHealth applications – Use case: Respiratory rehabilitation

@&#HIGHLIGHTS@&#
The software tool presented allows the deployment of different benchmarking tests for M2M protocols.The most relevant M2M protocols were evaluated considering different specific performance metrics.Benchmark results allowed to select the most suitable M2M protocol a clinical case of use: respiratory rehabilitation.

@&#KEYPHRASES@&#
Respiratory rehabilitation,IoT,M2M,Publish/subscribe,eHealth,Benchmark,

@&#ABSTRACT@&#
BackgroundM2M (Machine-to-Machine) communications represent one of the main pillars of the new paradigm of the Internet of Things (IoT), and is making possible new opportunities for the eHealth business. Nevertheless, the large number of M2M protocols currently available hinders the election of a suitable solution that satisfies the requirements that can demand eHealth applications.ObjectivesIn the first place, to develop a tool that provides a benchmarking analysis in order to objectively select among the most relevant M2M protocols for eHealth solutions. In the second place, to validate the tool with a particular use case: the respiratory rehabilitation.MethodsA software tool, called Distributed Computing Framework (DFC), has been designed and developed to execute the benchmarking tests and facilitate the deployment in environments with a large number of machines, with independence of the protocol and performance metrics selected.ResultsDDS, MQTT, CoAP, JMS, AMQP and XMPP protocols were evaluated considering different specific performance metrics, including CPU usage, memory usage, bandwidth consumption, latency and jitter. The results obtained allowed to validate a case of use: respiratory rehabilitation of chronic obstructive pulmonary disease (COPD) patients in two scenarios with different types of requirement: Home-Based and Ambulatory.ConclusionsThe results of the benchmark comparison can guide eHealth developers in the choice of M2M technologies. In this regard, the framework presented is a simple and powerful tool for the deployment of benchmark tests under specific environments and conditions.

@&#INTRODUCTION@&#
Advances in Information and Communication Technologies (ICT) have become an indispensable tool in most sectors of modern society, including healthcare [1]. These technological progresses are transforming the traditional healthcare landscape through a better optimization of the available resources and a more efficient administrative and clinical management. In response to these new opportunities the concept of eHealth emerges [2], which is presented as an alternative to traditional telemedicine systems where the patient was considered as a passive element in the healthcare practice [3]. In this sense, the eHealth concept comprises not only the care of the patient, but also includes the citizen her/himself, who is more responsible for and involved in her/his treatment and healthcare [4]. Furthermore, the concept of citizen empowerment is part of this new health ecosystem, extending the care process, which has traditionally been located exclusively in hospital facilities [5], toward a scenario of ubiquitous computing [6].In this context, the paradigm of IoT (Internet of Things) [7,8], “promises to create a world where all the objects around us are connected to the Internet and communicate with each other with minimum human intervention” (sic). IoT is also defined as the interconnection of communications devices using a variety of devices and communication Machine to Machine (M2M) protocols [9]. However, despite some remarkable interoperability efforts [10], there is currently a lack of standardization [11], although some recent initiatives have already headed in that direction [12]. In the meantime, given the extensive fragmentation of M2M technologies for IoT purposes [13], different papers have addressed comparative analysis from several perspectives [14] – architectures, standards, media access interfaces –, whilst others are focused on light communication protocols for portable and embedded devices [15–17]. In [18], a comparison between the generic architectural models of request/reply and publish/subscribe is presented, and it is shown the optimal performance of the latter. Besides, under the premise of providing the best quality of service (QoS), the M2M publisher/subscriber model stands out showing significant advantages in terms of latency [19] and energy [20]. This way, different communication protocols have emerged in the last years that implement the publish/subscribe pattern and that are specifically designed for IoT [21]. However, most of these comparative studies are preliminary [14], focusing in most cases in only two specific protocols that are tested with few hosts, which is far away from a real massive device-connected scenario like the IoT [22]. To this end, recent studies [5,14,23] highlight the current need of more extensive benchmarking and performance analysis from realistic working conditions. In particular, and to the best of the authors’ knowledge, there are no studies that address the specific requirements demanded by eHealth environments.In order to address the above needs, the present paper describes a benchmarking of a variety of M2M protocols oriented to IoT communication based on the publish/subscribe pattern. Taking into account the level of thoroughness that implies comparing different technologies not interoperable with each other in the same conditions, as well as the existing variety of features and configurations, it was necessary to implement in the first place a software tool, referred to as Distributed Computing Framework (DCF), in order to implement the different benchmarking tests. The flexibility, modular design and ease of use of DCF allow to obtain in real-time the most relevant performance metrics whilst hiding to the users the complexity of the different communication technologies and topologies evaluated. Thus, the results obtained can serve as a general guide to help developers of eHealth solutions for the selection of M2M protocols based on the publish/subscribe model, according to their particular needs. For this purpose, it is presented as case of use an eHealth platform aimed at the supervised monitoring of a training program for respiratory rehabilitation (RR) of COPD patients (from now on called e-RR platform), which has been developed in the context of several a R&D project being carried out by the authors [24]. The platform encompasses many of the M2M challenges detailed as it requires the real-time communication of the data gathered by sensing devices attached to patients when performing their training routines indoor and in mobility. In both training cases, ambulatory and home-based, the supervised RR program is similar, and mainly consists in the development of moderate-intensity aerobic physical activity (PA) (SPWT, 6MWT test [25,26]) that can be assessed through the monitoring of heart rate and blood oxygen saturation [27], as well as caloric consumption [28]. Finally, it is also relevant to add contextual information for home-based training: for instance, patient's location is vital regarding the occurrence of episodes of panic attacks and dyspnea, which are common in COPD [29].The paper is divided into the following sections: Section 2.1 describes the framework developed for the implementation of the benchmarking, Section 2.2 presents an analysis of the technologies chosen for the development of the performance testing and a methodological description of the benchmarking itself is presented in Section 2.3. Then, in Section 3.1 the use case of the e-RR platform is presented for the two scenarios considered, which demand different technological needs. In Section 3.2, the results of the benchmarking are presented for the most important performance metrics. Considering the results obtained and the requirements for scenarios of the case of use presented, Section 3.3 chooses the M2M protocols more suitable for each situation and the data model is presented hierarchically following good practices in the use of the communication technologies used. Finally, the discussion and conclusions analyze the results obtained by breaking down each protocol in terms of its strengths and weaknesses.

@&#CONCLUSIONS@&#
This paper presents a comparative study of different M2M protocols in terms of several performance metrics. For the execution of tests, it was designed and developed a Distributed Computing Framework based on master–slave communication architecture that supports the deployment of the benchmark. The Framework stands out for its flexibility, modular design, and ease of use, which makes it an excellent tool to aid developers to choose among M2M protocols for eHealth solutions. The results obtained were validated by means of a particular case of use: the respiratory rehabilitation of COPD patients to be performed in two scenarios with different types of requirements, which are tackled by an eHealth platform developed by the authors. In the first place, the specific challenges of the Ambulatory scenario include mainly real-time communication, reliability and platform scalability. These requirements are met thanks to the features of DDS in terms of its data-centric approach, predictability of information delivery and real-time QoS policies. On the other hand, the characteristics of mobility of the Home-Based scenario are best satisfied by MQTT, a light-weight and low latency transport protocol with a wider range of implementations for mobile platforms. With respect to security, which is a key requirement for any eHealth implementation, DDS and MQTT implementations support features to ensure confidentiality and privacy of the data exchanged for both scenarios.