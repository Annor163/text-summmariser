@&#MAIN-TITLE@&#
The multi-compartment vehicle routing problem with flexible compartment sizes

@&#HIGHLIGHTS@&#
The paper deals with a new variant of the multi-compartment vehicle routing problem.A mathematical model for this problem is formulated.A variable neighborhood search algorithm to solve this problem is proposed.Extensive numerical experiments based on randomly-generated instances and instances from practice were conducted.

@&#KEYPHRASES@&#
Vehicle routing,Multiple compartments,Glass waste collection,Variable neighborhood search,Heuristics,

@&#ABSTRACT@&#
In this paper, a capacitated vehicle routing problem is discussed which occurs in the context of glass waste collection. Supplies of several different product types (glass of different colors) are available at customer locations. The supplies have to be picked up at their locations and moved to a central depot at minimum cost. Different product types may be transported on the same vehicle, however, while being transported they must not be mixed. Technically this is enabled by a specific device, which allows for separating the capacity of each vehicle individually into a limited number of compartments where each compartment can accommodate one or several supplies of the same product type. For this problem, a model formulation and a variable neighborhood search algorithm for its solution are presented. The performance of the proposed heuristic is evaluated by means of extensive numerical experiments. Furthermore, the economic benefits of introducing compartments on the vehicles are investigated.

@&#INTRODUCTION@&#
The vehicle routing problem, which will be discussed in this paper, is a variant of the classic capacitated vehicle routing problem (CVRP; for surveys see Golden, Raghavan, & Wasil, 2008; Laporte, 2009; or Toth & Vigo, 2014) and occurs in the context of glass waste collection in Germany. Glass waste has to be recycled by law and is used as a raw material for the production of new glass products. It has to be taken to recycling stations by the consumers where it is disposed into different containers according to the color of the waste (usually colorless, green and brown glass). Colors are kept separated because the production of new glass products is less cost-intensive if the glass waste is not too inhomogeneous with respect to its color. Trucks, which are located at a depot of a recycling company, pick up the glass waste from the recycling stations. Since they possess a relatively large loading capacity, they can call at several recycling stations before they have to return to the depot. Recent truck models are equipped with a special device which allows for introducing bulkheads in predefined positions of the loading space such that it can be split into different compartments and, thus, enabling transportation of glass waste with different colors on the same truck without mixing the colors on the tour. This gives rise to the question how the tours of the trucks should be designed given the availability of a device of this kind.The problem under discussion can be classified as a multi-compartment vehicle routing problem (MCVRP). However, it is different from the ones previously discussed in the literature with respect to the following properties:•The size of each compartment is not fixed in advance but can be determined individually for each vehicle/each tour.The size of the compartments can only be varied discretely, i.e. the walls separating the compartments from each other can only be introduced in specific, predefined positions.The number of compartments, into which the capacity of a vehicle is divided, can be identical to the number of product types (glass waste types) but can also be smaller.The problem is NP-hard, since it is a generalization of the CVRP (see, for example, Toth & Vigo, 2014). By application of a mathematical model-based exact solution approach, we were only able to solve problem instances with a limited size to optimality. Therefore, a heuristic, namely a variable neighborhood search (VNS), has been developed and will be presented. According to the best of our knowledge, this is the first method which has been proposed for this problem so far. We will further analyze what the economic benefits are which stem from the introduction of flexibly sizable compartments.The remainder of this paper is organized as follows. Section 2 presents a formal definition and a mathematical formulation of the problem. The relevant literature related to the MCVRP is discussed in Section 3. In Section 4, the proposed variable neighborhood search algorithm is introduced. Extensive numerical experiments have been performed in order to evaluate the mathematical model and the VNS. The design of these experiments and the corresponding results are presented in Section 5. Finally, the main findings are summarized and an outlook on future research is given in Section 6.The multi-compartment vehicle routing problem with flexible compartment sizes (MCVRP-FCS) can be formulated as follows: Let an undirected, weighted graphG=(V,E)be given which consists of a vertex setV={0,1,…,n}, representing the location of the depot ({0}) and the locations of n customers({1,…,n}), and an edge setE={(i,j):i,j∈V,i<j}, representing the edges which can be traveled between the different locations. To each of these edges, a non-negative cost cij, (i, j) ∈ E, is assigned. It is assumed that all of these costs satisfy the triangle inequality.Further, let a set P of product types be given. At each vertex (except for the depot) exists a non-negative supply sip(i ∈ V\{0}, p ∈ P) of each of the product types. The supplies have to be collected at their locations and transported to the depot without the product types being mixed. A location may be visited several times in order to pick up different product types. However, if being picked up, each supply has to be loaded in total. In other words, a split collection of a single supply is not permitted.For the purpose of transportation, a set K of homogeneous vehicles is available, each equipped with a total capacity Q. Individually for each vehicle k ∈ K, the total capacity Q can be divided into a limited numberm^of compartments,m^≤|P|, which allows for loading products of different types on a single vehicle while keeping them separated during transportation. The size of the compartments can be varied discretely in equal step sizes, i.e. each compartment size, but also the total vehicle capacity Q, is an integer multiple of a basic compartment unit size qunit. Let the set of these multiples be denoted byM={0,1,2,…,mmax}where mmax = Q/qunit. Thenqm=1mmax·m,m∈M,denotes a compartment size relative to the total capacity Q which consists of m (m ∈ M) multiples of the basic compartment unit size qunit. To illustrate these aspects, we introduce a small example in which the vehicle capacity Q amounts to 200 units and the basic compartment unit size qunit to 10 units. Hence, only compartment sizes of 10, 20, 30,…, 200 units or 5 percent, 10 percent, 15 percent,…, 100 percent of the vehicle capacity can be selected. Accordingly, mmax is equal to 20 and a compartment withm=7corresponds to a relative compartment size ofqm=1mmax·m=120·7=0.35, i.e. 35 percent of the vehicle capacity. It is important to note that the set of potential compartment configurations is identical for all vehicles. However, the actual configuration in a particular solution might be different for each vehicle.What has to be determined is a set of vehicle tours, an assignment of product types to the vehicles and the sizes of the corresponding compartments such that all supplies are collected, that the capacity of none of the used vehicles is exceeded, and that the total cost of all edges to be traveled is minimized.This problem involves the following partial decisions to be made simultaneously:•assignment of product types to each of the vehicles(this decision determines which product types can be collected by each vehicle);•determination of the size of each compartment(this decision fixes for each vehicle how its total capacity is split into compartments);•assignment of supplies to each of the vehicles(this decision implicitly includes an assignment of locations to vehicles);•sequencing of the locations for each of the vehicles(this decision determines for each vehicle in which sequence the assigned locations are to be visited).We note that every vehicle routing problem involves decisions of the last two types, while the first and the second one define the uniqueness of the MCVRP-FCS.In order to formulate a mathematical model for the MCVRP-FCS, we introduce the following four types of variables:uipk={1,ifsupplyofproducttypepatlocationiiscollectedbyvehiclek,0,otherwise,i∈V∖{0},p∈P,k∈K;xijk={2,ifi=0andedge(i,j)isusedtwicebyvehiclek,1,ifedge(i,j)isusedoncebyvehiclek,0,otherwise,i,j∈V:i<j,k∈K;ypkm={1,ifsizeqmisselectedforproducttypepinvehiclek,0,otherwise,p∈P,k∈K,m∈M;zik={1,iflocationiisvisitedbyvehiclek,0,otherwise,i∈V,k∈K.The objective function and the constraints of the model can then be formulated as follows:(1)min∑(i,j)∈A∑k∈Kcijxijk(2)∑k∈Kuipk=1∀i∈V∖{0},p∈P:sip>0(3)uipk≤zik∀i∈V∖{0},p∈P,k∈K(4)zik≤z0k∀i∈V∖{0},k∈K(5)∑j∈V:j>0∑k∈Kx0jk≤2|K|(6)∑j∈V:i<jxijk+∑j∈V:j<ixjik=2zik∀i∈V,k∈K(7)∑p∈P∑m∈Mypkm≤m^∀k∈K(8)∑p∈P∑m∈Mqmypkm≤1∀k∈K(9)∑i∈V∖{0}sipuipk≤Q∑m∈Mqmypkm∀p∈P,k∈K(10)∑i∈S∑j∈S:i<jxijk≤|S|−1∀k∈K,S⊆V∖{0}:|S|>2(11)uipk∈{0,1}∀i∈V∖{0},p∈P,k∈K(12)x0jk∈{0,1,2}∀j∈V∖{0},k∈K(13)xijk∈{0,1}∀i∈V∖{0},j∈V∖{0}:i<j,k∈K(14)ypkm∈{0,1}∀p∈P,k∈K,m∈M(15)zik∈{0,1}∀i∈V,k∈KThe objective function (1) defines the total cost of all tours, which has to be minimized. Constraints (2) guarantee that each positive supply is assigned to exactly one vehicle, while constraints (3) ensure that a supply may only be satisfied by a vehicle if the corresponding customer location is visited by this vehicle. Constraints (4) make sure that the depot is included in each tour. According to constraints (5), the number of tours is limited by the number of available vehicles. Constraints (6) represent the vehicle flow constraints. Constraints (7) ensure that the number of product types assigned to a vehicle may not exceed the maximum number of compartments. Constraints (8) ensure that for each vehicle the sum of the relative compartment sizes qmmust be smaller than or equal to 1 (100 percent), i.e. the sum of the actual compartment sizes must be smaller than or equal to the vehicle capacity. In addition to that, constraints (9) guarantee for each compartment that its capacity is not exceeded by the assigned supplies. Constraints (10) represent the subtour-elimination constraints. Finally, constraints (11)–(15) characterize the variable domains.An illustrative example for the MCVRP-FCS with three locations (v1, v2, v3) and four product types (R: red, Y: yellow, G: green, B: blue) is provided in Fig. 1a. The locations are depicted as circles while the product types are depicted as squares. The number within a square indicates the amount of supply of a certain product type at a certain location. In case no supply exists, the respective square is crossed. In the shown example, each location has a supply of one unit for each product type with the exception of location 3 not having any supply of product type B at all. Furthermore, each vehicle has a capacity of six units and the maximum number of compartments equals three.A solution to this problem instance with two vehicles is shown in Fig. 1b. For each vehicle, a distinguished panel is depicted, which consists of information about the product-vehicle-assignment, the supply-vehicle-assignment, and the location sequencing. If a certain product type is assigned to a vehicle, the associated square in the top left part of the panel is colored and named accordingly. Further, if a certain supply is assigned to a vehicle, the corresponding square below the related location is colored and includes the amount of the supply. Finally, the routes are indicated by edges between the vertices.

@&#CONCLUSIONS@&#
In this paper, a variant of the multi-compartment vehicle routing problem was introduced and studied. This problem is different from the ones previously discussed in the literature. In particular, it includes compartments of flexible sizes, allowing for the number of compartments being smaller than the number of product types, which have to be transported separately. Because of this aspect, an additional question arises concerning the assignment of product types to vehicles.The main contributions of this paper include (1) a presentation of this new variant of the MCVRP which is inspired by a real-world application; (2) the development of an exact and a heuristic solution procedure for this problem; and (3) extensive numerical experiments investigating the problem itself as well as the performance of both suggested algorithms.Concerning the exact approach, the results of the experiments have shown that only problem instances of limited size can be solved to optimality in reasonable computing time. Detailed analysis of the results from these experiments provided insights into the impact of different problem parameters: The problem becomes – not unexpectedly – harder to solve with an increasing number of customer locations, product types and supplies. However, it was also shown that the maximum number of compartments, which determines the number of product types per vehicles, has a significant impact on the complexity of the problem. The smaller the number of available compartments is, the harder the problem becomes to solve. This result particularly emphasizes the relevance of the additional assignment decision encountered in this problem, namely the assignment of product types to be transported by each vehicle.Concerning the heuristic approach, we were able to show that it performs well – producing optimal or near-optimal solutions for small problem instances. For large instances with up to 450 demands, the heuristic finds presumably good quality solutions in reasonable time.In a third experiment, based on instances from practice, the benefits of using vehicles with multiple compartments of flexible sizes over using vehicles with a single compartment were investigated. The results for this specific application have shown that – if multiple, flexible-size compartments can be introduced – the total costs of the tours necessary for collecting all supplies can be reduced drastically. These results indicate the necessity of dealing with and developing effective solutions approaches for multi-compartment vehicle routing problems.