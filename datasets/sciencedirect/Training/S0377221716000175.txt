@&#MAIN-TITLE@&#
The proportionate two-machine no-wait job shop scheduling problem

@&#HIGHLIGHTS@&#
HighlightWe consider the two-machine no-wait proportionate job shop scheduling problem.We present an O(nlog n) algorithm for the problem without missing operations.We show that the problem with missing operations is strongly NP-hard.The O(nlog n) algorithm applies when all missing operations are on the same machine.

@&#KEYPHRASES@&#
Job shop,No-wait,Proportionate,

@&#ABSTRACT@&#
We consider the two-machine no-wait job shop minimum makespan scheduling problem. We show that when each job has exactly two equal length operations (also called a proportionate job shop), the problem is solvable in O(nlog n) time. We also show that the proportionate problem becomes strongly NP-hard when some jobs are allowed to visit only one machine. Finally, we show that the proportionate problem with missing operations becomes solvable in O(nlog n) time when all missing operations are on the same machine.

@&#INTRODUCTION@&#
In a two-machine no-wait job shop scheduling problem, a set of jobs follows the M1 → M2 processing route and another set of jobs follows the M2 → M1 processing route where M1, M2 denote the first and second machine respectively. Furthermore, the start time of the second operation of each job must coincide with the completion time of the first operation of the same job satisfying the no-wait restriction. The no-wait restriction is imposed either to prevent degradation of the product in certain chemical and/or steel manufacturing processes or because of the prohibitive high cost of waiting in certain service industries.The most popular objective in the scheduling literature is the minimization of the maximum job completion time (makespan, Cmax ). Using the standard three-field notation for scheduling problems, we denote the two-machine no-wait job shop minimum makespan scheduling problem as the J2/nwt/Cmax  problem where the term nwt indicates the no-wait restriction.A comparable manufacturing environment arises in a two-machine job shop problem with blocking in which there is no buffer space between the two machines and any job completing its first operation must remain on the respective machine until the other machine becomes available. Just-in-time production systems generate the blocking environment because of their objective to maintain a low level of in-process inventories. Any two-stage schedule with blocking can be converted to a no-wait schedule with the same makespan value by appropriately shifting any blocked operation so that its completion time coincides with the start time of the other operation of the same job. Therefore, our analysis of the two-machine job shop applies to both the no-wait and the blocking environments and their applications.In a general job shop, the number of operations per job is not necessarily equal to the number of machines. If there is only a single operation, i.e. a job is allowed to skip visiting a machine, then the problem is denoted as either the J2/nwt, mo1/Cmax  or the J2/nwt, mo2/Cmax  problem; mo1 indicates that all missing operations are on the same machine and mo2 indicates that some jobs have missing operations on one machine and some other jobs have missing operations on the other machine. On the other hand, if a job is allowed to visit a machine more than once, then some jobs will have more than two operations and the resulting problem is denoted as the J2/nwt, o > 2/Cmax  problem.The J2/nwt, o > 2/Cmax  problem was shown to be ordinary NP-hard by Sriskandarajah and Ladet (1986) even when all operations have unit processing times. Woeginger (2004) discusses the existence or not of a PTAS (Polynomial Time Approximation Scheme) for the J2/nwt, o > 2/Cmax  problem.The J2/nwt/Cmax  and J2/nwt, mo1/Cmax  problems were shown to be strongly NP-hard and the J2/nwt, mo2/Cmax  problem was shown to be ordinary NP–hard by Cho and Sahni (1979) with arbitrary job processing times. These complexity results justify the identification of special cases that are solvable in polynomial time. One such case is the proportionate case in which the two operations of a job have equal length. The resulting problems are called proportionate shop problems and are identified by the term prpt in the middle-field of the problem definition.The objective of this paper is to analyze the J2/prpt, nwt/Cmax , J2/prpt, nwt, mo1/Cmax  and J2/prpt, nwt, mo2/Cmax  problems. We will show that the J2/prpt, nwt/Cmax  and the J2/prpt, nwt, mo1/Cmax  problems are solvable in O(nlog n) time while the J2/prpt, nwt, mo2/Cmax  problem is strongly NP-hard. Our results indicate that the complexity of the problem depends not only on the presence of missing operations but also on the allocation of the missing operations to the machines.The consideration of shops with equal processing times for all operations originated in the case of a flow shop and is justified by practical applications. Panwalkar, Dudek, and Smith (1973) discussed practical applications of shops with job processing times exhibiting some similarity among machines; they observed that about three-quarters of industrial parts fall in that category.In general, the proportionate assumption is applicable when the processing time depends on the size of the item being processed and not on the process itself. For example, let us consider the painting of a car using different layers of paint applied at different workstations. The painting time depends on the car size and is the same at all painting stations.The rest of the paper is organized as follows: In section 2, we present an optimal O(nlog n) algorithm for the J2/prpt, nwt/Cmax  problem. In section 3, we present an optimal O(nlog n) algorithm for the J2/prpt, nwt, mo1/Cmax  problem and show that the J2/prpt, nwt, mo2/Cmax  problem is strongly NP-hard. The conclusions of this research are summarized in Section 4.In any instance of the J2/prpt, nwt/Cmax  problem, jobs can be partitioned into the J12, J21 job subsets; jobs in J12 (J21) must follow the M1 → M2 (M2 → M1) processing route respectively. Let pj(qj) denote the processing time on both machines of the jth job in the SPT sequence of J12 (J21). In general, |J12| ≠ |J21| where |A| denotes the cardinality of A. We can add the necessary number of dummy jobs with eitherpj=0orqj=0so that|J12|=|J21|; a zero processing time implies that the job must visit the machine for an infinitesimal amount of time ɛ > 0. Let|J12|=|J21|=nfollowing the addition of jobs with eitherpj=0orqj=0so that the total number of jobs is 2n equally split between J12 and J21. We renumber jobs in each subset in the shortest processing time (SPT) order (it is possible that several initial jobs in one SPT sequence are jobs with zero processing times on both machines).Sahni and Cho (1979) as well as Panwalkar and Koulamas (2014) have used the concept of job pairings to implement the no-wait restriction; we will also use the concept of job pairing here. However, in the J2/prpt, nwt/Cmax  problem, job routings cannot be selected by the scheduler. So the 2n jobs should be first arranged optimally in n pairs so that each pair (j, j′) contains one job j ∈ {J12} and one job j′ ∈ {J21}; then, these n pairs should be sequenced optimally.The job pairs can be divided into two groups G1, G2 with pu≤ qufor all pairs in G1 and pu> qufor all pairs in G2. Letδu=qu−pu≥0for G1 pairs andθv=pv−qv≥0for G2 pairs denote the idle time (depicted in Fig. 1) when these pairs are sequenced.In order to form a complete schedule, the job pairs should be concatenated. When we concatenate different pairs, the following can be observed.Observation 1: If we concatenate a (u, u′) pair in G1 and a (v, v′) pair in G2, the total idle time on both machines will beδu+θvas shown in Fig. 2. The idle time values do not change if the pair order is reversed.Observation 2: If we concatenate any two pairs (i, i′) and (j, j′) belonging to the same group (e.g., G2) in either order, the total idle time on both machines will be max {θi, θj} as shown in Fig. 3. Informally, we can state that the max {θi, θj} value absorbs the min {θi, θj} value.Observations 1 and 2 indicate that when two pairs belonging to different groups are concatenated their idle times are added; in contrast, when two pairs belonging to the same group are concatenated the smaller idle time is absorbed by the longer one. Therefore, in an optimal schedule, job pairs belonging to the same group should be concatenated prior to concatenating job pairs belonging to different groups. The next observation shows how to concatenate job pairs belonging to the same group.Observation 3: When a partial sequence of the pairs in G2 is formed, the total idle time will beθmax=max{θj}when the |G2| pairs are sequenced so that the pair with the θmax  value is sequenced in some position k (1 ≤ k ≤ |G2|), all pairs placed in positions1,…,k−1are sequenced in the non-decreasing order of their θ values and all pairs placed in positionsk+1,…,|G2|are sequenced in the non-increasing order of their θ values. This type of sequence is called a pyramid sequence. Smith, Panwalkar, and Dudek (1976) showed that there are2|G2|−1such sequences. A similar property holds for concatenating the pairs in G1.Observation 3 indicates that the pairs in G2 can be concatenated optimally in2|G2|−1ways. One way is to concatenate them in the non-decreasing order of their θjvalues depicted in Fig. 4; we call this order, the θ↑ order. The θ↑ order has the property that all idle time on M1 will appear as a single interval at the end of the partial schedule. The total idle time θmax  on M2 is broken into |G2| intervals. The makespan of the resulting partial schedule will beCmaxG2=∑j∈G2(pj+qj)+θmax; see Fig. 4.By symmetry, if we concatenate the pairs in G1 in the non-increasing order of their δjvalues (the δ↓ order), all idle time on M1 will appear as a single interval at the beginning of the partial schedule and the partial makespan will beCmaxG1=∑j∈G1(pj+qj)+δmax.Then, an overall G2 → G1 schedule withCmax=∑j=1n(pj+qj)+δmax+θmaxcan be constructed in which the total idle timeθmax+δmaxon M1 forms a single interval in the interior of the schedule. The preference for this schedule among a number of alternative schedules with the same total idle time is to facilitate the solution of the J2/prpt, nwt, mo1/Cmax  problem (considered in the next section) by simply extending the algorithm for the J2/prpt, nwt/Cmax  problem.Theθmax+δmaxvalue is a lower bound on the total idle time because of the way the job pairs can be concatenated in a no-wait two-machine proportionate job shop. Therefore, the above constructed schedule will be optimal if jobs are paired so that theθmax+δmaxvalue is minimal. We define a (u, u′) pair as a standard pair if job u ∈ {J12} and job u′ ∈ {J21} have the same position in the SPT sequence of J12 and the SPT sequence of J21 respectively. The next lemma shows the optimality of standard job pairing.Lemma 1The standard job pairing yields the minimumθmax+δmaxvalue among all possible J12, J21 job pairings.Proof: By an adjacent pairwise interchange argument. Let pj,pj+1(withpj+1≥pj) be the processing times of two consecutive jobs in the SPT sequence of J12 and let us assume that the (j,j′+1) and (j+1,j′) pairs are formed whereqj+1>qj; (j′,j′+1denote two consecutive jobs in the SPT sequence of J21). We will show that the alternative (j, j′), (j+1,j′+1) job pairing yieldsθmax′+δmax′≤θmax+δmaxwhere θmax , δmax  (θmax′,δmax′) are the maximum θ and δ values under the current (alternative) pair formation. The repeated application of this argument yields the optimality of the standard job pairing.The incumbentθmax+δmaxvalue is affected by the job swapping under consideration only when either θmax  or δmax  (or both) are determined by either the|pj−qj+1|value or the|pj+1−qj|value (or both) in the current pair formation. The following cases should be considered.(i)The two current pairs and the two new pairs are all in G2. The inequalitiespj+1≥pjandqj+1>qjimply thatpj+1−qj+1≤pj+1−qjand thatpj−qj≤pj+1−qj; therefore,max{pj−qj,pj+1−qj+1}≤max{pj−qj+1,pj+1−qj}or equivalentlyθmax′≤θmax. Sinceδmax′=δmax,θmax′+δmax′≤θmax+δmax. The case where all pairs are in G1 is symmetric and can be handled analogously.One current pair and one new pair are in G2. Without loss of generality, we can assume thatδmax=qj+1−pj>0(the current G1 pair) and thatθmax=pj+1−qj>0(the current G2 pair). Two subcases should be considered with respect to the new pairs.(ii-1)Letθmax′=pj+1−qj+1>0andδmax′=qj−pj>0be the new G1 and G2 pairs. Then, the inequalityθmax′+δmax′≤θmax+δmaxreduces toqj≤qj+1which is true by assumption.Letθmax′=pj−qj>0andδmax′=qj+1−pj+1>0be the new G1 and G2 pairs. Then, the inequalityθmax′+δmax′≤θmax+δmaxreduces topj≤pj+1which is also true by assumption.One current pair is in G1 and both new pairs are in G2. Without loss of generality, we can assume thatδmax=qj+1−pj>0(the current G1 pair) and thatθmax=pj+1−qj>0(the current G2 pair). Then,δmax′≤δmaxbecause the second highest δ value in the current pair formation (determined by a pair other than the ones under reformulation) will become theδmax′value. Also,θmax′=max{pj−qj,pj+1−qj+1}≤pj+1−qj=θmax. Therefore,θmax′+δmax′≤θmax+δmax. The case where one current pair is in G1 and both new pairs are in G1 is symmetric and can be handled analogously.Both current pairs are in G2 and one new pair is in G1. This case is not feasible because the inequalitypj−qj+1>0implies thatpj+1−qj+1>0; therefore, the (j+1,j′+1) pair cannot be in G1. The inequalitypj−qj+1>0also implies thatpj−qj>0; therefore, the (j, j′) pair cannot be in G1 as well. By symmetry, the case where both current pairs are in G1 and one new pair is in G2 is not feasible as well; Q.E.D.We now present the proposed solution procedure for the J2/prpt, nwt/Cmax  problem in algorithmic form.Algorithm. J2_NWT for theJ2/prpt,nwt/Cmaxproblem.Step 1: If|J12|≠|J21|, add the necessary number of jobs with eitherpj=0orqj=0so that|J12|=|J21|. Renumber jobs according to the SPT order in both subsetsJ12,J21and form the standard pairs(1,1′),(2,2′),…,(n,n′)in which both jobs in a pair have the same position in their respective SPT sequences.Step 2: Ifpj≤qj, then(j,j′)∈G1; else(j,j′)∈G2. Computeδu=qu−pu≥0for theG1pairs andθv=pv−qv>0for theG2pairs.Step 3: Arrange the pairs inG1according to theδ↓order and the pairs inG2according to theθ↑order. Form theG2→G1overall schedule withCmax=∑j=1n(pj+qj)+δmax+θmax.End.The running time of the J2_NWT algorithm is O(nlog n) dominated by the sorting of the 2n jobs and the sorting of the n pairs. The optimality of the J2_NWT algorithm follows from theCmaxexpression and Lemma 1.We will demonstrate the implementation of the J2_NWT algorithm with the following numerical example.J12J21Job12341′2′3′4′Length110111310111121All four standard job pairs belong to G1 withδ1=9,δ2=1,δ3=0, andδ4=8. The δ↓ order yields the 1-4-2-3 pair sequence withCmax=97.We close this section by comparing the solution approach for the J2/prpt, nwt/Cmax  problem with the solution approach for the corresponding open shop O2/prpt, nwt/Cmax  problem analyzed by Panwalkar and Koulamas (2014).In the O2/prpt, nwt/Cmax  problem, the SPT sequence includes all jobs and the standard pairs are formed by pairing two consecutive jobs. We select the routing of each job and the optimality of the standard job pairing is relatively easy to prove. In contrast, in the J2/prpt, nwt/Cmax  problem, there are two distinct SPT sequences (one for the jobs in J12 and one for the jobs in J21) and the proof of optimality of standard job pairing is substantially more involved. Also, the predetermined routing in the J2/prpt, nwt/Cmax  problem necessitates a new original way of concatenating the standard pairs (compared to the O2/prpt, nwt/Cmax  problem).In any instance of an J2/prpt, nwt, mo2/Cmax  problem, jobs can be grouped into the J12, J21, J1 and J2 subsets; the J12, J21 subsets are defined as in Section 2 while the J1 (J2) subset contains jobs that require processing only on M1 (M2). IfJ1=∅(J2=∅), the J2-NWT algorithm can be used to solve the resulting J2/prpt, nwt, mo1/Cmax  problem.IfJ2=∅, jobs in J1 can be sequenced contiguously in the single idle time interval on M1 in the interior of the optimal schedule for jobs in the J12∪J21 subset. The idle time of the resulting schedule on M1 (if any) will still appear as a single interval in the interior of the schedule with lengthmax{0,θmax+δmax−∑j∈J1pj}where theθmax+δmaxvalue is determined by the processing times of jobs in the J12∪J21 subset.IfJ1=∅, then the J2_NWT algorithm can be modified appropriately to construct an optimal schedule for jobs in the J12∪J21 subset with a single idle time interval on M2 with lengthθmax+δmaxin the interior of the schedule. This block can then be used to sequence jobs in J2.We now turn our attention to the J2/prpt, nwt, mo2/Cmax  problem in which J1 ≠ ∅ and J2 ≠ ∅. We show next that the J2/prpt, nwt, mo2/Cmax  problem is strongly NP-hard using a reduction from the strongly NP-hard 3-partition problem stated next.3-Partition problem: Given a positive integer B and a set of integers X={x1,…, xm} withm=3n,∑i=1mxi=nB, and B/4 < xi< B/2 for 1 ≤ i ≤ m, does there exist a partition of X into three element sets{X1,X2,…,Xn}such that∑j∈Xixj=B, 1 ≤ i ≤ n?Proposition 1The J2/prpt, nwt, mo2/Cmax  problem is strongly NP-hard.Proof: The J2/prpt, nwt, mo2/Cmax  problem is clearly in NP. For a given instance of the 3-partition problem we define an instance of the J2/prpt, nwt, mo2/Cmax  problem withk=5n+1jobs{1,…,5n+1}as follows:{1,…,n}∈J12withpj=(j+1)B;j=1,…,n{n+1,…,2n}∈J21withpj=B;j=n+1,…,2n{2n+1,…,5n}∈J2withpj=xj;j=2n+1,…,5nwith∑j=2n+15nxj=nBandB/4<xj<B/2for2n+1≤j≤5n.{5n+1}∈J1withp5n+1=nB.The makespan threshold value isCmax=n(n+7)2B. We will show that there exists a 3-partition if and only if there exists a schedule for the J2/prpt, nwt, mo2/Cmax  problem withCmax=n(n+7)2B.Any pairing of jobs j ∈ {J12∪J21} is a standard pairing with n pairs because all jobs j ∈ J21 are identical; also, all n pairs belong to G2. The optimal θ↑ ordering of the n pairs yields the schedule depicted in Fig. 5withCmax=n(n+7)2B.In this schedule, there is a single idle time interval on M1 at the end of the schedule with length nB in which we can “fit” job5n+1. Also there are n equal idle time intervals on M2 of length B each. Therefore, if there exists a 3-partition, we can “fit” jobs{2n+1,…,5n}in these n intervals.Let us now assume that there is no 3-partition. Observe that whenCmax=n(n+7)2Bthere is no idle time on either machine. The ordering of the n pairs in any order other than the θ↑ order will not generate a single idle time interval of length nB on M1; the existence of such an interval provides the only possible way to schedule job5n+1on M1 withCmax=n(n+7)2B. Therefore, in order to sequence jobs j ∈ {J12∪J21∪J1} withCmax=n(n+7)2B, we must sequence the n pairs of jobs j ∈ {J12∪J21} in the θ↑ order. The resulting schedule will have n equal idle time intervals on M2 of length B each. If there is no 3-partition, jobs j ∈ J2 cannot be scheduled on M2 withCmax=n(n+7)2B; q.e.d.

@&#CONCLUSIONS@&#
We showed that in the case of the J2/prpt, nwt/Cmax  problem, the complexity of the problem depends not only on the presence of missing operations but also on the allocation of the missing operations to the machines. We utilized the concept of standard job pairing to solve the J2/prpt, nwt/Cmax  problem in O(nlog n) time when there are no missing operations and when all missing operations are on the same machine.It is of interest to investigate the effectiveness of forming standard job pairs in a two-machine proportionate job shop with alternative objective functions such as the minimization of the total job completion time (∑Cj) leading to the J2/prpt, nwt/∑Cjproblem.Let us revisit the 8-job numerical example in Section 2. If we form the standard job pairs and implement all 8 pyramid orders of the δ values, we obtain∑j=18Cj=434as the best total job completion time value among these eight sequences (the makespan value for all 8 sequences is 97). An alternative reasonable schedule for the J2/prpt, nwt/∑Cjproblem is one in which the standard job pairs are sequenced according to the non-decreasing order of the job processing times which is the 1-2-3-4 pair sequence for our problem with∑j=18Cj=440. On the other hand, if we form the non-standard job pairs (2, 1′), (3, 2′), (1, 3′), (4, 4′) and implement the 1-2-3-4 pair sequence we obtain∑j=18Cj=430.These findings indicate that the standard job pairing may not be optimal for the J2/prpt, nwt/∑Cjproblem and that the analysis of the J2/prpt, nwt/∑Cjproblem will require substantial additional research effort and/or a complexity proof for the problem.A similar conclusion can be reached for the J2/prpt, nwt, unsp/Cmax  problem (where unsp stands for unequal machine speeds si) in whichpij=pjsi,qij=qjsi,i=1,2and s1 ≠ s2. This problem can be viewed as a generalization of the J2/prpt, nwt/Cmax  problem analyzed in the present paper. It can be shown that the standard job pairing is not optimal for the J2/prpt, nwt, unsp/Cmax  problem; consider a 4-job example withp1=12,p2=18,q1=21,q2=30,s1=1.5ands2=1. The formation of the standard (p1, q1), (p2, q2) pairs results inCmax=83while the formation of the non-standard (p1, q2), (p2, q1) pairs results inCmax=81. Consequently, additional research effort is needed to either determine the complexity of the J2/prpt, nwt, unsp/Cmax  problem or develop an efficient solution algorithm if such an algorithm is possible.