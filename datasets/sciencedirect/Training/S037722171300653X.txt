@&#MAIN-TITLE@&#
Stochastically weighted stochastic dominance concepts with an application in capital budgeting

@&#HIGHLIGHTS@&#
We propose three new concepts of stochastically weighted stochastic dominance.These concepts are represented by finitely many (mixed-integer) linear inequalities.A capital investment problem illustrates the use of these concepts in finance.

@&#KEYPHRASES@&#
Stochastic programming,Stochastic dominance,Risk management,Chance constraint,Integer programming,

@&#ABSTRACT@&#
The problem of comparing random vectors arises in many applications. We propose three new concepts of stochastically weighted dominance for comparing random vectors X and Y. The main idea is to use a random vector V to scalarize X and Y asVTXandVTY, and subsequently use available concepts from stochastic dominance and stochastic optimization for comparison. For the case where the distributions of X, Y and V have finite support, we give (mixed-integer) linear inequalities that can be used for random vector comparison as well as for modeling of optimization problems where one of the random vectors depends on decisions to be optimized. Some advantages of the proposed new concepts are illustrated with the help of a capital budgeting example.

@&#INTRODUCTION@&#
Many decision situations require comparison of random vectors. Examples of such situations arise in multi-period reward in dynamic programming (Dentcheva and Ruszczyński, 2008), multi-criteria decision making (Hu and Mehrotra, 2012), risk adjusted budget allocation (Hu et al., 2011), health applications (Armbruster and Luedtke, 2010), and capital budgeting Graves et al. (2003). The concept of stochastic dominance can be used for comparing random variables and vectors (see, e.g., Shaked and Shanthikumar, 1994; Müller and Stoyan, 2002 and Levy, 2006 for comprehensive treatments of the topic). A well-known approach to compare random variables is to compare their expected utility, for a given utility function u that represents the decision maker’s preferences. Stochastic dominance circumvents the problem of assuming knowledge of a decision maker’s utility function by requiring thatE[u(X)]⩾E[u(Y)]for all u in a certain classUof utility functions. The concept of utility-based comparison naturally generalizes to the multivariate case by using multivariate utilities. However, as observed by Zaras and Martel (1994) and Nowak (2004), it may become conservative in that setting. Moreover, testing dominance relationship in the multivariate case can be difficult, although recent work by Armbruster and Luedtke (2010) provides some new tools for that.In this paper we propose three new concepts of stochastically weighted dominance. These concepts build on the idea of weighted scalarization of the random vectors. We informally present the basic ideas below to facilitate discussion on their benefits. We say that X dominates Y in the multivariate linear sense if(1.1)E[u(vTX)]⩾E[u(vTY)],∀v∈V,∀u∈U.A standard approach, known as multivariate linear stochastic dominance, is to useV=R+n(see, e.g., Müller and Stoyan, 2002 and Dentcheva and Ruszczyński, 2009). Homem-de-Mello and Mehrotra (2009) and Hu et al. (2012) allowVto be an arbitrary polyhedral and a convex set, respectively. In our new concepts we will allow a stochastically weighted scalarization by introducing a probability measure indicating the relative importance of each vector of weights. The use of random weights was also studied in Hu and Mehrotra (2012) to develop stochastic-weight robust models for multi-stochastic objective optimization problems without the framework of stochastic dominance.In the first concept, called stochastically weighted dominance in average (see definition in (SWD-Avg)), we require that condition (1.1) hold not for allv∈Vbut just on the average with respect to a distribution supported on the setV. In the second concept, called stochastically weighted dominance with chance (see definition in (SWD-Chance)), we require that condition (1.1) hold for a given fraction of thev∈Vinstead of all v. The third concept, called almost stochastically weighted dominance (see definition in (SWD-Almost)), can be roughly interpreted as allowing a tolerance on the right-hand side of (1.1).The proposed new concepts provide additional modeling flexibility and potential computational advantages over current techniques. For example, they allow for the use of random discount rates in net present value type calculations in capital budgeting where future cash flow and predicted discount rates are random, thus resulting in a more accurate representation of future uncertainty. Moreover, the new concepts provide a systematic approach to reconcile diverse stakeholder opinions elicited by a decision maker by allowing the use of a distribution-based scalarization in optimization problems with multiple risk constraints. This situation arises, for example, when the weights are collected from a large survey on a public issue (see e.g., Hu et al., 2011).In addition, the stochastic weighted dominance concepts introduced here provide a way to relax condition (1.1), which in certain situations may be too strict as it requires that dominance hold for everyv∈V. Finally, the concepts in (SWD-Avg) and (SWD-Almost) lead to linear inequalities when the second order dominance is used to compare the scalarized vector. In comparison, known approaches for the model in (1.1) require solving an optimization problem involving concave minimization problems (see Homem-de-Mello and Mehrotra, 2009 and Hu et al., 2012), which are difficult to solve.The remainder of this paper is organized as follows. In Section 2 we review some concepts of stochastic dominance, including the notion of multivariate linear dominance under a weight region, and provide some basic results. In Section 3 we formally describe new concepts of stochastically weighted dominance and provide their equivalent utility representations. In Section 4 we present linear and mixed-integer linear systems of inequalities corresponding to the new dominance relationships. This is done in the context where one of the random vectors is an outcome depending on decision variables in an optimization problem. In Section 5 we present an example from capital budgeting to highlight the salient features of our proposed concepts. The appendices contain the proofs of the theorems presented in the paper, as well as a simple example that illustrates the effect of the various notions of dominance on the size of the feasibility set of an optimization problem.We start by reviewing the concept of nth order stochastic dominance (see, e.g., Dentcheva and Ruszczyński, 2003). Consider an underlying probability space(Ω,F,P). Form⩾1, letLnmdenote the set of m-dimensional random vectors X defined on(Ω,F,P)satisfyingE[‖X‖∞n]<∞. We will omit the index m whenm=1.We write the cumulative distribution function (cdf) of a real-valued random variableξasF1(ξ;η)≔P(ξ⩽η).Furthermore, forξ∈Ln-1wheren⩾2, define recursively the functionsFj(ξ;η)≔∫-∞ηFj-1(ξ;t)dt,j=2,…,n.It is useful to note the equivalence given by Proposition 1 in Ogryczak and Ruszczyński (2001)(2.1)Fj(ξ;η)=1(j-1)!E(η-ξ)+j-1,j=2,…,n.It implies that, for any n, the conditionξ∈Ln-1suffices to ensure thatFn(ξ;η)<∞for allη.A random variableξ∈Ln-1is said to stochastically dominate another random variableζ∈Ln-1in nth order if(2.2)Fn(ξ;η)⩽Fn(ζ;η),∀η∈R.We use the notationξ⊵(n)ζto indicate this relationship.At this point it is useful to establish the utility based interpretation of the first and second order stochastic dominance. It is well known that(2.3)ξ⊵(n)ζ⇔E[u(ξ)]⩾E[u(ζ)],∀u∈Un,whenever the expectations exist. In the above statement,U1is the set of all nondecreasing functionsu:R↦RandU2is the set of all nondecreasing concave functionsu:R↦R. We refer to Müller and Stoyan (2002),Dentcheva and Ruszczyński (2003) and Rachev et al. (2008) for a more detailed discussion of stochastic dominance. We shall avoid the repetition of the clause “whenever the expectations exist”, and always understand (2.3) in that context.The concept of nth order dominance can be readily extended to the multivariate linear case as defined below.Definition 2.1A random vectorX∈Ln-1mdominates another random vectorY∈Ln-1min the linear nth order with respect to setV⊆R+mif(RSD)Fn(vTX;η)⩽Fn(vTY;η)∀η∈R,∀v∈V.Since the above inequality must hold for allv∈V, we shall sometimes refer to this relationship as “robust weighted” stochastic dominance.Theorem 2.2 below shows that without loss of generality we can assume thatV⊆Δ≔{v∈Rm:‖v‖1⩽1}. This property generalizes the results in Homem-de-Mello and Mehrotra (2009) who consider the case of the second order dominance.Theorem 2.2LetVbe a non-empty convex set, and denoteV∼≔cone(V)∩Δ(conedenotes the conical hull). Then,(i)vTX⊵(1)vTYfor allv∈Vif and only ifvTX⊵(1)vTYfor allv∈V∼.Forn⩾2,vTX⊵(n)vTYfor allv∈Vif and only ifvTX⊵(n)vTYfor allv∈cl(V∼)(cl) denotes the closure of a set).See Appendix B.1.□In this section we introduce notions of stochastically weighted stochastic dominance. We shall use the notation V instead of v to emphasize that the weights are random. We assume that the m-dimensional random vector V and the random-outcome vectors X and Y are defined on the same probability space. Such an assumption is made only for notational convenience and does not lead to loss of generality, since we can always construct a random vectorV′on the same probability space as X and Y having the same distribution as V. Note also that V may in principle be correlated with X and Y, which allows for incorporating information on X and Y to influence the choice of weights. Let us define the conditional distribution functionF1(VTX;η|V)≔P(VTX⩽η|V),and denoteFj(VTX;η|V)≔∫-∞ηFj-1(VTX;t|V)dt,j=2,…,n.We note thatFj(VTX;η|V)is a nonnegative random variable. Moreover, from (2.1) we have that(3.1)Fj(VTX;η|V)=1(j-1)!E(η-VTX)+j-1|V,∀η∈Ra.s..We first consider the following relationship, which is similar to (RSD):(3.2)Fn(VTX;η|V)⩽Fn(VTY;η|V),∀η∈Ra.s..Similarly to the utility relationship (2.3), inequality (3.2) for the nth order (n=1 or 2) is equivalently represented as(3.3)E[u(VTX)|V]⩾E[u(VTY)|V],∀u∈Un,a.s..It turns out that, although similar, the above concept is not identical to the robust notion in Definition 2.1. Indeed,vTX⊵(n)vTYfor all v on the support set of V implies (3.2). However, in general, this robust condition is not implied by (3.2) unless the support of V is finite. This is because the inequality in (3.2) may not be satisfied on a subset ofVof measure zero.Note also that, sincelimη→-∞Fn(VTX;η|V)=limη→-∞Fn(VTY;η|V)=0,a.s.,it follows thatsupη∈RFn(VTX;η|V)-Fn(VTY;η|V)⩾0a.s. Therefore, (3.2) can be equivalently represented as(3.4)Esupη∈RFn(VTX;η|V)-Fn(VTY;η|V)⩽0.Condition (3.4) provides essentially the same information as the robust relationship in Definition 2.1. The above discussion, however, motivates the study of alternative relaxed versions of (3.2) and its equivalent representation (3.4) which will allow us to fully explore the randomness of the weights as a modeling tool.We proceed now in that direction. Note that, by Theorem 2.2, definitions (3.2) and (3.4) remain unchanged with respect to scaling the random vector V. That is, we can normalize V asV/‖V‖1if‖V‖1>0and zero otherwise so that a nonnegative support of V can be projected ontoΔ. Thus, we shall assume henceforth that the support of V is a subset ofΔ. To avoid repetition, we will write “V∈Lm(Δ)” to remind the reader of that assumption.Definition 3.1A random vectorX∈Ln-1mis said to dominate another random vectorY∈Ln-1min stochastically weighted nth order in average with respect to a random vectorV∈Lm(Δ)(writtenX▶̲(n)wY) if(SWD-Avg)EFn(VTX;η|V)⩽EFn(VTY;η|V),∀η∈R.At a fixed realization v of V, the conditionFn(vTX;η)-Fn(vTY;η)⩽0indicates the dominance ofvTXovervTY. Thus, (SWD-Avg) requires that the dominance relationship hold on average with respect to the distribution of V. Note also that the supremum of an expectation is less than or equal to the expectation of the supremum. Thus, we have obtained a relaxed version of (3.4) by switching the order of expectation and supremum.Remark 3.2Note also that, by applying identity (3.1) into (SWD-Avg) and using the so-called “tower property” of expectations, we obtain an important characteristic of (SWD-Avg)—namely, that this multivariate dominance can be represented by a univariate relationship. For reference, we state this result in Proposition 3.3 below.For random vectorsX,Y∈Ln-1mandV∈Lm(Δ), letξ≔VTXandζ:=VTY. ThenX▶̲(n)wYif and only ifξ⊵(n)ζ.Consequently, properties of univariate dominance can be used for (SWD-Avg). This is particularly important from an algorithmic perspective, since it is much easier to test for univariate dominance than for robust multivariate linear dominance. We will discuss this issue in more detail in Section 4.By combining Proposition 3.3 with (2.3), we obtain the following equivalent utility representations of (SWD-Avg) for the first and second orders. Recall the definition ofU1andU2following (2.3).Corollary 3.4For random vectorsX,Y∈L1mandV∈Lm(Δ),X▶̲(n)wYif and only if(3.5)E[u(VTX)]⩾E[u(VTY)],∀u∈Un,whenn=1or 2.We now give an interpretation of (SWD-Avg). Assume that X and Y are future random cash flows of two completing projects, and V is a random vector that represents the discount rates corresponding to future periods (see Section 5). Then,VTXandVTYrepresent the random net present value of the cash flows of the competing projects. Under the criterion of Corollary 3.4, cash flow X is preferred over Y if the expected utility of the net present value of X is greater than the expected utility of the net present value of X for any utility function in the setUn.We also give an alternative interpretation of (SWD-Avg) which is relevant in the context of multi-criteria group decision making. Assume that we have collected criteria weightsv1,…,vKfrom K individuals representing a large population. Then, the weights elicited from a randomly picked member from this population may be thought to be a random variable V with probability distribution having outcomesv1,…,vKwith equal probability. Nowu(VTX)is the utility of the weighted sum of the attributes X of this random member of the population. Hence, assuming that all population members have the same utility functionu,E[u(VTX)]is the average utility of X for the population. Under the criterion of Corollary 3.4, X is preferred over Y if the average utility of X is greater than the average utility of Y for any utility function in the setUn.We now discuss another concept of stochastic weighted dominance motivated from (3.4). In this concept we require that the relationship in (3.2) hold with some probability rather than almost surely. One can draw a parallel between this approach and the traditional notion of chance constraints (also called probabilistic constraints) in stochastic programming. Formally, we have the following definition:Definition 3.5A random vectorX∈Ln-1mis said to dominate another random vectorY∈Ln-1min stochastically weighted nth order with chanceα∈[0,1]with respect to a random vectorV∈Lm(Δ)(writtenX▶̲(n)c(α)Y) if(SWD-Chance)PFn(VTX;η|V)⩽Fn(VTY;η|V),∀η∈R=:S(X,Y)⩾1-α.The parameterαallows for the control of the extent of chance satisfaction. Note thatα=0is the same as (3.2); on the other extreme, whenα=1(SWD-Chance) trivially holds regardless of the distributions ofX,Yor V. We callS(X,Y)the satisfaction level of preference of X over Y, sinceX▶̲(n)c(1-S(X,Y))Y.The following proposition gives an equivalent representation of stochastically weighted dominance with chanceαin terms of expected utilities. The proof follows directly from the equivalence (2.3) applied to the univariate random variablesvˆTXandvˆTYfor a fixed realizationvˆof V.Proposition 3.6For random vectorsX,Y∈L1mandV∈Lm(Δ),X▶̲(n)c(α)Yif and only if(3.6)PE[u(VTX)|V]⩾E[u(VTY)|V],∀u∈Un⩾1-α,whenn=1or 2.In Section 4 we will discuss how to test for this type of dominance. We now give an interpretation of (SWD-Chance). Returning to the cash flow example following Corollary 3.4, under the criterion of (SWD-Chance) cash flow X is preferred over Y if the expected utility of random net present value of X is better than the expected utility of Y for all but a fraction of the possible discount rates, regardless of the choice of the utility function within the setUn. Similarly, in the group decision making example, (SWD-Chance) dictates that X is preferable to Y if the expected utility of weighted attributeVTXis greater than the expected utility of weighted attributeVTYfor1-αpercent of the population, regardless of the choice of the utility function within the setUn.The third concept motivated from (3.4) we present is obtained by allowing for a tolerance on the right hand side of that inequality, as defined below. The basic idea was used in Hu et al. (2012) to ensure that a certain Slater condition holds when solving optimization problems with the second order stochastic dominance constraints. A similar idea (also forn=2) was proposed independently by Lizyayev and Ruszczyński (2011) to relax univariate dominance condition.Definition 3.7A random vectorX∈Ln-1mis said to dominate another random vectorY∈Ln-1min almost stochastically weighted nth order for a given parameterγ⩾0with respect to a random vectorV∈Lm(Δ)(writtenX▶̲(n)s(γ)Y) if(SWD-Almost)Esupη∈RFn(VTX;η|V)-Fn(VTY;η|V)=:T(X,Y)⩽γ.We callT(X,Y)the tolerance level for X to dominate Y sinceX▶̲(n)s(T(X,Y))Y. When the distribution of v represents the opinions of multiple decison makers, (SWD-Relax) can be interpreted as follows: suppose that each decision maker allows for a tolerance to relax the nth order dominance condition (for example, Lizyayev and Ruszczyński, 2011 call this relaxation “almost stochastic dominance”); then, (SWD-Almost) says that the weighted average tolerance should not exceedγ.Further properties of (SWD-Almost) can be derived when both X and Y have bounded support. Suppose this is the case, and without loss of generality assume thatX,Y∈[0,1]ma.s.. Then, the supremum inT(X,Y)can be taken overηin [0,1], i.e.,(3.7)T(X,Y)=Esupη∈[0,1]Fn(VTX;η|V)-Fn(VTY;η|V).Note thatFn(VTX;η|V)⩽1for allη∈[0,1]a.s.. Thus, we see that, similarly to the case of stochastically weighted dominance with chanceα, the parameterγallows for the control of the degree of relaxation of (3.4). Obviously,γ=0is the same as (3.4), whereas (SWD-Almost) is always satisfied withγ=1.We now derive an equivalent representation of (3.7) in terms of expected utilities. Theorem 3.8 below states the result.Theorem 3.8LetX,Ybe random vectors with support in[0,1]mandV∈Lm(Δ). Then, forn∈{1,2},X▶̲(n)s(γ)Yif and only if(3.8)Einfu∈U∼nEu(VTX)-u(VTY)|V⩾-γ,whereU∼1is the set of increasing functions u on [0,1] withu(1)-u(0)⩽1andU∼2is the set of increasing continuous concave functions u on [0,1] withu′(0+)⩽1(u′(0+)is the right derivative ofu(·)at 0).See Appendix B.3.□At first sight, it appears that Theorem 3.8 restricts the class of utility functions that can be considered due to the conditionsu(1)-u(0)⩽1andu′(0+)⩽1. The corollaries below show that this is not the case, since arbitrary utility functions in [0,1] can be normalized to satisfy those conditions. Theorem 3.8 helps to interpret the meaning of the parameterγthat appears in the definition of (SWD-Almost) and indicates how much we are willing to relax such a condition, with the tolerance measured in “utility values.” To see that, consider two random variablesξandζwith values on [0,1], and letu(x)be a bounded nondecreasing concave utility function on[0,1]. It is easy to define a linear transformation ofu(x)(say,uˆ(x)=h+ku(x)for some constants h andk>0) such that onuˆ(x)∈[0,1]for all x. By Theorem 4.1 in Keeney and Raiffa (1976),uˆpreserves the strategic equivalence of u, i.e., the preference ranking of any two alternatives is the same when using either u oruˆ. This guarantees that the standard univariate second order dominance betweenξandζis equivalent toE[u(ξ)]⩾E[u(ζ)]for all nondecreasing concave functions u well defined on[0,1]and satisfying a boundary condition:(3.9)u(0)=0,u(1)⩽u(∞)=1.Castagnoli and Li Calzi (1996) interpret the utility function u satisfying boundary condition (3.9) as the c.d.f of a random utility indexθ. This probabilistic interpretation of utility function leads to an important observation that the expected utility of random variableξcan be viewed to quantify the probability ofξbeing greater thanθ. Specifically,(3.10)E[u(ξ)]=E[Pξ⩾θ|ξ]=E[E[1ξ⩾θ|ξ]]=E[1ξ⩾θ]=Pξ⩾θ.We denote byΘthe set of all nonnegative random variables with concave c.d.f’s. It follows by (3.10) thatξ⊵(2)ζif and only if(3.11)Pξ⩾θ⩾Pζ⩾θ,∀θ∈Θ.Hence, (3.8) under the second order stochastic dominance can be represented as(3.12)T(X,Y)=Esupθ∈ΘPVTX⩾θ|V-PVTY⩾θ|V⩽γ,which shows that the tolerance level is the expected value of the maximum difference between the conditional probabilitiesPVTX⩾θ|VandPVTY⩾θ|V.The formulation of univariate nth order stochastic dominance, either in terms of integrals of cumulative distribution functions or in terms of expected utilities (as in (2.2) and (2.3)) does not lend itself to a practical method for testing that relationship. For the case when the random variables being compared (say, X and Y) have finite support, Fishburn and Vickson (1978) propose a linear program that can be used to test for the second order dominance. Dentcheva and Ruszczyński (2003) describe an alternative representation based on a set of linear inequalities. This interpretation is particularly useful in the context of optimization problems with stochastic dominance constraints. Luedtke (2008) proposes yet another representation, involving a smaller number of linear inequalities. Inequalities for the univariate first order dominance are studied in Luedtke (2008),Noyan et al. (2006) and Noyan and Ruszczyński (2008).The situation becomes much more complicated in the case of multivariate stochastic dominance. Armbruster and Luedtke (2010) propose a representation for the “full” multivariate first and second order dominance, i.e.,E[u(X)]⩾E[u(Y)]for all multidimensional functions nondecreasing (concave) functionsu:Rn↦R. The result is a linear program for the case of the second order dominance, and an integer program for the case of the first order. As mentioned in Section 1, however, full multivariate dominance can be a conservative notion. Homem-de-Mello and Mehrotra (2009) study the case of the robust multivariate linear second order dominance defined in (RSD) (withn=2) and show that there exists a representation with finitely many linear inequalities. Since the number of inequalities may be large, they propose a cut generation method to selectively obtain these inequalities when solving optimization problems. A concave minimization problem is solved to generate the cuts.In what follows, we discuss formulations for the three concepts of stochastically weighted dominance described in Section 3 for the first and second orders. We present easy-to-check inequalities that can be used to test for dominance. These inequalities are convenient when the goal is simply to compare two random vectors.We also consider a case where the dominance relationship appears as a constraint in an optimization problem. This is an attractive approach for managing risks in an optimization setting. While optimizing an objective function, one avoids high risks by choosing options that are preferable to a random benchmark. In general, we write a stochastic dominance constrained optimization model as(4.1)minz∈Zf(z)s.t.X(z)⊵(n)•Y,swhere z represents a decision vector,Z⊂Rdrepresents a deterministic feasible region,f:Z→Ris the objective to be minimized, X maps the decision vector to a random vector inRm,Yis a given reference random vector, and⊵(n)•indicates some nth order stochastic dominance relationship. We show that the three concepts of stochastically weighted dominance described in Section 3 (for the first and second orders) can also be written in terms of systems of linear (integer) inequalities, which are more easily incorporated into an optimization algorithm that can be used to solve (4.1).We assume throughout this section that the distributions ofV,YandX(z)for anyz∈Zare finite. We also assume that the random vector V is independent ofX(z)and Y. The latter assumption is made just to alleviate the notation and can be easily dropped in the discussion that follows. Under these assumptions, the distributions of these random vectors can be written as(4.2)P(X(z)=xi(z))=P(X(z)=xi(z)|V)=pi,i∈I≔{1,…,I},(4.3)P(Y=yj)=P(Y=yj|V)=qj,j∈J≔{1,…,J},(4.4)P(V=vk)=μk,k∈K≔{1,…,K}.In the context of the optimization problem (4.1),X(·)can be viewed as a discrete function-valued random vector taking valuesxi(·),i=1,…,I, where eachxi(·)is a mapping fromZtoRm. Thus, the random vectorX(z)takes on valuesxi(z)∈Rm,i=1,…,I. When the above random variables have a large (or infinite) number of outcomes, sampling methods are required; a detailed analysis, however, is out of the scope of the present paper.Recall from Theorem 3.3 that (SWD-Avg)X(z)▶̲(n)wYcan be reformulated as a univariate stochastic dominance relationship. Define againξ(z):=VTX(z)andζ≔VTY. Denote the distribution ofξandζas(4.5)P(ξ(z)=ξi(z))=νi,i∈A≔{1,…,A},(4.6)P(ζ=ζj)=ρj,j∈B≔{1,…,B}.Also suppose without loss of generality thatζ1<⋯<ζB. It follows from Proposition 3.3 thatX(z)▶̲(n)wYif and only ifξ(z)⊵(n)ζ.Proposition 4.1 below shows that inequality (2.2) only needs to be tested for finitely many values ofη—more specifically, only for the values ofηequal to the outcomes ofζ. A similar result is shown in Dentcheva and Ruszczyński (2003), but we present it here for reference.Proposition 4.1For a givenz∈Z, letξ(z)andζbe random variables with distributions given by(4.5) and (4.6). Then forn∈{1,2}, the finite set{ζ1,…,ζB}contains an optimal solution ofmaxη∈RFn(ξ(z);η)-Fn(ζ;η).Recall that we can writeF2(ξ(z);η)=E[(η-ξ(z))+]andF1(ξ(z);η)=E[1ξ(z)⩽η]. By Proposition 4.1, we have thatξ(z)⊵(2)ζif and only if(4.7)∑i∈Aνi(ζk-ξi(z))+⩽∑j∈Bρj(ζk-ζj)+,∀k∈B,andξ(z)⊵(1)ζif and only if(4.8)∑i∈Aνi1ξi(z)<ζk⩽∑j<kρj,∀k∈B.Inequalities (4.7) and (4.8) can easily be checked to test for (SWD-Avg) between two vectors. As discussed above, though, these inequalities are not convenient in the context of the optimization problem (4.1), where eachξi(z)is a function of the decision vector z, and the inequalities contain nonlinearities (in the case of (4.7)) and discontinuities (in the case of (4.8)). We can, however, reformulate those inequalities so that we obtain a system of linear (integer) inequalities as a function of theξi(z)’s. The complexity of the resulting problem, of course, depends on the particular dependence ofξ(z)on z, which is determined by the dependence of X on z. For example, if eachxiis a linear function of z then problem (4.1) becomes a standard optimization problem with linear (integer) constraints.We proceed now with the reformulation. By introducing continuous variablestikto represent the terms(ζk-ξi(z))+, (4.7) can be used to derive a linear formulation ofξ(z)⊵(2)ζwith AB variables and(A+1)Bconstraints (see Dentcheva and Ruszczyński, 2003):(4.9)∑i∈Aνitik⩽∑j∈Bρj(ζk-ζj)+,∀k∈B,ξi(z)+tik⩾ζk,∀i∈A,k∈B,tik⩾0,∀i∈A,k∈B.Similarly, using binary variablestikfor the terms1ξi(z)<ζk, we obtain the mixed integer linear formulation from (4.8) with AB binary variables and(A+1)Bconstraints(4.10)∑i∈Aνitik⩽∑j<kρj,∀k∈B,ξi(z)+Miktik⩾ζk,∀i∈A,k∈B,tik∈{0,1},∀i∈A,k∈B.HereMikis sufficiently large to guarantee that the corresponding constraints are redundant whentik=1. Note that the constantMikmust ensure feasibility for allz∈Z. We assume that for each i there exists a constantlisuch thatvTxi(z)⩾lifor allz∈Zand allv∈Δ(such an assumption is satisfied, for example, ifxi(·)is continuous andZis compact). Then, we can takeMik=ζk-lifor all i and k. Although this formulation was presented in Noyan et al. (2006) and Noyan and Ruszczyński (2008), the authors do not recommend using this formulation for computation, since the linear programming relaxation bounds are too weak.We introduce next more efficient representations of (SWD-Avg) for the first and second order cases. It follows from Theorem B.1 from Armbruster and Luedtke (2010) (stated in Appendix B for completeness) thatξ(z)⊵(2)ζis equivalent to(4.11)∑j∈Bζjtij⩽νiξi(z),∀i∈A,∑j∈Btij=νi,∀i∈A,∑i∈Atij=ρj,∀j∈B,tij⩾0,∀i∈A,j∈B.The system (4.11) consists of AB variables and2A+Binequalities. Similarly, using Theorem B.3, we rewriteX(z)▶̲(1)wYas a mixed integer linear system as follows:(4.12)∑j∈Btijζj⩽ξi(z),∀i∈A,∑j∈Btij=1,∀i∈A,∑i∈Aνi∑j=1k-1tij⩽∑j=1k-1ρj,∀k∈B/{1}.tij∈{0,1},∀i∈A,j∈B.The above system has AB binary variables and2A+B-1inequalities.We turn now to the stochastically weighted dominance relationship with chanceα(SWD-Chance), denoted byX(z)▶̲(n)c(α)Y(n = 1 or 2). We use the identitiesF2(ξ(z);η)=E[(η-ξ(z))+]andF1(ξ(z);η)=E[1ξ(z)⩽η], together with Proposition 4.1, to writeX(z)▶̲(2)c(α)Yas(4.13)∑k∈Kμk1supl∈J∑i∈Ipi(vkTyl-vkTxi(z))+-∑j∈Jqj(vkTyl-vkTyj)+⩽0⩾1-α.The above system can be alternatively expressed as(4.14)∑k∈Kμksupl∈J1∑i∈Ipi(vkTyl-vkTxi(z))+>∑j∈Jqj(vkTyl-vkTyj)+⩽α.Similarly, we writeX(z)▶̲(1)c(α)Yas(4.15)∑k∈Kμk1supl∈J∑i∈Ipi1vkTxi(z)<vkTyl-∑j∈Jqj1vkTyj<vkTyl⩽0⩾1-α,which can be alternatively expressed as(4.16)∑k∈Kμksupl∈J1∑i∈Ipi1vkTxi(z)<vkTyl>∑j∈Jqj1vkTyj<vkTyl⩽α.As before, the above inequalities can easily be checked to test for stochastically weighted dominance with chanceα. We use Theorem B.1 to derive inequalities that are more suitable for the optimization problem (4.1). By introducing binary variablesskso thatskis equal to 0 ifvkX(z)⊵(2)vkYand equal to 1 otherwise, it follows that (4.14) can be formulated byIJKvariables, K binary variables, and(2I+J)K+ 1 constraints:(4.17)∑j∈JvkTyjtijk⩽pivkTxi(z)+Miksk,∀i∈I,k∈K,(4.18)∑j∈Jtijk=pi,∀i∈I,k∈K,(4.19)∑i∈Itijk=qj,∀j∈J,k∈K,(4.20)∑k∈Kμksk⩽α,(4.21)tijk⩾0,∀i∈I,j∈J,k∈K,(4.22)sk∈{0,1},∀k∈K.Again,Mikis a large enough number to ensure that constraints (4.17)–(4.22) are redundant whensk=1. Under the assumption discussed earlier thatxi(z)(·)is bounded from below, we can chooseMik=maxj∈JvkTyj-ϕik, whereϕik⩽vkTxi(z)for allz∈Z.An alternative formulation to (4.16) using Theorem B.3 from Luedtke (2008) (stated in Appendix B for completeness) is given as follows:(4.23)∑j∈JvkTyjtijk⩽vkTxi(z)+Miksk,∀i∈I,k∈K,(4.24)∑j∈Jtijk=1,∀i∈I,k∈K,(4.25)∑i∈Ipi∑j=1l-1tijk⩽∑j=1l-1qj,l∈J/{1},k∈K,(4.26)∑k∈Kμksk⩽α,(4.27)tijk∈{0,1},∀i∈I,j∈J,k∈K,(4.28)sk∈{0,1},∀k∈K.The above formulation consists of(IJ+1)Kbinary variables and(2I+J-1)Kconstraints.A disadvantage of formulations (4.17)–(4.22), (4.24)–(4.28) is that they involve “big M”-type constraints in (4.17) and (4.23), which are likely to lead to weak linear programming relaxations. We now provide alternative formulations avoiding the “big M” in the following theorems. Note that these theorems do not reduce the numbers of variables and constraints.Theorem 4.2For eachi∈Iandk∈K, suppose we can chooseϕiksuch thatϕik⩽vkTxi(z)for allz∈Z. Then,X(z)▶̲(2)c(α)Yif and only if there exist variablestijkandskfori∈I,j∈J, andk∈Ksuch that(4.20)–(4.22)hold and(4.29)∑j∈JvkTyj-ϕiktijk⩽pivkTxi(z)-ϕik,∀i∈I,k∈K,(4.30)∑j∈Jtijk=pi(1-sk),∀i∈I,k∈K,(4.31)∑i∈Itijk=qj(1-sk),∀j∈J,k∈K.See Appendix B.4.□For eachi∈Iandk∈K, suppose we can chooseϕiksuch thatϕik⩽vkTxi(z)for allz∈Z. Then,X(z)▶̲(1)c(α)Yif and only if there exist binary variablestijkandskfori∈I,j∈J, andk∈Ksuch that4.26, 4.27. 4.28 hold and(4.32)∑j∈JvkTyj-ϕiktijk⩽vkTxi(z)-ϕik,∀i∈I,k∈K(4.33)∑j∈Jtijk=1-sk,∀i∈I,k∈K(4.34)∑i∈Ipi∑j=1l-1tijk⩽∑j=1l-1qj,∀l∈J/{1},k∈K.See Appendix B.4.□IfX(z)⩾0a.s. for allz∈Z, we can letϕik=0in Theorems 4.2 and 4.3.We now discuss the case of almost stochastically weighted dominance (SWD-Almost), denoted byX(z)▶̲(k)s(γ)Y. By using again the identitiesF2(ξ;η)=E[(η-ξ)+]andF1(ξ;η)=E[1ξ⩽η], together with Proposition 4.1, we can derive an inequality for that dominance relationship. We writeX(z)▶̲(2)s(γ)Yas(4.35)∑k∈Kμkmaxl∈J∑i∈IpivkTyl-vkTxi(z)+-∑j∈JqjvkTyl-vkTyj+⩽γ,andX(z)▶̲(1)s(γ)Yas(4.36)∑k∈Kμkmaxl∈J∑i∈Ipi1vkTxi(z)<vkTyl-∑j∈Jqj1vkTyj<vkTyl⩽γ.To derive inequalities that are more suitable for the optimization problem (4.1), we introduce(IJ+1)Kintermediate variablesskandtilk. Now, (4.35) can be represented by(I+1)JK+1inequalities(4.37)∑k∈Kμksk⩽γ,sk⩾∑i∈Ipitilk-∑j∈JqjvkTyl-vkTyj+,l∈J,k∈K,vkTxi(z)+tilk⩾vkTyl,i∈I,l∈J,k∈K,tilk⩾0,i∈I,l∈J,k∈K.Analogously, using K continuous variablesskand IJK binary variablestilk, we reformulate (4.36) by(I+1)JK+1inequalities(4.38)∑k∈Kμksk⩽γ,sk⩾∑i∈Ipitilk-∑j∈Jqj1vkTyl-vkTyj,l∈J,k∈K,vkTxi(z)+Milktilk⩾vkTyl,i∈I,l∈J,k∈K,tilk∈{0,1},i∈I,l∈J,k∈K.As before, the constantsMilkmust be large enough numbers to ensure redundancy whentilk=1; for example, we can defineMilk≔vkTyl-ϕik, whereϕik⩽vkTxi(z)for allz∈Z. As mentioned earlier, large constants likely yield weak linear programming relaxations of (4.38). Below, we propose alternative formulations ofX(z)▶̲(2)s(γ)YandX(z)▶̲(1)s(γ)Y.Theorem 4.5For eachi∈Iandk∈K, suppose we can chooseϕiksuch thatϕik⩽vkTxi(z)for allz∈Z. Letπk1⩽…⩽πkJbe a sorting permutation ofvkTy1,…,vkTyJandπk0≔minϕik,πk1. Then,X(z)▶̲(2)s(γ)Yif and only if(4.39)∑k∈Kμksk⩽γ,(4.40)∑j=0Jπkjtijk⩽vkTxi(z),i∈I,k∈K,(4.41)∑j=0Jtijk=1,i∈I,k∈K,(4.42)∑i=1Ipi∑j=0l-1(πkl-πkj)tijk-sk⩽∑j=1l-1qj(πkl-πkj),l∈J,k∈K,(4.43)tijk⩾0,i∈I,j∈J∪{0},k∈K.See Appendix B.4.□Theorem 4.5 provides a reformulation of (SWD-Almost) in the second order with(IJ+I+1)Kvariables and(2I+J)K+1constraints, which reduces(J-2)IKconstraints at the cost of IK additional variables in comparison with (4.37). This reformulation is qualified for the case with a large J. For the case of the first order dominance, the new reformulation given in the following theorem increases IK integer variables but reduces(J-2)IKconstraints.Theorem 4.6For eachi∈Iandk∈K, suppose we can chooseϕiksuch thatϕik⩽vkTxi(z)for allz∈Z. Letπk1⩽…⩽πkJbe a sorting permutation ofvkTy1,…,vkTyJandπk0≔minϕik,πk1. Then,X(z)▶̲(1)s(γ)Yif and only if(4.39)–(4.41)hold and(4.44)∑i∈Ipi∑j=0l-1tijk-sk⩽∑j=1l-1qj,l∈J,k∈K,(4.45)tijk∈{0,1},i∈I,j∈J∪{0},k∈K.See Appendix B.4.□We now demonstrate the usefulness of the ideas laid out in the previous section using a capital budgeting problem. Graves et al. (2003) study a project selection problem where projects with random cash flows have different times to maturity. The authors point out the inadequacy of using a fixed risk-adjusted discount factor to account for both risk and time, and propose to separate those two factors by accounting for risk via a utility function and then for time through a fixed discount rate.Let us consider the following specific example (see Table 1). Project A will have a payoff of $1 or $2 with probability 0.5 in Year 4. Project B will have a payoff of $3 or $4 with probability 0.5 in Year 10. Both projects have the same variance in payoff, consequently according to Graves et al. (2003) both projects “are exposed to same risk”. Graves et al. (2003) critique the use of a single risk-adjusted discount rate because it will over-discount a cash flow farther into the future. To see that, suppose that the company makes its decision based on expected payoff. It will choose Project B if it uses a discount rate of 10% without adjusting for any risk. However, if it decides to use project risk-adjusted discount rate of 16%, Project A will be chosen. This is because the classical risk-adjusted NPV approach does not account for time-risk and over-penalizes a long term project. The solution proposed by Graves et al. (2003) to the above problem is to separate time and cash flow risk. For example, one could choose a utility function to represent risk-aversion, calculate the expected utility of both projects, and then calculate the NPV of the resulting amount. Alternatively, one could calculate the NPV of both projects and the calculate the expected utility of the resulting values. The authors illustrate that approach by choosing a particular utility function of the form1-e-ax, where x is the NPV, and a is the constant absolute risk aversion (CARA) coefficient of the utility function. Although the approach proposed by Graves et al. (2003) provides a better way to model the problem than using a risk-adjusted rate, one may still question its sensitivity to their particular choice of the utility function and the discount rate.We address this issue by applying our concepts of stochastically weighted dominance. In our approach the discount rates are modeled as random quantities, and instead of fixing a utility function, we verify a preference relationship between the projects using the entire class of risk-averse utility functions (i.e., the class of nondecreasing concave functions). The idea of randomizing a discount rate has been widely investigated in the literature (see e.g. Hull, 2010 and references therein), but not in the context of stochastic dominance.Graves et al. (2003) used the risk-free discount rate of 10%. In order to keep our data similar, we also assume that the random discount risk-free ratesrifor yeari=1,…,10,are identically and independently distributed with mean 10%. To simplify the calculations, we assume thatritakes values(10-d)%and(10+d)%with equal probability. Accordingly, we obtain the ith component of the random vector of weights V in stochastically weighted dominance asVi=1∏j=1i(1+rj). Also denote the ten-year random net cash flow vector of projects A and B byCa=(C1a,…,C10a)andCb=(C1b,…,C10b), respectively (note that all components ofCaare zero except the fourth one, and all components ofCbare zero except the tenth one since the payoffs of A and B are in years 4 and 10, respectively).

@&#CONCLUSIONS@&#
