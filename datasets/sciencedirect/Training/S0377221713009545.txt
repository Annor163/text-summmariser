@&#MAIN-TITLE@&#
Time consistency and risk averse dynamic decision models: Definition, interpretation and practical consequences

@&#HIGHLIGHTS@&#
An economic interpretation for the recursive time consistent objective function.A new methodology to compute the sub-optimality gap of a time inconsistent policy.We illustrate developed concepts with a CVaR-based portfolio selection example.

@&#KEYPHRASES@&#
Time consistency,Dynamic stochastic programming,Risk aversion,Conditional Value-at-Risk (CVaR),Portfolio selection,

@&#ABSTRACT@&#
This paper aims at resolving a major obstacle to practical usage of time-consistent risk-averse decision models. The recursive objective function, generally used to ensure time consistency, is complex and has no clear/direct interpretation. Practitioners rather choose a simpler and more intuitive formulation, even though it may lead to a time inconsistent policy. Based on rigorous mathematical foundations, we impel practical usage of time consistent models as we provide practitioners with an intuitive economic interpretation for the referred recursive objective function. We also discourage time-inconsistent models by arguing that the associated policies are sub-optimal. We developed a new methodology to compute the sub-optimality gap associated with a time-inconsistent policy, providing practitioners with an objective method to quantify practical consequences of time inconsistency. Our results hold for a quite general class of problems and we choose, without loss of generality, a CVaR-based portfolio selection application to illustrate the developed concepts.

@&#INTRODUCTION@&#
Dynamic decisions under uncertainty are very common in financial planning and financial engineering problems. Based on Bellman’s equations and on the well behaved properties of the risk neutral formulation, several models have been developed for different applications such as portfolio selection, asset and liability management, scheduling and energy planning. Indeed, some important works, for instance Pereira and Pinto (1991), Rockafellar and Wets (1991), Guigues and Römisch (2012a, 2012b), Philpott and de Matos (2012), Philpott, de Matos, and Finardi (2013), developed efficient algorithms to solve these problems. However, in order to have a risk aversion extension, such as in Ruszczyński (2010), Shapiro (2011), Shapiro, Tekaya, da Costa, and Soares (2013), one should choose carefully how to introduce the well known risk measures into these problems.In this context, the Conditional Value at Risk (CVaR) became one of the most widely used risk measures for three reasons: first, it is a coherent risk measure (see Artzner, Delbaen, Eber, & Heath (1999)); second, it has a clear and suitable economic interpretation (see Rockafellar & Uryasev (2000) and Street (2009)); and last, but not least, it can be written as a linear stochastic programming model as shown in Rockafellar and Uryasev (2000). For these three reasons, the CVaR has been applied to static (see e.g. Krokhmal, Palmquist, & Uryasev (2002), Mansini, Ogryczak, & Speranza (2007), Sawik (2012) among many others in the context of portfolio optimization) and even to dynamic models. However, to choose a coherent risk measure as the objective function of a dynamic model is not a sufficient condition to obtain suitable optimal policies. In the recent literature, time consistency is shown to be one basic requirement to get suitable optimal decisions, in particular for multistage stochastic programming models. Papers on time consistency are actually divided in two different approaches: the first one focuses on risk measures and the second one on optimal policies.The first approach states that, in a dynamic setting, if some random payoff A is always riskier than a payoff B conditioned to a given timet+1, than A should be riskier than B conditioned to t. It is well known that this property is achieved using a recursive setting leading to so called time consistent dynamic risk measures proposed by various authors, e.g., Bion-Nadal (2008), Detlefsen and Scandolo (2005), Riedel (2004), Cheridito, Delbaen, and Kupper (2006), Roorda and Schumacher (2007), Kovacevic and Pflug (2009). Other weaker definitions, like acceptance and rejection consistency, are also developed in these works (see Cheridito et al. (2006), Kovacevic & Pflug (2009) for details).The second approach, formally defined by Shapiro (2009), is on time consistency of optimal policies in multistage stochastic programming models. The interpretation of this property given by the author is the following: “at every state of the system, our optimal decisions should not depend on scenarios which we already know cannot happen in the future”. This interpretation is an indirect consequence of solving a sequence of problems whose objective functions can be written recursively as the former cited time consistent dynamic risk measures. It is shown in Shapiro (2009) for instance that if, for every state of the system, we want to minimize the CVaR of a given quantity at the end of the planning horizon, we would obtain a time inconsistent optimal policy. Indeed, this sequence of problems does not have recursive objective functions and the optimal decisions at particular future states might depend on scenarios that “we already know cannot happen in the future”. However, if fort=0we want to minimize the CVaR of a given quantity at the end of the planning horizon and fort>0we actually follow the dynamic equations of the first stage problem, then we obtain a time consistent optimal policy even though it depends on those scenarios we already know cannot happen. On the other hand, one can argue that this policy is not reasonable because fort>0the objective function does not make any sense economically speaking.In this paper, we use a conceptual definition for time consistency of optimal policies: a policy is time consistent if and only if the future planned decisions are actually going to be implemented. In the literature, time inconsistent optimal policies have been commonly proposed, in particular Bäuerle and Mundt (2009) in Sections 3 and 4.1 and Fábián and Veszprémi (2008) have developed portfolio selection models using CVaR in a time inconsistent way. In our work, we show with a numerical example that a time inconsistent CVaR based portfolio selection model can lead to a suboptimal sequence of implemented decisions and may not take risk aversion into account at some intermediate states of the system. Then, we propose a methodology to compute the sub-optimality gap as the difference of the objective function evaluated with two different policies: the one planned at our current stage and the one actually implemented in the future. We use the time consistent risk-averse dynamic stochastic programming model with a recursive objective function and compare its optimal policy to the time inconsistent one. Other alternatives have been proposed by Boda and Filar (2006) and Cuoco, He, and Issaenko (2008), however none of them used the recursive set up of time consistent dynamic risk measures.Since the lack of a suitable economic interpretation for this recursive set up is one of the main reasons why it is not commonly used, we prove for a more general set of problems that this objective function is the certainty equivalent w.r.t. the time consistent dynamic utility defined as the composed form of one period preference functionals. Then, with a clear economic interpretation for the objective function of a general set of problems and consequently of the portfolio selection application, we discuss the developed results with a numerical example.This paper aims at closing a conceptual gap between theory and practice regarding time-consistent risk-averse policies in a stochastic programming framework. The first contribution of this work is an intuitive economic interpretation for the complex time-consistent recursive objective function. Based on rigorous proofs provided in the paper, the proposed economic interpretation is entirely new in the dynamic risk-averse stochastic programming context. Additionally, we discourage time-inconsistent models by arguing that the associated policies are sub-optimal. Thus, the second contribution is the development of a new methodology to compute the sub-optimality gap associated with a time-inconsistent policy, providing practitioners with an objective method to quantify practical consequences of time inconsistency. Our results hold for a quite general class of problems and we choose, without loss of generality, a CVaR-based portfolio selection application to illustrate the developed concepts. Numerical results presented in the paper aim at reinforcing intuition and interpretation of the reader regarding theoretical results.In this paper, we assume a multistage setting with a finite planning horizon T. We consider a probability space(Ω,F,P)with a related filtrationF0⊆…⊆FT, whereF0=∅,ΩandF=FT.Since our application is on portfolio selection, we use a unique notation for all models developed here. The sets, stochastic processes, decision and state variables involved are defined in Tables 1 and 2.Without loss of generality, we assume that there is a risk free asset, indexed byi=1, with null excess return for each state of the system, i.e.,r1,t(ω)=0, for allt∈H∪{T}and allω∈Ω. Moreover, we assume thatWt,ri,t,xi,t∈L∞(Ft), for allt∈H∪{T}, whereL∞(Ft)denotes the linear space of the equivalence classes of almost surely boundedFt-measurable random variables on(Ω,F,P).Let W be anFmeasurable function and consider a realization sequencer¯[1,t]=r¯1,…,r¯t′of the asset returns. Then, we denote the conditional and unconditional expectations byEW|r¯[1,t]=EW|r[1,t]=r¯[1,t]andEW, respectively.We also use the negative of the CVaR developed by Rockafellar and Uryasev (2000) as an “acceptability” measure (see Kovacevic & Pflug (2009) for details) whose conditional and unconditional formulations are defined respectively as(1)ϕtα(W,r¯[1,t])=-CVaRα(W|r¯[1,t])=supz∈Rz-E[(W-z)-|r¯[1,t]]1-αandϕ0α(W)=-CVaRα(W)=supz∈Rz-E[(W-z)-]1-αat probability levelα∈(0,1)(respectively significance level1-α), wherex-=-min(x,0). The supremum in (1) is attained byz∗being the conditional(1-α)-quantile of W, givenr¯[1,t].Note that,E·|r¯[1,t],E·,ϕtα·,r¯[1,t]andϕtα·are real valued functions, mapping fromL∞(F)toR. It is also important to note that all constraints represented in this paper are defined for almost everyω∈Ω(in thePa.s. sense) that affects the objective function. For instance, if the objective function of a particular optimization problem is a conditional expectationE[·|r¯[1,t]], then the constraints of this problem are defined for almost everyω∈{ω¯∈Ω|r[1,t](ω¯)=r¯[1,t]}.The major reason for developing dynamic (multistage) models instead of static (two-stage) ones is the fact that we can incorporate the flexibility of dynamic decisions to improve our objective function. In other words, the possibility of changing a policy after the realization of some random variables increases the objective function (for a maximization problem) and allows the first stage decisions to be less conservative than their counterpart in the static case. However, it does not make any sense to incorporate this flexibility if the intermediate decisions are not actually going to be implemented.In this context, we based our findings on the following definition of time consistency: an optimal policy is time consistent if and only if the future planned decisions are actually going to be implemented. Only under this property we guarantee that the flexibility and optimality of a dynamic policy will not be polluted by any spurious future planned decisions. Thus, the first stage decisions of a time inconsistent policy are in general suboptimal considering that this policy would not be followed in the future.In a multistage stochastic programming context, a policy is a sequence of decisions for each stage and for each scenario (a realization of the uncertainty). As in Shapiro (2009), one has to define which (multistage) optimization problem should be solved when the current time is a particular staget∈Hof the planning horizon. When the current time ist=0, we solve the corresponding optimization problem and obtain the first stage optimal decision and the future planned optimal policy. This policy is time consistent if and only if these future planned decisions for each scenario are also optimal for each problem when the current time ist>0.In order to motivate this discussion, we develop a CVaR-based portfolio selection model which incorporates the well known mean-risk trade-off presented by Markowitz (1952). As a coherent risk measure, the CVaR should be a suitable way to assess risk, however we want to point out the fact that if one chooses a dynamic model, time consistency should also be take into account. Assessing risk in a time inconsistent way may lead to a time inconsistent policy and therefore to a suboptimal sequence of implemented decisions.In Sections 2.1 and 2.2, we compare a time inconsistent formulation to the recursive time consistent alternative developed for a CVaR-based portfolio selection problem. Numerical results are presented to reinforce intuition and interpretation of the reader. For sake of simplicity, we consider a small instance with three stages and two assets where the solution is obtained with standard linear programming techniques. In Section 2.3, we propose a new way of computing the sub-optimality gap induced by an inconsistent policy. We then perform in Section 2.3 a sensitivity analysis of the sub-optimality gap by varying planning horizon T and risk aversion levelλfor the same portfolio selection problem proposed in Section 2.1.The portfolio selection problem is normally formulated to consider the mean-risk trade-off. Some models use the expected value as the objective function with a risk constraint while others minimize risk with a constraint on the expected value. In this paper, we follow the well known approach to combine these two methods by defining our objective function as a convex combination of the expected value and the acceptability measure previously stated. In other words, the investor wants to maximize its expected return and also minimize risk, given his current state. It is very important to note that the planning horizon is a fixed date in the future and, depending on the investor’s current state, he/she solves a different optimization problem.Then, we define the problemQτWτ,r¯[1,τ]solved by the investor, given his/her current stageτand the current realizationr¯[1,τ]of the random process, as(2)maximizeW[τ+1,T],x[τ,T-1](1-λ)E[WT|r¯[1,τ]]+λϕτα(WT,r¯[1,τ])(3)subjecttoWt+1=∑i∈A(1+ri,t+1)xi,t,∀t∈H(τ)(4)∑i∈Axi,t=Wt,∀t∈H(τ)(5)xt⩾0,∀t∈H(τ),whereλ∈[0,1]. The objective function in (2) is the convex combination of the expected value and the acceptability measure defined in (1). The parameterλcan be interpreted as a risk aversion level as it determines how much weight in the objective is given to minimizing risk as opposed to maximizing expected return. The extreme caseλ=0corresponds to the risk neutral case. The higherλ, the higher the risk aversion of the investor as the impact of the risk measure in the objective function gets higher. The constraints consist of the budget constraint (4) stating that all the wealthWtis invested into the A assets at timet∈H(τ), where constraint (5) excludes short selling. The amountxi,tinvested in asset i at time t generates the (random) wealth(1+ri,t+1)xi,tin asset i at timet+1, which leads to the (random) total wealthWt+1by summing up over all assets in (3).Using (1), the problem can be equivalently formulated asmaximizeW[τ+1,T],x[τ,T-1],zE(1-λ)WT+λz-(WT-z)-1-α|r¯[1,τ]subjecttoWt+1=∑i∈A(1+ri,t+1)xi,t,∀t∈H(τ)∑i∈Axi,t=Wt,∀t∈H(τ)xt⩾0,∀t∈H(τ).Note that the first stage problemQ0W0is defined equivalently as:(6)maximizeW[1,T],x[0,T-1],zE(1-λ)WT+λz-(WT-z)-1-αsubjecttoWt+1=∑i∈A(1+ri,t+1)xi,t,∀t∈H∑i∈Axi,t=Wt,∀t∈Hxt⩾0,∀t∈H(τ).In order to have a numerical example, let us assume our probability space to be represented by a discrete event tree. For instance, considerT=2and the tree represented in Fig. 1, where the scenariosω∈Ω={1,2,3,4}are numbered by the terminal nodes. In our notation, a node is a subset ofΩ, e.g., the root node is defined asΩ={1,2,3,4}, the intermediate nodes as{1,2}and{3,4}and the terminal nodes as{1},{2},{3},{4}. Now, let us denoteNtthe set of nodes at stage t andFttheσ-algebra generated by it. In our example,N1=Ω,N2={1,2},{3,4}andN3={1},{2},{3},{4}.For sake of simplicity, we consider a two-asset model, i.e.,A={1,2}, and a probability measure defined asP(ω)=0.25for allω∈Ω={1,2,3,4}. The first asset indexed byi=1is risk free and it has null excess return for every state of the system, i.e.,r1,t(ω)=0for allt∈{1,2},ω∈Ω. The second one is assumed to have iid returns given byr2,t(ω)=1,∀t=1,ω∈{1,2}-0.5,∀t=1,ω∈{3,4}1,∀t=2,ω∈{1}-0.5,∀t=2,ω∈{2}1,∀t=2,ω∈{3}-0.5,∀t=2,ω∈{4}and is graphically represented in Fig. 1. It is straightforward to see that the risky asset has greater expected return and higher risk than the risk free one. This represents the mean-risk trade-off of a typical portfolio selection problem.Now, we write an equivalent deterministic linear programming model for problemQ0W0defined in (6) assuming, without loss of generality, thatW0=1. Then we have the following:(7)maximizeq,W[1,2],x[0,1],z14∑ω=14(1-λ)W2(ω)+λz-q(ω)1-αsubjecttoWt+1(ω)=∑i∈A(1+ri,t+1(ω))xi,t(ω),∀t∈H,ω∈Ω∑i∈Axi,t(ω)=Wt(ω),∀t∈H,ω∈Ωxt(ω)⩾0,∀t∈H,ω∈Ωq(ω)⩾z-W2(ω),∀ω∈Ωq(ω)⩾0,∀ω∈Ω,wherextisFt-adapted, i.e.,x0(1)=x0(2)=x0(3)=x0(4),x1(1)=x1(2)andx1(3)=x1(4), which are the well known non-antecipativity constraints. Note that q is aFT-adapted auxiliary variable to represent the CVaR as developed in Rockafellar and Uryasev (2000).Solving this problem forα=95%andλ=0.5, we have the following optimal solution:(8)x1,t∗(ω)=0.5,∀t=0,ω∈Ω0,∀t=1,ω∈{1,2}0.75,∀t=1,ω∈{3,4}x2,t∗(ω)=0.5,∀t=0,ω∈Ω1.5,∀t=1,ω∈{1,2}0,∀t=1,ω∈{3,4}.At the root node, it is optimal to split evenly the investment, while at node{1,2}everything is invested in the risky asset and at node {3,4} everything is invested in the risk free one.Now, let us suppose one period has passed and the current state is at timeτ=1and at node{1,2}. Let us write an equivalent deterministic problem forQ1(W1,r¯1), forW1=1.5andr¯1=(0,1)′as(9)maximizeq,W2,x1,z12∑ω=12(1-λ)W2(ω)+λz-q(ω)1-αsubjecttoW2(ω)=∑i∈A(1+ri,2(ω))xi,1,∀ω∈{1,2}∑i∈Axi,1=W1x1⩾0q(ω)⩾z-WT(ω),∀ω∈{1,2}q(ω)⩾0,∀ω∈{1,2}.This problem reflects what the investor would do atτ=1and at node{1,2}if the optimal decisionx0∗in (8) had been implemented. In other words, givenx1,t∗andx2,t∗fort=0, the optimal solution of (9) is the decision implemented atτ=1and at node{1,2}of an agent that maximizes the chosen acceptability measure of terminal wealth.We want to show that the optimal solutions for this problem at node{1,2}are different from the ones in (8), meaning that att=0the future planned decisions fort=1are different from the ones that are actually going to be implemented. It is also important to understand why it happens and what kind of error a investor would do with this time inconsistent policy. The optimal solution of (9) is given by the following:(10)x̃1,t∗(ω)=1.5andx̃2,t∗(ω)=0,∀t=1,ω∈{1,2}.The optimal planned strategy at node{1,2}obtained by solving (7) is to invest everything in the risky asset, while the solution of problem (9) (the one that is actually going to be implemented) is to invest everything in the risk free asset (see Eq. (10)). This happens because, in problem (7),CVaR95%(W2)=-W2(4), which is the worst case loss (scenarioω=4). Then, at node{1,2}, it is optimal in the first stage problem to choose the investment strategy with the highest expected return since this decision will not affect the terminal wealth at scenarioω=4.This example points out that a time inconsistent policy may lead to a sequence of optimal decisions where a risk-averse decision maker shows a risk neutral preference at some intermediate state. In other words, risk aversion may not be taken into account at some intermediate states of the system. Therefore, we propose a time consistent alternative that has significant advantages over the time inconsistent one since it incorporates the flexibility of a dynamic decision model ensuring that the future planned decisions are actually going to be implemented.In this section, we propose an alternative to the previous time inconsistent policy. We base our formulation on Ruszczyński and Shapiro (2006) and develop dynamic equations. Fort=T-1, we define the problemVT-1WT-1,r¯T-1as follows:maximizeWT,xT-1(1-λ)E[WT|r¯[1,T-1]]+λϕT-1α(WT,r¯[1,T-1])subjecttoWT=∑i∈A(1+ri,T)xi,T-1∑i∈Axi,T-1=WT-1xT-1⩾0.Using the definition ofϕT-1α(W,r¯[1,T-1])given in (1), we rewrite the problem as follows:maximizeWT,xT-1,zE(1-λ)WT+λz-(WT-z)-1-α|r¯[1,T-1]subjecttoWT=∑i∈A(1+ri,T)xi,T-1∑i∈Axi,T-1=WT-1xT-1⩾0.For the last period, our proposed model is to maximize the convex combination of the expected terminal wealth and the acceptability measureϕT-1αW,r¯[1,T-1]. Now, fort<T-1, we propose a nested value function, based on the conditional version of the same convex combination. Then,VtWt,r¯[1,t],∀t=0,…,T-2, is defined as follows:(11)maximizeWt+1,xt(1-λ)E[Vt+1|r¯[1,t]]+λϕtα(Vt+1,r¯[1,t])subjecttoWt+1=∑i∈A(1+ri,t+1)xi,t∑i∈Axi,t=Wtxt⩾0,whereVt+1stands forVt+1Wt+1,r[1,t+1].Equivalently tot=T-1, we rewrite problem (11) as follows:(12)maximizeWt+1,xt,zE(1-λ)Vt+1+λz-Vt+1-z-1-α|r¯[1,t]subjecttoWt+1=∑i∈A(1+ri,t+1)xi,t∑i∈Axi,t=Wtxt⩾0.For comparison purposes, we solve this model for the numerical example proposed in Section 2.1. To do so, we use the result shown in Blomvall and Shapiro (2006) that, for stage-wise independent returns such problem has a myopic optimal policy which is obtained as the solution of the following two-stage problem fort∈H:(13)maximizeWt+1,xt,zE(1-λ)Wt+1+λz-(Wt+1-z)-1-αsubjecttoWt+1=∑i∈A(1+ri,t+1)xi,t∑i∈Axi,t=Wtxt⩾0.ForW0=1, the (time consistent) optimal policy obtained by solving problem (12) is the following:x1,t∗(ω)=Wt=1andx2,t∗(ω)=0,∀t∈H,ω∈Ω.The optimal policy is always to invest the total wealth in the risk free asset. Note that this strategy is more conservative compared to the time inconsistent one, because it takes risk into account at every state of the system. Since this difference may lead to a sub-optimal solution for the time inconsistent problem, we develop in the following section a systematic way of measuring this effect on the objective function.In Section 2.1, we presented a time inconsistent example where planned and implemented policies are different. However, what we do want to know is how a time inconsistent policy impacts our objective function. The way of measuring it is computing the sub-optimality gap that concerns the disparity of the objective function we expect to obtain with our planned policy, denoted byOFplan, and the one we actually get when evaluating the policy to be implemented in the future, denoted byOFimp. Then, let us definegap=OFplan-OFimpOFplan.For instance, take the portfolio selection problem defined in (6), in particular the numerical example in subSection 2.1. The optimal valueQ0(W0)definesOFplan, i.e.,OFplan=Q0(W0). On the other hand,OFimpis obtained by computing the wealth distributionW^Tatt=Tusing the implemented decisions and then evaluate the objective function(14)OFimp=E(1-λ)W^T+λz-(W^T-z)-1-α.The terminal wealthW^Tis obtained by the following procedure:forτ∈H,ω∈Ω: doxˆτ=(xˆ1,τ,…,xˆA,τ)′←the first stage solution ofQτ(W^τ(ω),r¯[1,τ](ω))ComputeW^τ+1(ω)=∑i∈A(1+ri,τ+1(ω))xˆi,τend forwhere, forτ=0,W^τ(ω)=W0andQτ(W^τ(ω),r¯[1,τ](ω))=Q0(W0)for allω∈Ω.For this numerical example, whereT=2, we first solve the three-stage problemQ0(W0)to obtain: (1) the implemented decision atτ=0under the root node(Ω); (2) the planned decisions att=1under nodes{1,2}and{3,4}; and (3) the objective value considering the planned decisionsOFplan=Q0(W0). After that, we compute forτ=0the wealthW^τ+1(ω)under nodesω∈{1,2}andω∈{3,4}given the implemented decisionsxˆτand the corresponding asset returnsri,τ+1(ω),∀i∈A,ω∈Ω. Now forτ=1, a two-stage problem for each node{1,2}and{3,4}is solved to obtain the implemented decisions atτand compute the wealthW^T(ω)atT=2for allω∈Ω. At last, we evaluate the objective function using the implemented decisions as in (14). In this numerical example whereλ=0.5andα=95%we compute a gap of9.09%.For completeness, we run a sensitivity analysis on varyingλ∈{0,0.1,…,0.9,1}andT∈{2,3,…,9,10}. Note that, as before, we consider a two-asset model, i.e.,A={1,2}, and an event tree with2Tscenarios. Note also that the first asset indexed byi=1is risk free and it has null excess return for every state of the system, i.e.,r1,t+1(ω)=0,∀t∈H,ω∈Ω. The second asset has iid returns where the conditional probability distribution is characterized by two equiprobable realizations, i.e.,Pr2,t+1=100%|r2,t=1/2andPr2,t+1=-50%|r2,t=1/2. We present the sub-optimality gap in Table 3for differing values ofλand T to have a better assessment on how a time inconsistent policy would affect the decision process in practice.We observe that the gap can be significantly different depending on planning horizon size T and risk aversion levelλ. On the one hand, we observe a zero gap forλ∈{0,1}andT∈{2,…,10}. Forλ=0our results are validated by the fact that a risk neutral formulation ensures time consistency. Forλ=1, the preference function is too conservative in this particular example and, therefore, planned and implemented decisions are to invest everything in the risk free asset. On the other hand, forλ∈{0.4,0.5,0.6,0.7,0.9}we observe significantly high gap values for different planning horizon sizes T. We illustrate this behavior in Fig. 2where we plot for eachλ, the gap as a function of T. For a givenλ, we observe that the sub-optimality gap increases with the planning horizon until it stabilizes around a certain value. Nonetheless the gap for a smallerλincreases faster with T, the case with a largerλstabilizes at a higher gap value.To sum up, for the most aggressive and the most conservative allocation strategies, time inconsistency would not be a problem. On the other hand, for0<λ<1, time consistency do matter and can have a significant impact on the objective function. For this reason, we reassure the importance of time consistency which can be achieved by the recursive formulation illustrated in Section 2.2. The major problem of utilizing this formulation in practice is the difficulty to economically interpret it. Therefore, we develop a suitable economic interpretation for this recursive objective function based on the certainty equivalent of the related preference function.When choosing the proposed recursive set up, the problem is usually the lack of a suitable economic interpretation of the objective function. How can a investor choose a policy if he/she does not know what is actually going to be optimized? For this reason, we prove that the objective function is the certainty equivalent w.r.t. the time consistent dynamic utility generated by one period preference functionals.Let us consider a generic one period preference functionalψt:L∞(Ft+1)→L∞(Ft)and, for a particular realization sequence of the uncertaintyr¯[1,t], the related real valued functionψt(·|r[1,t]¯):L∞(Ft+1)→R. Moreover, let us define important properties and concepts ofψt(·|r[1,t]¯)that will be used to develop our main results:Translation invariance:ψtWt+1+m|r[1,t]¯=ψtWt+1|r[1,t]¯+m, whereWt+1∈L∞Ft+1andm∈R.Monotonicity:ψtXt+1|r[1,t]¯⩾ψtYt+1|r[1,t]¯for allXt+1,Yt+1∈L∞Ft+1withXt+1(ω)⩾Yt+1(ω),∀ω∈Ω.Normalization:ψt·|r[1,t]¯is normalized to zero, that isψt0|r[1,t]¯=0.Definition 1The certainty equivalentC∼t(Wt+1|r[1,t]¯)ofWt+1∈L∞(Ft+1)with respect toψt(Wt+1|r[1,t]¯)is a real valuem∈Rsuch thatψt(m|r[1,t]¯)=ψtWt+1|r[1,t]¯.Let us denote by(Ut)t∈Hthe time consistent dynamic utility function generated byψt(see Cheridito & Kupper (2009) for details). Formally speaking,Ut:L∞(FT)→L∞(Ft)is defined as follows:UT(WT)=WTandUt(WT)=ψt(Ut+1(WT)),∀t∈H,whereWT∈L∞(FT). Note that we can also use a conditional version ofUtas follows:Ut(WT|r¯[1,t])=ψt(Ut+1(WT)|r¯[1,t]),∀t∈H.The concept of certainty equivalent can also be developed for the time consistent dynamic utilityUt:Definition 2The certainty equivalentCt(WT|r[1,t]¯)ofWT∈L∞(FT)with respect toUt(WT|r[1,t]¯)is a real valuem∈Rsuch thatUt(m|r[1,t]¯)=Ut(WT|r[1,t]¯).Now, let us define the following dynamic stochastic programming model where the value function at time t depends on the decisions att-1and the realization sequence of the uncertainty until t. Thus, fort=Twe define it as follows:VT(xT-1,r¯[1,T])=WT(xT-1,r¯[1,T]),whereWT=WT(xT-1,r¯[1,T])is a real valued function.Fort∈H, we defineVt(xt-1,r¯[1,t])=supxt∈Xtψt(Vt+1(xt,r[1,t+1])|r¯[1,t]),whereXt=Xt(xt-1,r¯[1,t])is the feasible set for each time t. Note that fort=0, we haveV0=supx0∈X0ψ0(V1(x0,r1)),whereX0is a deterministic set. Then, we develop the following results.Proposition 3Ifψtis a translation invariant, monotone functional normalized to zero, then fort∈Hthe value function can be written asVt(xt-1,r¯[1,t])=supxτ∈Xτ,∀τ=t,…,T-1Ct(WT|r¯[1,t]),whereCt(WT|r¯[1,t])is the certainty equivalent ofWTw.r.t.Utconditioned on the realization sequencer¯[1,t].By definition we haveVt(xt-1,r¯[1,t])=supxt∈Xtψt(Vt+1(xt,r[1,t+1])|r¯[1,t])=supxt∈Xtψt…supxT-1∈XT-1ψT-1(WT)|r¯[1,t].Using the monotonicity ofψtand the definition ofUtwe have:(15)Vt(xt-1,r¯[1,t])=supxτ∈Xτ,∀τ=t,…,T-1ψt(…ψT-1(WT)|r¯[1,t])=supxτ∈Xτ,∀τ=t,…,T-1Ut(WT|r¯[1,t]).By the certainty equivalent definition, Definition 2, we have thatCt(WT|r¯[1,t])satisfiesUt(Ct(WT|r¯[1,t])|r¯[1,t])=Ut(WT|r¯[1,t]). It is easy to show thatUt(·|r¯[1,t])is translation invariant and normalized to zero, since its generatorsψthave the same properties. Then,Ut(Ct(WT|r¯[1,t])|r¯[1,t])=Ct(WT|r¯[1,t])and consequently,Ut(WT|r¯[1,t])=Ct(WT|r¯[1,t]).Finally we have thatVt(xt-1,r¯[1,t])=supxτ∈Xτ,∀τ=t,…,T-1Ct(WT|r¯[1,t]).□Ifψtis a translation invariant, monotone functional normalized to zero, then fort∈Hthe value function can be written asVtxt-1,r¯[1,t]=supxτ∈Xτ,∀τ=t,…,T-1C∼t…C∼T-1WT|r¯[1,t],whereC∼tandC∼t(·|r[1,t]¯)are the certainty equivalent w.r.t.ψtandψt(·|r[1,t]¯), respectively.By Definition 1, we have thatC∼t(·|r¯[1,t])satisfiesψt(C∼t(·|r¯[1,t])|r¯[1,t])=ψt(·|r¯[1,t])and using the assumption thatψtis translation invariant and normalized to zero, we haveψt(C∼t(·))=C∼t(·). Note that this property also holds true for the conditional version. Then, from Eq. (15) we have:Vt(xt-1,r¯[1,t])=supxτ∈Xτ,∀τ=t,…,T-1ψt(…ψT-1(WT)|r¯[1,t])=supxτ∈Xτ,∀τ=t,…,T-1C∼t(…C∼T-1(WT)|r¯[1,t]).□Note that we could also include intermediate “costs” as in Ruszczyński and Shapiro (2006) and our results would still hold true for a more general set of problems. It is worth mentioning that we define the feasible setsXtfort∈H, and the terminal wealth functionWTxT-1,r[1,T]generically depending on the application. For the portfolio selection problem, we define them to fit the original constraints. Then, we have thatXt(xt-1,r¯[1,t])=xt∈RA:∑i∈Axi,t=∑i∈A(1+r¯i,t)xi,t-1,X0=x0∈RA:∑i∈Axi,0=W0,WT(xT-1,r¯[1,T])=∑i∈A(1+r¯i,T)xi,T-1.For the proposed portfolio selection model, we define our one period translation invariant, monotone and normalized utility functionalψtas the convex combination of the expected value and the CVaR based acceptability measure, formally defined asψt(Vt+1)=(1-λ)E[Vt+1|r[1,t]]+λϕtα(Vt+1,r[1,t]), which is again a coherent acceptability measure. As before,Vt+1∈L∞(Ft+1)and we can write the conditional version as the real valued functionψt(Vt+1|r¯[1,t])=(1-λ)E[Vt+1|r¯[1,t]]+λϕtα(Vt+1,r¯[1,t]).The objective function of the proposed model at t is the certainty equivalent w.r.t. the time consistent dynamic utility function generated by the one period preference functional of the investor. This recursive formulation ensures time consistent optimal policies and it is also motivated by Corollary 4. The objective att=T-1is to maximize the certainty equivalent (CE) of terminal wealth w.r.t. the one period preference functionalψT-1. Indeed, we can interpret the optimal CE as the portfolio value since it is the deterministic amount of money the investor would accept instead of the (random) terminal wealth obtained by his/her optimal trading strategy. Att=T-2,…,0, the preference functionalψtis applied to the (random) portfolio value whose realizations are given by all possible optimal CE’s att+1. Thus, one obtains the following meaningful economic interpretation of the recursive objective function: the problem at time t is to maximize the certainty equivalent of the portfolio value w.r.t. the one period preference functionalψtof the investor.For instance, in our numerical example the (random) portfolio value att=1is given by the realizationsv1andv2in Fig. 3obtained by solving problem (13) for nodes{1,2}and{3,4}, respectively. The portfolio valuev0(see also Fig. 3) obtained by solving (13) fort=0is the optimal certainty equivalent of the (random) portfolio value att=1.

@&#CONCLUSIONS@&#
This paper contributes on closing the gap between theory and practice regarding time consistency and stochastic programming. It motivates and resolves one of the main conceptual issues regarding practical usage of time consistent risk-averse dynamic stochastic programming models: The complex objective function given by the recursive formulation that ensures time consistency has no clear/direct interpretation. Practitioners resist on using time consistent models because they have no intuition about what is being optimized. They rather choose a simpler and more intuitive formulation, even though it may lead to a time inconsistent and, consequently, sub-optimal policy. Therefore, we developed an intuitive economic interpretation for the complex time-consistent recursive formulation as well as a new methodology to compute the sub-optimality gap of a time inconsistent policy. Our results hold for a quite general class of problems and we choose, with loss of generality, a portfolio selection application to illustrate the developed concepts. Numerical results presented in this paper aims at reinforcing intuition and interpretation of the reader regarding our theoretical results.We prove that the recursive objective function is the certainty equivalent with respect to the time consistent dynamic utility function. We also prove that this objective is the composed form of certainty equivalents with respect to one-period preference functionals. This result gives us the intuition that at stage t the agent is maximizing the certainty equivalent with respect to his/her one-period preference functional.Moreover, we consider the conceptual definition: a policy is time consistent if and only if the future planned decisions are actually going to be implemented. Based on that, we discouraged time-inconsistent models by arguing that the associated first-stage decision is, in general, sub-optimal. With the purpose of providing practitioners with an objective way to quantify time inconsistency, we proposed a methodology to compute the related sub-optimality gap as the difference of the objective function evaluated using planned and implemented policies.For the proposed CVaR based portfolio selection problem, we compared a time-consistent formulation to an inconsistent one for the sake of showing that an inconsistent policy may not take risk aversion into account at some intermediate states of the system. We show a sensitivity analysis on the sub-optimality gap with respect to planning horizon size and risk-aversion level. We concluded that, for this example, the most aggressive and the most conservative allocation strategies, time inconsistency would not be a problem. On the other hand, for intermediate cases, time consistency does matter depending on the planning horizon.Finally, it is worth mentioning that future research regarding the assessment of the sub-optimality gap deserves attention. Applying this methodology in different modeling frameworks, applications, risk measures, and in the context of large-scale approximative algorithms, constitute relevant extentions to this subject.