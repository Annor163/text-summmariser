@&#MAIN-TITLE@&#
NICeSim: An open-source simulator based on machine learning techniques to support medical research on prenatal and perinatal care decision making

@&#HIGHLIGHTS@&#
NICeSim is flexible: It allows inclusion/deletion of any variable of interest.NICeSim is dynamic: It creates a just-in-time ML model from the loaded dataset.NICeSim provides a graphical user interface for simulation after model building.NICeSim provides qualitative and quantitative analyses.NICeSim is open-source allowing a cooperative development.

@&#KEYPHRASES@&#
Machine learning in medicine,Artificial neural networks,Support vector machine,Clinical decision making,Prenatal care,Perinatal care,

@&#ABSTRACT@&#
ObjectiveThis paper describes NICeSim, an open-source simulator that uses machine learning (ML) techniques to aid health professionals to better understand the treatment and prognosis of premature newborns.MethodsThe application was developed and tested using data collected in a Brazilian hospital. The available data were used to feed an ML pipeline that was designed to create a simulator capable of predicting the outcome (death probability) for newborns admitted to neonatal intensive care units. However, unlike previous scoring systems, our computational tool is not intended to be used at the patients bedside, although it is possible. Our primary goal is to deliver a computational system to aid medical research in understanding the correlation of key variables with the studied outcome so that new standards can be established for future clinical decisions. In the implemented simulation environment, the values of key attributes can be changed using a user-friendly interface, where the impact of each change on the outcome is immediately reported, allowing a quantitative analysis, in addition to a qualitative investigation, and delivering a totally interactive computational tool that facilitates hypothesis construction and testing.ResultsOur statistical experiments showed that the resulting model for death prediction could achieve an accuracy of 86.7% and an area under the receiver operating characteristic curve of 0.84 for the positive class. Using this model, three physicians and a neonatal nutritionist performed simulations with key variables correlated with chance of death. The results indicated important tendencies for the effect of each variable and the combination of variables on prognosis. We could also observe values of gestational age and birth weight for which a low Apgar score and the occurrence of respiratory distress syndrome (RDS) could be less or more severe. For instance, we have noticed that for a newborn with 2000 g or more the occurrence of RDS is far less problematic than for neonates weighing less.ConclusionsThe significant accuracy demonstrated by our predictive model shows that NICeSim might be used for hypothesis testing to minimize in vivo experiments. We observed that the model delivers predictions that are in very good agreement with the literature, demonstrating that NICeSim might be an important tool for supporting decision making in medical practice. Other very important characteristics of NICeSim are its flexibility and dynamism. NICeSim is flexible because it allows the inclusion and deletion of variables according to the requirements of a particular study. It is also dynamic because it trains a just-in-time model. Therefore, the system is improved as data from new patients become available. Finally, NICeSim can be extended in a cooperative manner because it is an open-source system.

@&#INTRODUCTION@&#
Machine learning (ML) algorithms have been the basis for data mining frameworks for detecting patterns in large datasets. These frameworks comprise computational solutions for many complex scenarios such as decision making in business and weather forecasting [1,2]. In the medical field, ML approaches had a great impact, being applied to a myriad of complex problems, such as providing a more precise diagnosis and prognosis for patients with severe diseases, simulating drug reactions, and predicting the probability of transplant rejection [3–5].Particularly in the clinical field, early attempts of health professionals to predict medical treatment outcomes were made exclusively through subjective procedures conceived according to the clinicians’ knowledge. However, the necessity for a more precise assessment of the outcome of clinical practices, especially in intensive care units (ICUs), led to the development of computational/mathematical methods, resulting in methods termed scoring systems [6]. As a consequence, health professionals can apply such computational tools to combine their own knowledge with mathematical measurements to make more accurate decisions.One known example of such a scoring system is APACHE II. It provides a score to assess disease severity based on 12 physiological measurements that are taken during the first 24 h that the patient is in the ICU, in addition to age and previous health status [7]. The score is an integer varying from 0 to 71, where greater values correspond to a higher risk of death. Additionally, the system provides probabilities by means of logistic regression [8]. However, according to Frize and Walker [9], APACHE II is recommended more to predict outcomes of a whole medical unit rather than an individual patient.Some years later, another well-known scoring system termed SAPS II was proposed by Le gall et al. [10]. Initially, SAPS II used 12 physiological variables, age, type of admission, and three disease-related variables. Its score values ranged from 0 to 163, and probabilities were also calculated with logistic regression. Later on, to improve the model's generality, the authors proposed an extension including other features: Sex, length of stay, patient location before ICU, clinical category, and the occurrence of drug overdose [11].MODS was proposed to measure the severity of multiple organ dysfunction as an outcome of an illness at the critical stage [12]. The score is based on six organ failures, varying from 0 to 4 for each type of failure, i.e., the maximum overall score value is 24.Vincent et al. created the SOFA system [13]. Similar to MODS, the SOFA score is based on a scale ranging from 0 to 4 to measure the degree of dysfunction for each of six organs to determine the gravity of a patient's illness. The variation in the patient's condition during the ICU stay is also taken into consideration.Although the above-mentioned works have been demonstrated to be very important in the evolution of methods to predict outcomes in critical illness, they were not designed for newborn patients. Inspecting the literature, we could find only two efforts directed to neonates admitted to ICUs.Clinical risk index for babies (CRIB) is a scoring system that takes into account birth weight, gestational age, the maximum and minimum fraction of inspired oxygen and the maximum base excess during the first 12 h, and the presence of congenital malformations [14]. CRIB has demonstrated a much higher predictive power using these attributes versus using birth weight alone, although the system has been validated only for neonates of <1500 g birth weight.Frize and Walker proposed a case-based reasoning approach for the estimation of medical outcomes and resource utilization [9]. The system is designed to assess patient status, to assist in making a diagnosis, and to facilitate the selection of a course of therapy. Their program targeted adults initially, but it was later redesigned for neonatal ICUs.It is important to note that all methods cited above are intended to be used at the patient's bedside. Our proposal here is different. Although our computational system can be easily adapted to bedside use, our main goal is to provide an approach to support medical research. In particular, we propose an open-source simulator called NICeSim that is grounded on ML techniques to facilitate studies for understanding how critical features of premature newborns affect their risk of death, to influence future medical decision-making concerning prenatal and perinatal care. Therefore, our primary objective is not delivering a real-time system or even a computational tool to assist a health professional when the illness is already in progress, but instead, to provide support for studies that clarify how new medical conduct would lead to the minimization of critical cases that result in newborn admission to ICUs.In this vein, it is crucial to design a flexible system that allows the deletion and the inclusion of attributes, so that a health professional can choose the most suitable variables to study. According to Afessa et al. [15], prediction models should periodically be updated to reflect the changes in medical practice. However, the previously proposed scoring systems have rigid variables, i.e., once the features putatively related to the outcome are chosen and implemented in the system, the user cannot change them, and is limited to work that way. In our case, the data needed in our computational system are in a specific file format called ARFF [16], which can be easily generated from the comma-separated values (CSV) format. The CSV format is available in all well-known spreadsheet applications such as OpenOffice and Excel. Therefore, the data could be edited in a spreadsheet, including all variables of interest (even some of the variables already proposed in previous methods), to be used later in our computational tool. Our programs recognize all attributes, build a just-in-time ML model, and automatically create user interface controls (sliders for numeric values, and combo boxes for nominal values) that allow a very easy manipulation of the attribute values, showing the immediate effects of the alterations in the outcome variable. These characteristics deliver a user-friendly environment that permits the efficient study of the relationship between the variables and the outcome. To our knowledge, no graphical user interface for current computational tools for ML algorithms includes the possibility of interactive simulation of attribute values to study their effects on the outcome. Hence, our system allows not only qualitative analyses, but also studies of quantitative aspects of the problem, as demonstrated in our experiments. This type of simulation might be of great utility for governments, hospitals, and related institutions that need to better understand the circumstances that lead to death in neonatal ICUs. For instance, after using the simulator to understand important correlations with newborn deaths, these results might help the government personnel in the decision to launch a large-scale national campaign to decrease the number of neonate deaths. Although other ML algorithms can be easily incorporated into NICeSim, the user can currently choose one of two algorithms to build a learning model: Support vector machine (SVM) or artificial neural network (ANN). Note that the health professional user does not need to have any ML knowledge to use the system. When choosing an algorithm, the learning process is automatic. The user can continue with the algorithm resulting in the highest accuracy, i.e., the highest number of correctly classified instances. This is shown on the screen after training. Alternatively, the user can choose a default algorithm, with which the training process is automatically started after loading the data, and begin simulation with the resulting model without worrying about how it actually works.In this work, we applied the proposed method to a dataset constructed using information on premature newborns admitted to an ICU in Brazil to understand how the attributes: Apgar scale, respiratory distress syndrome, gestational age, and birth weight affect the newborns’ risk of death. For our dataset, ANN showed a better result and is the default learning algorithm for NICeSim. Our statistical experiments using 10-fold cross validation showed an accuracy of 86.7% and an area under the receiver operating characteristic (ROC) curve of 0.84 for the positive class. Using the resulting model, the physicians that collaborated in this work, who have significant experience in intensive care, as well as a neonatal nutritionist, simulated different scenarios for the above-mentioned attributes, verifying that the predicted outcomes in these experiments showed a very good agreement with expected results described in the literature. We have demonstrated that once the simulator is fed with appropriate data, it can be a powerful tool to comprehend quantitative and qualitative characteristics of the attributes and the outcome variable. We believe that the fact that NICeSim is open source is also of great importance, because other groups might suggest improvements and extensions to this research tool, i.e., NICeSim might be improved in a cooperative manner all over the world, similarly to other open-source systems.

@&#CONCLUSIONS@&#
In this work, we propose a powerful ML framework to support medical research on prenatal and perinatal care. We validated our approach by constructing a computational tool based on the proposed method and applying it to a dataset built from a database of neonatal ICU patients in a hospital in Brazil. Although our NICeSim simulator could be easily adapted to be used as a scoring system at the patient's bedside, our primary goal was to demonstrate the great potential of our system for medical research given its great flexibility and dynamism.NICeSim is flexible because it accepts alterations of the chosen variables. Hence, each research group interested in testing different types of attributes and outcomes could build a proper dataset according to the targeted purposes. This is possible because NICeSim automatically detects the ARFF specification for each attribute and creates interface controls accordingly. Therefore, once an ARFF file is provided to our programs for any type of data, a model, user interface controls, and an attribute ranking are automatically produced.NICeSim is dynamic because it uses cutting-edge learning methods to build a just-in-time ML model. Notice that this is an important feature as well, because new instances can be added to the dataset as new patients are admitted to the ICU. Hence, future models become increasingly accurate.A current limitation of the simulation environment built in this study is that only binary classification is allowed. However, it is clear that a plethora of interesting studies concerning binary classification that are very common in several domains of science could be approached by the computational method presented here.In particular, we demonstrated the usefulness of NICeSim for studies on prenatal and perinatal care by constructing a model with a very good predictive power to simulate the effects that the variables Apgar scale, respiratory distress syndrome, gestational age, and birth weight have on the death risk of preterm neonates. Through experiments performed by three physicians with experience in intensive care as well as a neonatal nutritionist, we showed qualitative and quantitative aspects of this study, and discussed how such an analysis could be useful for investigations where the objective is to establish new medical standards, especially for public health planning.Unfortunately, we could not compare NICeSim with other scoring systems such as CRIB, because our dataset does not contain all attributes that are necessary for these systems. For instance, CRIB uses the maximum and minimum fraction of inspired oxygen and the maximum base excess during the first 12 h. Additionally, as exhaustively mentioned in the text, our goals are different from the goals of these scoring systems. We are more concerned with providing a computational environment for medical research aimed at supporting decision making in terms of prevention and collective health care.In a future effort, we intend to work with health professionals from other hospitals to further assess the reliability of our system by comparing the results of distinct groups of clinicians. In addition, although our system has only two simple screens, we intend to assess the usability of NICeSim by using metrics such as the system usability scale (SUS) [33].By including other professionals and other populations of neonates from several hospitals in the future, we will have also the possibility of building more comprehensive datasets with the specific goal of performing simulations as presented in this study. Notice that the database that originated the data used here was not intended for the purposes presented in this work. We strongly believe that constructing databases with the original objective of running the described computational simulations would maximize the results that such in silico experiments could produce. Furthermore, comprehensive databases result in a lower chance of obtaining an ML model with distorted responses, because the presence of more instances also indicates greater representativeness of distinct scenarios.Finally, considering the generality of our approach, we plan to apply our method to other medical problems.