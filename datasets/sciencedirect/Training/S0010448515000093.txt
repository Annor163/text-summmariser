@&#MAIN-TITLE@&#
Shape reconstruction from a normal map in terms of uniform bi-quadratic B-spline surfaces

@&#HIGHLIGHTS@&#
The mathematical formulation of our method is simple.The computation is not only accurate but also fast.Less memory is required to store the data.Aesthetic surfaces are generated via direct editing of normal vectors.

@&#KEYPHRASES@&#
Surface from gradients,Normal map,Uniform B-spline,Photometric stereo,Differential geometry,Editing of normal map,

@&#ABSTRACT@&#
Graphical abstract(14)[−27256−33128−32569128116411289256111281256−2725691289256−33128116411128−325611281256−9256−11128−1256−9128−1164−112827256331283256−325611281256−33128116411128−2725691289256−3256−33128−272561128116491281256111289256−9256−912827256−11128−116433128−1256−11283256−1256−11128−9256−1128−1164−912832563312827256−1256−11283256−11128−116433128−9256−912827256][h00h01h02h10h11h12h20h21h22]=[−a00c00−b00c00−a10c10−b10c10−a01c01−b01c01−a11c11−b11c11]

@&#INTRODUCTION@&#
​ This study is motivated by two modern technological needs namely, the recovery of the height field function of an object from its surface normal vectors obtained by photometric stereo techniques, and the introduction of new design methodology of streamlined aesthetic surfaces through the direct editing of normal vectors.Photometric stereo techniques, which were introduced by Woodham  [1,2], recover surface normals of an object on a per-pixel basis from a set of images captured from a fixed viewpoint under various lighting directions (see Figs. 1 and 12). In other words, photometric stereo estimates shape information in the form of surface orientation. Recently, Johnson et al.  [3] developed a system for capturing microscopic surface geometry using photometric stereo technique. When only one image is used for the reconstruction, it is known as shape from shading  [4]. A good survey of photometric stereo is given in  [5].The estimated surface normals are stored as an RGB image known as a normal map, where the RGB components correspond to thex,y,zcomponents of the surface normal as shown in Fig. 1(b). There are two major steps in photometric stereo techniques: normal reconstruction from images, and the height field functionz=f(x,y)recovery from normals. In this paper we focus on the latter problem, i.e. the height field function recovery.The essential problem in designing a propeller blade from the hydrodynamics perspective is to find a so-called camber surface which carries a prescribed load distribution such that the kinematic boundary conditionV⋅N=0is satisfied on that surface in the presence of a given flow, whereVis the flow velocity vector andNis the surface normal vector  [6]. Meanwhile free-form surfaces used in the bodies of aircrafts, high-speed trains, and automobiles have to satisfy aerodynamic functionality as well as attractive shape requirements. Although it is not easy to specify the airflow directions at the grid points, we can at least determine the tangent plane of the surface where the airflow lies at each grid point via specifying the normal vector. If the existing designs of streamlined aesthetic surfaces are available from previous designs, in whole or part, we are able to generate new designs through the direct editing of normal vectors of the input surface. In other words, we extract unit normal vectors at the grid points of the input surface, and modify them to generate a new design by computing the height field function.In this paper, we introduce a novel method to reconstruct the explicit surface of an object in terms of aC1continuous B-spline function above thexy-plane based on the normal map of the object as illustrated in Fig. 1(c) and (d). B-splines have become the de facto industry standard  [7] for representing geometric information in the CAD/CAM/CAE fields. Once objects are represented in a B-spline form, they can be used in a number of downstream applications, including numerically controlled (NC) machining  [8], isogeometric analysis  [9], and surface interrogation  [8].Our mathematical formulation for explicit surface reconstruction is based on differential geometry and geometric modeling techniques. It is a well-known fact in differential geometry that any regular surface can be locally approximated in the neighborhood of a point by a quadratic height function  [10,11]. Meanwhile the normal map generated by the photometric stereo technique stores a surface normal at each pixel, and this map is arranged over a uniform two-dimensional grid. Hence, it is natural to represent a unit segment of the height field function of an object by a graph of uniform bi-quadratic B-spline functions. Although in this study we restrict the degree of the uniform B-spline to be bi-quadratic, it can be easily extended to higher degree surfaces.In summary, the proposed method has the following advantages over existing methods:•The mathematical formulation involves only first-order derivatives of polynomial functions, and is conceptually simple.The computation is fast and accurate.The output is aC1continuous uniform bi-quadratic B-spline surface, which requires less memory to store, and can be used for a number of downstream applications, including NC machining, isogeometric analysis, and surface interrogation.

@&#CONCLUSIONS@&#
We have introduced a novel method to reconstruct a surface of an object from its surface normal vectors. This study is motivated by photometric stereo techniques, and the introduction of new design methodology of streamlined aesthetic surfaces through the direct editing of normal vectors. An explicit reconstruction is performed in terms of aC1continuous uniform bi-quadratic B-spline function on thexy-plane from a normal map of the object. The advantages of our reconstruction method can be summarized as follows: The mathematical formulation of our method is simple in that it involves only first-order derivatives of polynomial functions. The computation is not only accurate but also fast, and less memory is required to store the data. Since the output representations are in B-spline form, they can be used in a number of downstream applications, including NC machining, isogeometric analysis, and surface interrogation.Our method still has a number of limitations that require further research. One limitation is that if the input normal map includes regions with large angular differences between neighboring pixels (e.g., angles larger than 60°), the gradient of the resulting surface may be less accurate in those regions. A second limitation concerns the handling of vertical or nearly vertical walls. Although we can handle these cases to some degree by using Eq. (17) and the fairing method to prevent wiggles, the threshold ofcIJand the fairing factorλare determined heuristically.We have provided an outline of the concept of our algorithm, and we have applied the algorithm to several cases. However, there are many rooms for extensions, and we will list a few of them.•We plan to investigate the usage of higher degree B-spline functions.We hope to develop a user friendly interface for editing the normal map (needle map).Another interesting topic is the extension from uniform B-spline to NURBS.