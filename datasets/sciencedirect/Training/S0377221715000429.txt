@&#MAIN-TITLE@&#
Multi-class dynamic inventory rationing with stochastic demands and backordering

@&#HIGHLIGHTS@&#
We propose closed-form expressions for inventory rationing problems.The expressions avoid the curse of dimensionality, and they are close to optimal.They are applicable to any number of demand classes and any demand distribution.They provide quantitative relations among parameters and managerial insights.

@&#KEYPHRASES@&#
Dynamic inventory rationing,Multiple classes stochastic demands,Backordering,Closed-form expressions,

@&#ABSTRACT@&#
Dynamic inventory rationing is considered for systems with multiple demand classes, stationary stochastic demands, and backordering. In the literature, dynamic programming has been often applied to address this type of problems. However, due to the curse of dimensionality, computation is a critical challenge for dynamic programming. In this paper, an innovative two-step approach is proposed based on an idea similar to the certainty equivalence principle. First the deterministic inventory rationing problem is studied, where the future demands are set to be the expectation of the stochastic demand processes. The important properties obtained from solving the problem with the KKT conditions are then used to develop effective dynamic rationing policies for stochastic demands, which gives closed-form expressions for dynamic rationing thresholds. These expressions are easy to calculate and are applicable to any number of demand classes. Numerical results show that the expressions are close to and provide a lower bound for the optimal dynamic thresholds. They also shed light on important managerial insights, for example, the relation between different parameters and the rationing thresholds.

@&#INTRODUCTION@&#
Customers of a product or service often have different penalty costs of shortage or service level requirements. To reduce cost or improve service, many firms classify customers into several classes with different shortage costs and provide a different service level to each class based on certain inventory rationing policy. Examples of inventory rationing can often be found in practice. For instance, Dekker, Kleijn, and Rooij (1998) considered a spare part used by different machines in a large petrochemical plant and the breakdown of these machines will bring different losses to the firm. Hence, when the inventory of the spare part is low, the system may reject demands from less important machines with lower loss of breakdown to reserve stock for potential future demands from more important machines. Another example is presented in Deshpande, Cohen, and Donohue (2003), which considered a consumable part used by US Navy and Army. As this part has different importance to Navy and Army, the demands are assigned with different service level requirements.Due to the importance of inventory rationing, the problem has been well addressed since 1960. Topkis (1968) showed that the optimal inventory rationing policy is a dynamic threshold policy for discrete-time periodic review systems with zero lead time. Under such a policy, for any time in the planning horizon, there is a threshold of on-hand inventory for each demand class such that the demand of a certain class is satisfied immediately if and only if the on-hand inventory is above the threshold of this class. With some additional conditions, the thresholds are shown to be nondecreasing with respect to the remaining time in the planning horizon. Evans (1968) and Kaplan (1969) obtained similar result for two demand classes.Since then, progress has been made in different perspectives. For example, Nahmias and Demmy (1981), Cohen, Kleindorfer, and Lee (1988), Dekker et al. (1998), and Moon and Kang (1998) analyzed service levels under a static rationing policy and a given ordering policy. Melchiors, Dekker, and Kleijn (2000) introduced an approach to evaluate the cost associated with a static threshold policy for an (R, Q) inventory model with two demand classes in a lost sales environment. Deshpande et al. (2003) investigated an (R, Q) system with two demand classes and backorders, and developed an approach to optimize the static thresholds and the parameters of ordering policy. Arslan, Graves, and Roemer (2007) studied a similar problem and allowed any number of demand classes in the proposed model. Mollering and Thonemann (2008) considered a periodic review model with two demand classes and found the optimal static thresholds under the optimal backordering clearing mechanism. Fadıloğlu and Bulut (2010b) proposed a method using embedded Markov chain to analyze an (S − 1, S) inventory system with two demand classes, Poisson demand, and backordering.The above-mentioned papers focus on static threshold policies, where the thresholds are assumed to be invariant over time. Dynamic inventory rationing models have been investigated more recently. Assuming an (R, Q) inventory policy, Melchiors (2003) introduced a dynamic threshold policy for a lost sales model with Poisson demand and multiple demand classes, where different threshold levels are allowed for different time slots. Fadıloğlu and Bulut (2010a) studied a dynamic rationing policy using the information of outstanding orders for an (R, Q) inventory system with two demand classes and Poisson demand, complemented with simulation to investigate the benefit of the dynamic rationing policy for both lost sales and backordering models.For a system with two demand classes, Poisson demands, and backordering, Teunter and Haneveld (2008) considered dynamic inventory rationing policy over a single period and developed a set of formulas to determine the optimal dynamic thresholds, which are in general not applicable to more than two demand classes. Chew, Lee, and Liu (2013) generalized the problem to multiple demand classes. They developed a one-dimensional dynamic programming model to eliminate the curse of dimensionality and embedded it to the multiple period systems with positive lead time. Bounds on the optimal costs are established and the costs of the proposed dynamic policies are verified to be close to those of the optimal policies. Hung, Chew, Loo, and Liu (2012) extended the results to general demand processes and proposed a method to sequentially obtain the dynamic thresholds and the parameters of the ordering policies.Besides inventory systems, the issue of rationing also occurs in production. Ha (1997a); 1997b); 2000), de Véricourt, Karaesmen, and Dallery (2002), and Gayon, de Véricourt, and Karaesmen (2009) proved the optimality of static threshold policies in a variety of make-to-stock production systems. By allowing multiple production channels, Bulut and Fadiloğlu (2011) showed that the rationing thresholds and the production base stock levels are state-dependent. For a make-to-stock system with advance demand information and two demand classes, Iravani, Liu, Luangkesorn, and Simchi-Levi (2007) established that the optimal production and rationing policies are threshold-type policies. More recently, Piplani and Liu (2014) extended the concept of rationing to a make-to-order production system.The studies in inventory rationing are mainly based on dynamic programming. Therefore, the thresholds obtained from these models convey very few insights about the quantitative relations with respect to the input parameters such as the demand rates, the penalty costs and the remaining time. It is also difficult to evaluate the effect on the cost when a parameter cannot be estimated accurately. Moreover, the dynamic programming approach usually encounters computational difficulties because of the curse of dimensionality.Aimed to fill the existing gaps by developing closed-form expressions for the dynamic thresholds, this paper proposes an innovative approach to dynamic inventory rationing based on an idea similar to the certainty equivalence principle (CEP) developed by Simon (1956) and Theil (1957) for linear systems with quadratic cost. The certainty equivalence principle shows that for certain systems with stochastic variables for the future process, e.g., linear systems with quadratic costs, the optimal decision at any given time is equal to the optimal decision of a deterministic system whose input parameters are set to the expectation of the random variables in the stochastic counterpart.For a system where this property does not hold, intuitively, such an approach may still obtain effective solutions. In particular, the idea of CEP has been applied to inventory models and achieved closed-to-optimal solutions. For an (R, Q) inventory system, Zheng (1992) showed that the cost incurred by using the economic order quantity (EOQ) solution is at most 1.125 times of the optimal cost, while numerical experiments indicate that the performance of the EOQ solution is significantly better than the worst-case bound. Furthermore, if the expected values are the only available information about the stochastic inputs at the time of decision making, there are few choices except for building a deterministic model using the expectations.Based on this idea, we develop a method to address the dynamic inventory rationing problem. First, at any decision time, constant demand rates are used to replace stationary stochastic demand processes and a deterministic model is considered for inventory rationing. In this way, the original decision problems with stochastic demands are changed into a sequence of decision problems with deterministic demands, one at every customer arrival. Each deterministic decision problem is then solved using the KKT conditions. From the solution to the deterministic decision problem, we obtain the dynamic inventory rationing thresholds for the stochastic model, which are characterized by closed-form expressions.The main contribution of this paper is to propose a new method for dynamic inventory rationing problems with stochastic demands. This method yields near-optimal closed-form expressions for the dynamic thresholds from which important managerial insights are obtained. It is applicable to a wide range of demand processes without restrictions on the number of demand classes, whereas most existing models, especially those with backordering, consider only two demand classes due to the complexity of dynamic inventory rationing problems. It can also be implemented in both discrete-time and continuous-time inventory systems. These properties distinguish our work from those based on dynamic programming, e.g., the seminal work of Topkis (1968), which consider discrete-time systems, require complete demand distributions, assume independent demands across time periods, suffer from the curse of dimensionality, and lack managerial insights. In addition, the closed-form expressions are optimal for deterministic demands.The remainder of this paper is organized as follows. Section 2 describes the dynamic inventory rationing problem. In Section 3, we formulate and solve the deterministic rationing problem assuming future demand is known. Section 4 employs the insights from the deterministic decision problem to develop closed-form expressions for dynamic thresholds. We present a numerical study in Section 5 to investigate the accuracy of these expressions. Section 6 summarizes the results and concludes the paper. Proofs of theorems are given in Appendix A.Similar to Topkis (1968) and Teunter and Haneveld (2008), we consider a single-period inventory system, which contains K( ≥ 2) customer classes differing in penalty cost of shortage. Let TPbe the length of the period. The time points in the period are labeled backward, i.e., the beginning of the interval is labeled as time TPwhereas the end of the interval is labeled as time 0. The amount of on-hand inventory is monitored constantly.The demands of any class i, i ∈ {1, …, K} follow a stationary stochastic process with an expected rate di, i.e., the expected amount of demand for any time interval of unit length is di. When a demand from class i occurs, the system needs to decide whether to satisfy the demand immediately. If it is not immediately fulfilled, the demand is backordered and a penalty cost πi, i ∈ {1, …, K} per unit per unit time is incurred. The on-hand inventory also bears a holding cost h per unit per unit time. At the end of the period, i.e., time 0, the system reorders the inventory with zero lead time and the outstanding backorders are fulfilled. Note that the zero lead time assumption does not limit the applicability of this model. As Teunter and Haneveld (2008) pointed out, there are indeed some cases of zero lead time in practice. Following an approach similar to the one outlined in Chew et al. (2013), the assumption can be relaxed as well.Without loss of generality, assume that πi> πjfor i < j. As the penalty costs of different classes are different, it is natural to backlog some demands from lower priority classes with lower penalty costs to reserve stock for future demands from higher priority classes. One type of rationing policies is to set a threshold for each class at any time. The demands of this class will be satisfied at that particular time if and only if the on-hand inventory is above the corresponding threshold. Otherwise, the demands will be backordered. This threshold-type policy has already been proved to be optimal under various conditions, e.g., Topkis (1968). In this paper, we target to find well-performing thresholds with closed-form expressions.This section considers a deterministic rationing problem assuming future demands for any class i, i ∈ {1, …, K}, are constant with rate di, i.e., the stochastic future demands are replaced with deterministic processes with the same expected values. Given the on-hand inventory at any time point, the optimal decision rule at that time is characterized by closed-form expressions.Consider an arbitrary time T ∈ [0, TP], i.e., the remaining time from this time point to the end of the period is T. Let s denote the amount of on-hand inventory at time T. First, we show the optimal rationing policy has the following structural property:Proposition 1Given the on-hand inventory s at time T, for any demand class i, i ∈ {1, …, K}, there exists some ti∈ [0, T] such that it is optimal to satisfy the demands of class i at any time t ≥ tiand to backorder the demands at any time t < ti. Moreover, ti≤ tjfor any i < j and the on-hand inventory at time t1 must be zero if t1 > 0.See Appendix A.□Proposition 1 shows that the time interval to backorder the demands from class i is [0, ti), which implies that tiis the threshold in time for deciding whether to satisfy demands of class i. We refer to such a rationing policy as the Time Threshold Policy (TTP). Note that the threshold levels are applied to on-hand inventory in the threshold policies in the literature. Without special notification, threshold policy in this paper refers to on-hand inventory threshold policy. For models with deterministic demands, we can obtain an equivalent static threshold policy from a given TTP, i.e., given the time thresholds tiand the initial stock s, the TTP is equivalent to an inventory threshold policy with constant on-hand inventory rationing thresholds. For stochastic demand models, obviously, the TTP is different from the classical threshold policy whose optimality has been proved in Topkis (1968).In the remainder of this paper, we refer to tias the backordering time for demand class i. Note that tialso determines the fill rate of class i given the inventory s at time T, i.e., FRi(s) = 1 − ti/T, which is an important measure of the service level provided by the inventory system.Proposition 1 also implies that the demand classes with higher shortage costs will be backordered at a later time. In particular, the demands of the most important class, i.e., class 1, are backordered only when the system runs out of inventory.Also note that it is straightforward to generalize the results in Proposition 1 to systems with deterministic and non-stationary demand rates.Fig. 1demonstrates the inventory variation and the backordering times ti, i = 1, 2 for a system with two demand classes. The system has initial stock s at time T. For each demand class i, the demands are satisfied if and only if the remaining time is greater than ti. The system first satisfies demands of both classes and the inventory decreases from point A to B at a rate of d1 + d2. From point B to point C, the demands of class 1 are satisfied whereas the demands of class 2 are backordered, and hence the inventory decreases at a rate d1 until it reaches point C where the inventory is zero. All backordered demands are fulfilled at the end of the period using the replenished stock.Let Cpand Chbe the penalty and holding costs incurred from time T to 0, respectively. For the case with two demand classes, the definition of tiimplies thatCp=12∑i=12πiditi2.In Fig. 1, the inventory held in the interval of length T is represented by the area of region ECBAE, which is equal to the area of region EODAE minus the area of region CODABC. Hence, Chis obtained asCh=h[sT−(d1+d2)(T−t2)22−(d1+d2)(T−t2)t2−d1(t2−t1)22−d1(t2−t1)t1]=h(sT−∑i=12diT22+∑i=12diti22).By induction, for the cases with K demand classes, it follows thatCp=12∑i=1Kπiditi2andCh=h(sT−∑i=1KdiT22+∑i=1Kditi22).Therefore, given initial stock s, the optimal backordering times tiis found by solving(1)(A)mintiTC(s)=hsT−∑i=1KhdiT22+∑i=1K(πi+h)diti22(2)s.t.ti≥0,∀i∈{1,…,K}(3)T≥ti,∀i∈{1,…,K}(4)ti≥tj,ifi>j,∀i,j∈{1,…,K}(5)s−∑i=1KdiT+∑i=1Kditi≥0.Here constraint (4) follows from Proposition 1and constraint (5) ensures that the remaining on-hand stock at the end of the period is nonnegative.The optimization problem (1)–(5) is a convex programming model with linear constraints. Hence, the KKT conditions, which are necessary and sufficient for a solution to be optimal, can be used to derive the closed-form optimal solution to problem (A).Let αi, βi, γij, δ be the Lagrangian multipliers for the constraints (2)–(5), respectively. The Lagrangian function is(6)L(ti,αi,βi,γij,δ)=hsT−∑i=1KhdiT22+∑i=1K(πi+h)diti22−∑i=1Kαiti−∑i=1Kβi(T−ti)−∑i>jγij(ti−tj)−δ(s−∑i=1KdiT+∑i=1Kditi)and the KKT conditions are(7)(πi+h)diti−αi+βi−∑i>jγij+∑i<jγij−δdi=0∀i(8)αiti=0∀i(9)βi(T−ti)=0∀i(10)γij(ti−tj)=0∀i>j(11)δ(s−∑i=1KdiT+∑i=1Kditi)=0(12)αi,βi,γij,δ≥0(13)ti≥0(14)T≥ti(15)ti≥tj∀i>j(16)s−∑i=1KdiT+∑i=1Kditi≥0.Equation (7) reflects that the gradient of the Lagrangian equals 0. Equations (8)–(11) are the complimentary slackness conditions, (12) is the dual feasible condition, and (13)–(16) are the primal feasible conditions.Before presenting the optimal solutions, we introduce some additional notations to be used in the closed-form expressions of the optimal solutions. Let(17)ρij=πi+hπj+h,∀i,j∈{1,…,K}.ρijreflects the relative importance between classes i and j. When ρij< 1, it means class i is less important than class j. Obviously, ρii= 1 and ρij< 1 if i > j. We also define(18)Sn={∑i=1KdiT,n=K∑j=1n(1−ρ(n+1)j)djT,n∈{1,…,K−1}0,n=0.The definition implies that Sn> Sn − 1 for any n.The points Sndivide the region [0, ∞) into K + 1 intervals. Based on the interval into which the inventory at time T falls, the closed-form optimal solution to (A) can be obtained by applying the KKT conditions. Combining with Proposition 1, we obtain the following theorem that summarizes the optimal inventory rationing policy:Theorem 2Let s be the amount of on-hand inventory at time T. Assume that the demands of each class i, i ∈ {1, …, K} are deterministic with a constant rate di. Then a time threshold policy is optimal where the backordering time tifor any class i is defined asti=0,∀i∈{1,…,K},if s ≥ SKand(19)ti={T,n<i≤K∑j=1ndjT−s∑j=1nρnjdj,i=nρnitn,1≤i<n,if Sn − 1 ≤ s < Sn, n ∈ {1, …, K}.See Appendix A.□When s ≥ SK, the result in Theorem 2 is intuitive. If the initial inventory is sufficient to satisfy the demands of all classes, then there is no backorder for any customer class and hence ti= 0.If the initial stock s is in [SK − 1, SK), Theorem 2 shows that the demands of any class will not be fully satisfied. The ratio between backordering times tiand tKis equal to ρKi. tiincreases as s decreases from SK. When s reaches SK − 1, we have tK= T, i.e., the system should backlog demand of class K since time T.If s ∈ [Sn − 1, Sn), n ∈ {1, …, K − 1}, the stock is used to satisfy demand of class i, 1 ≤ i ≤ n, and all demands of class i, n < i ≤ K, are backlogged from the very beginning, i.e., time T. This is essentially equivalent to a reduced rationing problem with n demand classes only. The only difference is that in the optimal solution, the K-class problem backlogs all demands from any class i, i > n, which do not exist in the n-class problem.In (19), ti> 0 for any class i, which implies that a greedy policy is not optimal. Here the greedy policy is a policy that backlogs the demands from class i unless the demands from more important classes, i.e., any class j where j < i, are fully satisfied till the end of the period. For example, if the stock at time T is no less than the total demand of class 1 in the remaining time, i.e., s ≥ d1T, the greedy policy would reserve enough stock for class 1, and then use the remaining stock to satisfy demand of class 2 and so on, which yields t1 = 0 for the greedy policy. Note that the benefit of satisfying a demand is determined not only by the corresponding penalty cost per unit time, but also by the length of the remaining time to the end of the period. If s < SK, satisfying all the demands from class 1 is at the price of backordering the demands from some less important class at an earlier time, which explains why the greedy policy is not optimal.Also note that the penalty costs of different classes and the holding costs are combined into parameters ρijin the closed-form expressions (19) for the optimal backordering times. Therefore, at any time T, given the initial inventory level s and the holding cost h, there exists no one-to-one mapping between the penalty costs πiand the optimal backordering times ti, because different penalty costs may yield the same optimal backordering time as long as the ratios ρijare preserved.Another important remark of Theorem 2 is that for any demand class i, ti< T if and only if the on-hand inventory is strictly greater than Si − 1, i.e., the demand of class i observed at time T will not be backordered as long as the on-hand inventory at that time is greater than Si − 1. The observation immediately yields the optimality of a threshold policy where the threshold for class i at time T is Si − 1.Corollary 1The optimal policy for the inventory rationing problem with deterministic demands is as follows: For any demand class i, i ∈ {1, …, K}, there exists a threshold level ci(T) ≡ Si − 1 at any time T, T ∈ [0, TP], such that the demand from class i at time T is satisfied if the on-hand inventory at time T is above ci(T), and is otherwise backordered.Note that the threshold level for class i is always higher than that for class j for any i < j and any time T. In addition, the threshold for class 1 is always zero, which agrees with the property in Proposition 1 that the on-hand inventory at the backordering time t1 must be zero as long as t1 is before the end of the period.Substituting the optimal solution of tiin Theorem 2 into (1), at any given time T, results in the optimal cost TC*(s) as a function of the on-hand inventory s:(20)TC*(s)={hsT−∑i=1KhdiT22,s≥SKhsT−∑i=1KhdiT22+(∑i=1ndiT−s∑i=1nρnidi)2∑i=1n(πi+h)ρni2di2+∑i=n+1K(πi+h)diT22,n∈{1,…,K},Sn−1≤s<Sn.We have the following theorem for the optimal cost function.Theorem 3The optimal cost function TC*(s) given in (20) is continuous, differentiable, and convex in s for any s ∈ [0, ∞). Moreover,(21)dTC*(s)ds|s=Si={−πi+1T,i∈{1,…,K−1}hT,i=K.See Appendix A.□The derivative of TC*(s) at SKshows that an increase of stock from SKwill incur a cost hT per unit. As the initial stock of SKcan already satisfy the demands of all classes, it is intuitive that any additional stock above the level SKwill be held until the end of the period, hence incurs a holding cost hT per unit.Moreover, the derivative of TC*(s) at Si − 1, i ∈ {2, …, K}, also explains why Si − 1 corresponds to the threshold for class i at time T. Assume δ units of demand from class i arrive at time T and the on-hand inventory is s. The system needs to immediately decide whether or not to satisfy the demand. If the system backlogs the demand, then a penalty cost πiTδ incurs. If the system satisfies it, then the on-hand inventory becomes s − δ. Obviously, the demand should be satisfied if and only if TC*(s) + πiTδ ≥ TC*(s − δ), which is approximately(22)dTC*(s)ds≥−πiT.Theorem 3 shows that (22) holds if and only if the inventory s ≥ Si − 1, i.e., we should accept the demand from class i at time T if and only if the on-hand inventory is above Si − 1.Suppose that there exists an ordering opportunity at time T without any fixed ordering cost. As we need to order for all backlogged demands at the end of the period, the total ordering cost from time T to the end of the period equals the unit ordering cost multiplied bymax{∑i=1KdiT−s,0}. In other words, the total ordering cost is a constant independent of the ordering quantity at time T and can be ignored when calculating the optimal ordering quantity. Therefore, given the on-hand inventory s at time T, the optimal ordering quantity can be obtained by solving minx ≥ 0{TC*(s + x)}. The convexity of TC*(s) yields that that the optimal ordering policy is a base stock policy and the optimal base stock level denoted by S* is the global minimizer of the function TC*(s). Obviously, S* can be obtained by solving d[TC*(s)]/ds = 0. (21) shows that d[TC*(s)]/ds is positive at SKand is negative at SK − 1. Therefore, the optimal base stock level S* lies in (SK − 1, SK), i.e., it is between the threshold for class K and the total demand.As shown in Topkis (1968), the optimal policy for the inventory rationing problem with stochastic demands is a threshold policy, i.e., for any demand class i, there exists a threshold ci(T) at any time T, T ∈ [0, TP], such that the demands from class i occurring at time T is satisfied if the on-hand inventory is greater than ci(T) and is backordered otherwise. In this section, we generalize the results for deterministic demands to obtain approximate dynamic thresholdsc˜i(T)for stochastic demands.Similar to the idea of the certainty equivalence principle, we can replace the stochastic demand processes with deterministic ones having the same expected rate. Since the future demands follow stationary stochastic processes with expected rates di, the problem with stochastic demands is then reduced to one whose future demand for any demand class i is deterministic with a constant rate di. For the deterministic model, Section 3 shows that the optimal threshold ci(T) for any class i at any time T is Si − 1 defined in (18). Thus, for any time T, T ∈ [0, TP], approximate dynamic thresholdsc˜i(T)can be obtained from the following closed-form expressions:(23)c˜1(T)=0andc˜i(T)=∑j=1i−1(1−ρij)djT,i∈{2,…,K},Note that the optimal threshold of class 1 in the stochastic demand case is always 0. This is obvious as the marginal loss from backordering a demand of class 1 is greater than the marginal gain from holding the stock to satisfy any future demand (c.f. Topkis, 1968).The approximate thresholds are independent of the demand distributions. Since the optimal thresholds should depend on the distributions, this observation indicates that the CEP may not be valid for the dynamic rationing. However, as mentioned in Section 1, the idea of CEP has been successfully applied to other inventory models. It is hence expected that the CEP approach capable of obtaining effective solutions for the inventory rationing problem, which is fortunately validated by the computational results in Section 5.From the closed-form expressions, we can directly obtain the following managerial insights:•The dynamic threshold of class i is independent of the expected demand rate and the penalty cost of any class j, j > i, which has a lower shortage cost than class i. This property is reasonable in the sense that if the system adds a new demand class with a lower penalty cost, the thresholds for existing classes with higher penalty cost will not change.The threshold of class i is also independent of the expected demand rate of class i, but it depends on its penalty cost of shortage πi.The threshold of class i is less than∑j=1i−1djT,i.e., the total expected demands of the more important classes in the remaining time interval, which implies that the system may allow some stockout for the more important classes to reduce costs.The threshold of class i increases linearly with the remaining time.The penalty costs πiand the holding cost h determine the thresholds solely through the parameters ρij. Even if these cost coefficients are changed, the threshold of each class, and hence the corresponding service level, remain the same as long as the parameters ρijare unchanged.The closed-form expressions allow us to easily estimate how sensitive the approximate thresholds are to the disturbances in input parameters, e.g., the expected demand rates, the shortage costs, and the holding cost.Furthermore, suppose that we could order at time T without paying fixed cost. By replacing the stochastic demand process with the deterministic process with the same expected rate, an approximate base stock level S* can be obtained following the approach presented in the last paragraph of Section 3. The initial inventory at time T could be adjusted to S* if s ≤ S*, and no order is placed if s > S*. The computational results in Section 5 demonstrate that the cost is very close-to-optimal if we adopt the approximate base stock policy for ordering and the approximate threshold policy for rationing.In this section we investigate the accuracy of the closed-form expressions in (23), by comparing it with the optimal dynamic rationing policy in Topkis (1968).In the numerical study, the demand of class i is assumed to follow a Poisson process with rate di. We consider the initial stock s in the region [0, 3dTP], whered=∑i=1Kdi. dTPis hence the expected demands from all classes in the period. Let TC*(TP, s) and TCa(TP, s) be the expected costs over the period under the optimal and approximate policies, respectively. The optimal rationing thresholds and optimal costs are calculated using the multi-dimensional dynamic programming model introduced in Topkis (1968). The approximate thresholds are obtained from the closed-form expressions (23), and the corresponding costs can be evaluated recursively based on the demand distributions.Define the cost difference function and the maximal cost difference asCD(s)=TCa(TP,s)−TC*(TP,s)TC*(TP,s)·100percentCDmax=maxsCD(s).The maximal cost difference CDmax is used to measure the performance of the closed-form expressions. Another relevant measure of the accuracy is the difference between ci(TP) andc˜i(TP),where ci(T), T ∈ [0, TP], denotes the optimal threshold for class i at time T.We start with a base case with 3 demand classes and additional 27 cases are generated by varying certain inputs of the base case. The parameters in the base case are as follows: d1 = d2 = d3 = 300, π1 = 27, π2 = 9, π3 = 3, h = 1, and TP= 0.08. Note that the time unit is a year and the length of the period is about one month. The results are shown in Figs. 2–4.Fig. 2 displays how the optimal and approximate thresholds change with the remaining time for demand classes 2 and 3. Note that the thresholds for class 1 are always 0 for both policies and hence are omitted in the figure. As can be observed, the approximate thresholds of classes 2 and 3 provide close lower bounds to the optimal counterparts. In the deterministic model, it is optimal to fulfill all backlogged demands at the end of the period. Therefore, the derivation of the closed-form expressions implicitly assumes that all backlogged demands can only be fulfilled at the end of the period. However, the optimal policy for the stochastic model allows fulfilling backorders in the middle of the period. Hence, the demands could be backordered more aggressively as the backlogs could be fulfilled whenever extra stocks are available. As a result, under the optimal policy, the system could set higher reserve stocks, i.e., higher thresholds for classes 2 and 3 than the closed-form approximations.Fig. 3shows the costs under the optimal and approximate threshold policies. The costs of both policies nearly coincide. Moreover, both curves are convex, which is consistent with what was proved in Topkis (1968), i.e., the optimal cost is convex in the initial stock.Fig. 4exhibits the relative cost difference CD(s) as a function of the ratio s/(dTP), i.e., the ratio of the initial stock to the total expected demand of the period. CD(s) is bounded by 0.78 percent, which indicates that the cost of the approximate threshold policy is near optimal. In particular, the difference is above 0.5 percent only when the ratio s/(dTP) is in the range [0.49, 0.89], whereas the difference vanishes fast when s/(dTP) drifts away from the range. Note that we can satisfy almost all the demands when the initial inventory level s is high, and most demands are backordered for very small s. Therefore, in these two cases, the total cost is insensitive to small variations in rationing thresholds. It can also be observed that CD(s) increases drastically when the ratio s/(dTP) is near 0.2 or 0.5. The optimal thresholds of classes 2 and 3 at the beginning of the period are 0.22dTPand 0.5dTP, respectively. Consider the case when the ratio s/(dTP) approaches 0.22 from below. As the initial stock is slightly lower than the optimal threshold for class 2, the demands of class 2 should be backordered at the beginning of the period. On the other hand, the approximate thresholds are lower than the optimal ones, and hence the approximate threshold of class 2 could be higher than the initial stock. Therefore, the approximate policy should satisfy the demands of class 2 at the beginning of the period. Because the optimal and approximate thresholds suggest opposite decisions regarding the demands of class 2, we expect the difference in the costs to be non-negligible, which explains the increase in CD(s) when s/(dTP) is close to 0.2. Similarly, we can also show why there is a jump in CD(s) when s/(dTP) is near 0.5. For other computational cases, we also observe such a jump in the relative cost difference when the initial inventory level is close to the optimal threshold of certain class.In addition, Figs. 3 and 4 provide information on how to select the initial inventory level. As shown in the last paragraph in Section 4, if there exists an ordering opportunity without fixed cost at time T, we can obtain a base stock policy with the base stock S* by replacing the stochastic demand with its expected rate. For the base case, the approximate base stock level at time TPobtained by this approach is S* = 64. Fig. 2 displays the ratio S*/(dTP) = 0.889, which, according to the last paragraph of Section 3, is between SK − 1/(dTP) and SK/(dTP). Interestingly, based on the dynamic programming model in Topkis (1968), the optimal ordering policy at time TPis a base stock policy with the base stock level S′ = 64, which is exactly the same as the approximate base stock level S*. In fact, for most of our computational cases, the approximate base stock level is the same as the optimal counterpart, and it is slightly lower than the total expected demand in the period. Furthermore, given the initial inventory level S* = 64, Fig. 4 indicates that the relative cost difference is 0.52 percent. Therefore, the idea borrowed from the certainty equivalence principle yields close-to-optimal ordering and rationing policies.Based on the base case shown in Fig. 2, we generate 27 additional cases by keeping h fixed while varying other parameters such as the expected demand rates, the shortage costs, and the length of period. The results are summarized in Table 1. The second to the eighth columns present the values of the expected demand rates di, the shortage costs πi, and the length of the period TP. The third last column displays the maximum difference in the expected total cost CDmax between the optimal and approximate policies, while the last two columns compare the thresholds at the beginning of the period returned by these two policies for demand classes 2 and 3, respectively. Recall that the thresholds for class 1 are zeros for both policies and hence they are not reported in the table. Also note that the base case corresponds to case 1 in the table.As shown in Table 1, the maximal cost differences CDmax is reasonably small in most cases. In particular, the values of CDmax are less than 1 percent in 18 cases and are all within 3 percent except for cases 6 and 7, the approximate thresholds of which are still not significantly different from the optimal ones. It can also be noted that in most cases, the approximate thresholds are slightly lower than the optimal ones, which agrees with what observed in Fig. 2.Cases 2–11 show that the performance of the closed-form expressions is significantly affected by the ratio between two adjacent penalty costs, i.e., πi/πi + 1. When the ratio increases, the gap between the approximate and optimal thresholds enlarges, and so does the cost difference. As mentioned previously, the closed-form expressions are derived based on the assumption that all backordered demands are fulfilled at the end of the period, while the optimal threshold policy for stochastic demands may fulfill the backorders during the period. The difference in backorder fulfilling mechanisms partially explains why the difference in the threshold levels increases in πi/πi + 1. For both the optimal and approximate policies, the increase in the ratio πi/πi + 1 enlarges the gaps among the thresholds for different demands classes. As the threshold for class 1 is always zero, it implies that the threshold levels for all other demand classes increase in the ratio πi/πi + 1. Hence, it is more likely to fulfill backorders in the middle of the period, which further increases the threshold difference between the optimal and threshold policies.Cases 12–25 illustrate the effect of demand rates on the performance of the closed-form expressions. For a stochastic model, the smaller the coefficient of variation of the stochastic demand, i.e., the ratio of the standard deviation to the expectation, the closer to a deterministic demand the stochastic process is, and hence the more accurate the closed-form expressions will be. In the Poisson case, the coefficient of variation of the total demand over the period is1/dTP. For cases 12–15, the cost difference indeed decreases with the demand rate of class 1, i.e., the closed-form expressions are more accurate. Similarly, when the demand rates of all the classes increase, cases 22–25 demonstrate that the gap between the approximate and optimal thresholds decreases in general and the maximal cost difference decreases significantly. However, cases 16–21 indicate that the cost difference CDmax does not monotonically decrease in the demand rate of class 3. Compared with cases 12–15 and 22–26, the difference in CDmax is rather small for various demand rates of class 3. Note that both the approximate and optimal thresholds remain unchanged for cases 16–21, which agree with the observation in Section 4 that the demand rate of the class with the lowest priority has no effect on the closed-form thresholds. This property also explains why CDmax is not sensitive to the demand rate of class 3.Cases 26–28 demonstrate the effect of the period length on the performance of the closed-form expressions. Note that the coefficients of variation of the demands decreases with the period length TP, i.e., the demand processes are closer to the deterministic ones for longer periods. Therefore, as the length of the period TPincreases, the maximal difference CDmax decreases and the performance of closed-form expressions improves.To summarize, the thresholds obtained from the closed-form expressions provide close approximations for the optimal ones, which indicates that the expressions capture the essential characteristics of the dynamic rationing thresholds. This approximate approach performs better for systems with higher demand rates, smaller ratios of two adjacent penalty costs, and longer periods. The most important factor that affects the performance of the approximate thresholds is the ratio between penalty costs. In the above numerical study, the penalty cost ratio π1/π2 can be as large as 10, which cover many practical situations, e.g., those in Deshpande et al. (2003). Furthermore, it is a common practice to use the different selling prices of the product as the penalty costs for different classes, and the resulting ratio between adjacent penalty costs is usually less than 5. Of course, there indeed exist situations where the penalty cost ratio can be very large, e.g., greater than 10. In this case, the system needs to find more accurate rationing thresholds, and those from the closed-form expressions can serve as a lower bound.

@&#CONCLUSIONS@&#
This paper studies dynamic inventory rationing for systems with multiple demand classes, stationary stochastic demand processes, and backordering. An innovative method is proposed based on a similar idea to the certainty equivalence principle, which yields closed-form expressions for dynamic rationing thresholds. The expressions are easy to compute and are applicable to any number of demand classes. They also provide important managerial insights.Numerical results assuming Poisson demands show that the closed-form expressions have captured the essential characteristics of optimal thresholds. The thresholds calculated using the closed-form expressions are very close to the optimal ones. These approximations are more accurate and perform better for problems with smaller ratios between two adjacent penalty costs, larger demand rates, and longer periods.Since the certainty equivalence principle has no restrictions on the demand processes and the distribution of random variables, the method may be applied to a wide range of demand processes, with continuous or discrete demands, independent or dependent demands for different classes, and stationary or nonstationary demands. It is hence interesting to investigate the accuracy of approximate expressions for demand processes other than the Poisson process presented in this paper. The method is expected to be equally effective. The closed-form expressions may also be adjusted to improve their performance for some special cases, e.g., when the ratios between adjacent penalty costs are extremely large. Finally, it will be useful to develop closed-form expressions for the lost sale problems, which could be applied in airline seat rationing. We leave these topics for future research.