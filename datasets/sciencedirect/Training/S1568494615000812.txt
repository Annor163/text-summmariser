@&#MAIN-TITLE@&#
A heuristic approach to optimal design of an underground mine stope layout

@&#HIGHLIGHTS@&#
This research proposes a new heuristic algorithm for stope layout optimisation in underground mining operations.The proposed heuristic generates non-overlapping stopes in three-dimensional space.A modification in the original algorithm resolves the computational complexity of the problem.An implementation demonstrates its robustness and value as compared to commercially available software.

@&#KEYPHRASES@&#
Stope optimisation,Heuristic algorithm,Underground mining,

@&#ABSTRACT@&#
The optimal layout or geometry of the production area (stope) in an underground mining operation maximises the undiscounted value subject to the inherent physical, geotechnical, and geological constraints. Numerous approaches to develop possible stope layouts have been introduced. However, owing to the size and complexity of the problem, these approaches do not guarantee an optimal solution in three-dimensional space. This article proposes a new heuristic algorithm that incorporates stope size variation for solving this complex and challenging optimisation problem. A case study demonstrates the implementation of the algorithm on an actual ore body model. In a validation study, the proposed algorithm generates 10.7% more profitable solution than the commercially available Maximum Value Neighbourhood (MVN) algorithm.

@&#INTRODUCTION@&#
The prerequisite to inception of a successful mining operation rests in the existence of adequate supply of ore (valuable raw material) or economic reserves. A decent supply of ore guides the selection of the appropriate production scale of an operation and assists in reducing the corresponding costs of producing ore [1]. Mineral exploration sampling and consequent geological interpretation in conjunction with spatial statistical modelling techniques delineate the ore body [2]. This process not only defines the size, shape, depth, geology, and geotechnical characteristics of the available ore reserves, but also divides the volume of these reserves into thousands of fixed size mining blocks in three-dimensional space and assigns qualitative (grade or metal content) and quantitative (t) data to each mining block [3]. Given the available grade and tonnage in a mining block and economic parameters such as commodity price, mining cost, and ore processing cost, the economic value of a mining block is calculated, which becomes basic input to the subsequent mine planning process [4,5].The foremost step in mine planning process resolves the question on mining a particular ore body through a surface or an underground operation. While, spatial (size, shape, depth, location) characteristics of the ore body facilitate the solution to this question, the economy remains the driving force that guides this selection between surface or underground mining operation. If this strategic decision is made in favour of an underground mining operation, then, at the same time, among a few available options, the most appropriate underground mining method may be selected. The selection of an optimal stope layout is the core to mine planning process in the majority of underground mining methods, because, it dictates the net present value maximisation in subsequent production scheduling [6]. Given the selection of an optimal stope layout is based on analysing all possible combinations of thousands of mining blocks, achieving the optimal solution to this complex problem is a challenge, and this article contributes an innovative as well as efficient algorithm to solve this stope layout problem.Fig. 1depicts a series of important technical stages and primary activities which belongs to these stages of a typical underground mining project. Stope layout optimisation lies within mine planning stage, and it is the most pivotal activity as the optimal stope layout impacts the value maximisation in the subsequent stope production scheduling step, and guides the productivity of the mine development and mine production stages.Fig. 2presents the general layout of an underground mine [7]. As indicated in Fig. 2, a stope in an underground mine is the production area, where ore is extracted using an appropriate underground mining method.Fig. 3demonstrates a three-dimensional view of the possible layout of stopes available/accessible for extraction in a section of an underground mine.Given this stope layout, the metal content (average grade or the quality of ore) as well as volume and density of ore (consequently, the quantity or tonnes of ore) in each stope is calculated from the quality and quantity of ore available in the mining blocks that are combined to form a stope. This qualitative and quantitative information describes the economic value of stopes, which becomes input to the subsequent production scheduling formulations aiming to maximise the discounted value of future cash flows under physical and geotechnical constraints [8]. Hence, the achievement of optimal life-of-operation production plans is tied to the development of optimal stope layout in an underground mining operation. Given an optimal stope layout and the consequent production plan in terms of a sequence of production, the ore production within stopes is coordinated through a general cycle of drilling, blasting, loading, and haulage operations [9]. Fig. 4presents a close-up of this production cycle within a stope of an underground mining operation [7].Given the physical and geotechnical constraints or characteristics of the available material, a predefined (safe) stope size becomes a requirement, which ultimately guides the possible set of mining blocks included inside a stope [10].Fig. 5presents a simple description of the stope layout problem in three-dimensional (xyz-plane) space. It identifies the possible combinations of mining blocks into a single stope and explains the importance and complexity of the stope layout problem in underground mining operations. In this hypothetical situation, physical and geotechnical constraints limit the stope size to 6 mining blocks, i.e. the stope consists of a maximum of two (2) mining blocks along x-axis and three (3) mining blocks along y-axis, or otherwise. Consequently, Fig. 5(a)–(f) show that the candidate mining block A may become part of any of the six possible stopes (2×3 size).These possible combinations may consist of both ore and waste blocks. If the total negative economic value from waste blocks of a stope is higher than the total positive economic value from ore blocks of that stope, the overall economic value of a stope can be negative. Similarly, when the total positive economic value of the ore blocks of a stope is higher than the total negative economic value of waste blocks of that stope, the overall economic value of a stope can be positive. However, out of several possibilities, a mining block may be combined with other mining blocks to become part of a stope that maximises the overall economic value of the underground mining operation [11].It is evident that in this simple example, for candidate mining block A, the evaluation procedure requires analysing six (6) possible combinations of stopes for a predefined stope size of 2×3. However, in actual ore body models with multiple blocks along z-axis, the possible combinations of stopes increase proportionally, leading to the computational complexity of the problem.Fig. 6illustrates two stopes out of the 6 possible combinations that are overlapping with each other. Given the physical constraints, it is impossible to mine overlapping stopes, and avoiding such combinations becomes imperative, which adds to the computational complexity of the problem. This reflects an overall complexity of selecting an optimal stope layout in realistic ore body models consisting of thousands of mining blocks in three-dimensional (xyz plane) space. As such, the development of an innovative algorithmic procedure that not only finds the maximum value stopes, but also, avoids overlapping stopes is a challenge.Over the years, a number of algorithms have been developed and implemented to solve the stope layout optimisation problem. The existing stope layout optimisation algorithms may be classified as exact and heuristic [12]. While exact algorithms are supported by mathematical proof, the heuristic approaches solve the problem based on some defined rules restricting the search area for optimal stope layout. Some notable algorithms and their favourable features and drawbacks are discussed as follows.Ovanic and Young [13] present a mixed integer programming formulation known as type-two special ordered sets. The algorithm employs two piecewise linear cumulative functions and identifies the optimal start and end points for mining within the stope. Even though the algorithm is applicable on either regular or irregular size mining blocks within the ore body model, it optimises the stope boundary only along single dimension [14]. Thus, the algorithm offers a partial solution to the stope layout problem.Alford [15] demonstrates a floating stope concept for stope optimisation. The algorithm identifies the ore and waste mining blocks within the ore body model, and then maximises ore tonnes, ore grade, contained metal, or economic value as a criterion for optimising the stope layout problem. However, the algorithm generates overlapping stopes, requiring post-optimisation manual adjustment (leading to a sub-optimal solution), because, physical constraints restrict insertion of a mining block in two different stopes.Cawrse [16] introduces an extension in [15] and recommends a multiple pass floating stope process (MPFSP). MPFSP creates stope envelopes through a simple and efficient file generation and management system, offering solution in Microsoft Excel compatible (csv) format. However, the algorithm does not overcome the shortcomings of the original “floating stope” algorithm.Ataee-Pour [17,18] presents a heuristic method based on the maximum value neighbourhood (MVN) approach. The algorithm determines a set of feasible neighbourhoods for each mining block in the ore body model and identifies the optimal neighbourhood based on an economic value. Even though, for a particular mining block as base or starting point, MVN offers robust solution to the complex stope optimisation problem, however, if the starting location of a given block model is varied, the MVN algorithm produces different solutions to the model [19].Griceo and Dimitrakopoulos [20] propose a mixed integer programming probabilistic optimisation model. The method sequentially divides the ore body model into a series of layers, panels, and rings. The model then maximises the metal content for identifying the optimal number of rings in a stope. This algorithm considers the geological uncertainty in the stope optimisation process. However, the algorithm relies on the mining block aggregation into predefined rings based on their size and location, thus violates the optimality. Moreover, each ring is represented as a binary variable, and consequently, an increase in the number of rings increases the solution time exponentially [21].Sens and Topal [22] contributes a heuristic approach for stope layout optimisation in three-dimensions. The algorithm incorporates variable stope sizes and selection strategies for stope boundary or layout development in three-dimensions. Unlike floating stope algorithm, it also eliminates the possibility of including overlapping stopes in the solution. However, using maximum economic value as a criterion, it generates only a unique set of non-overlapping stopes. While, in reality, multiple combinations of non-overlapping stope sets exist, and the optimal solution must be selected among these combinations as developed in the proposed algorithm.Bai et al. [23] present a stope optimisation algorithm based on the graph theory and network flow method. The algorithm defines a cylindrical coordinate system around a specified raise location and optimises the stope profit as a function of location and height of the raise location. The authors compare the performance of the algorithm with the floating stope algorithm and obtain better solutions. However, this algorithm is limited only for implementations to small mineralised ore bodies and sub-level stoping mining method.Given the computational complexity of the problem, it may be concluded that previous studies do not offer solution to the problem as a whole, and consequently, lack in the development of an optimal stope layout for an ore body in three-dimensional space. However, as opposed to exact methods, heuristic approaches [17,22] offer relatively better solutions to the stope layout problem.Realising the performance of the heuristic methods [24–27] for computationally complex problems, this article contributes an innovative and efficient heuristic algorithm that optimises the stope layout problem in three-dimensional space, such that, it incorporates the predefined stope sizes, maximises overall economic value, satisfies the physical and geotechnical constraints, and avoids overlapping stopes. The article also demonstrates the value of the proposed algorithm in an actual ore body model, promising unique solution to the problem in two alternative stope-size scenarios, as well as a comparison with MVN algorithm that has been implemented in commercially available software [28].The proposed heuristic algorithm considers an ore body model consisting of mining blocks and relevant economic parameters as an input, translates the grade and tonnage of a mining block in the ore body model into an economic value of a mining block (i.e. converts the ore body model into an economic block model), and then develops an optimal stope layout by maximising the total economic value (profit) subject to the physical and geotechnical constraints. The following notations are defined for explaining the steps of the algorithm:iblock indicator of a regularised block modelstope indicatorindicator for a set in a family of non-overlapping stopes setsindicator for a unique set in a family of non-overlapping stopes setslocation (x, y, z, coordinate) of block ilength (m), width (m), and height (m) of block imetal content or grade (% or g per t) of block imaterial density (t per m3) of block imetal weight (g) of block itotal weight (t) of block ieconomic value ($) of block ilocation (x, y, z) of stope jlength (m), width (m), and height (m) of stope jmetal content or grade (% or g per t) of stope jmaterial density (t per m3) of stope jmetal weight (g) of stope jtotal weight (t) of stope jeconomic value ($) of stope jnumber of mining blocks inside stope j along x, y, and z-axislocation (x, y, z coordinates) of the origin (starting) block inside stope jlocation (x, y, z coordinates) of the last (ending) block inside stope jeconomic value ($) of unique non-overlapping stopes set uThe steps of the proposed algorithm are as follows:1.Initialise all variables, read relevant ore body model and associated economic/technical parameters, convert the ore body model to an economic block model (i.e. calculate mi,wi, andviof a mining block i).Aggregate mining blocks to generate set of possible stopes βj(i.e. given the highest possible value of mining blocks and the defined stope size (nxj, nyj, nzj), indicate the set of mining blocks αjincluded inside the stope j).Update the attributes of stope j as follows:(1)li,wi,hi=(li′×nxj),(wi′×nyj),(hi′×nzj)(2)g¯j=m¯jw¯j×100(3)m¯j=∑i′mi′(4)w¯j=∑i′wi′(5)v¯j=∑i′vi′where i′∈αj, and αj=set of mining blocks inside the stope jExtract a subset γjfrom βjwithvj>0.Identify overlapping stopes in γj, and adjust to create a family of sets of non-overlapping stopes Fkover γj(use stope location i.e. sxj, syj, szj, exj, eyj, ezjfor this adjustment):sxj,syj,szj≤sxj′,syj′,szj′≤exj,eyj,ezjsxj,syj,szj≤exj′,eyj′,ezj′≤exj,eyj,ezjwhere j, j′∈γj,Create a family of unique sets of non-overlapping stopes Fusubset to Fk(identify and discard sets of non-overlapping stopes that are subset to another set of non-overlapping stope). For example,Sk′,Sk″, andSk″′are three sets of non-overlapping stopes a, b, d, and e whereSk′=[a,b],Sk″=[a,b,d],Sk″′=[a,b,e]andSk′,Sk″,Sk″′∈Fk. Since,Sk′⊂Sk″andSk′⊂Sk″′, consequently,Sk′shall be discarded to create unique setsSk″andSk″′, and nowSk″,Sk″′∈Fu.Calculate the valuev¯¯uof each unique set of non-overlapping stopes in Fuas follows:(6)v¯¯u=∑j′v¯j′Determine the maximumv¯¯maxamongv¯¯. Select Su∈Fusuch thatv¯¯max=vu.Fig. 8explains the steps of the stope optimiser algorithm through a flow chart.Fig. 9presents the pseudo code for the proposed algorithm.This section presents the implementation of the algorithm at a realistic ore body model. The ore body model represents a standard copper deposit consisting of 47,052 irregular sized blocks with the largest size being 20m×20m×20m. The material density varies from 2.62t per m3 to 4.66t per m3. The copper grade varies from 0 to 15.3197%, with an average grade of 0.020975%.The steps of the proposed algorithm have been implemented through C# in Microsoft® Visual Studio® 2010, which incorporates SQL databases and scripts in Microsoft® SQL Server® 2008 for ore body model data handling. Similarly, 3D visualisations of the optimal solution are performed using Surpac™ mine design software [29].During initialisation, upon reading the relevant information, the algorithm transforms the original (irregular) ore body model to regular mining blocks with a fixed size of 10m×10m×10m, leading to an increase in the number of mining blocks from 47,052 to 287,984. Consequently, the algorithm assigns the grade and material densities to the regularised mining blocks proportionally. In the regularised block model, the material density varies from 2.62t per m3 to 4.51t per m3 and copper grade varies from 0 to 8.9104%, with an average grade of 0.020586%. Given the regularised ore body model and the defined stope size limit of 27 (nx=3, ny=3, nz=3) and 64 (nx=4, ny=4, nz=4) mining blocks inside a particular stope, the algorithm implements steps (2)–(6), sequentially, requiring a number of iterations within each step. Assume, Case A refers to the implantation on stope size 3×3×3 and Case B refers to stope size 4×4×4. In case A, step (2) generates 255,120 possible stopes and step (3) updates stope attributes through Eqs. (1)–(5). From the generated possible stopes, step (4) extracts 4547 stopes with economic value greater than zero (i.e. stopes with positive economic value). Similarly, in case B, step (2) and (3) generate 239,446 possible stopes, and update stope attributes. Step (4) extracts 5024 positive-valued stopes. Table 1presents the attribute values for cases A and B updated through step (3).Given the positive-valued stopes from step (4), the possible combinations to generate sets of non-overlapping stopes in step (5) are enormous (infinite), leading to the computational complexity of the problem. The algorithm is thus modified to address this issue. As such, the modified algorithm implements step (5) over a number of iterations. In each iteration, the algorithm limits the sets of non-overlapping stopes to a predefined count, implements steps (5) to (6), and records the highest value solution through equation (7). For each subsequent iteration, it increments the count for sets of non-overlapping stopes to a new value, repeats steps (5)–(8), performs a comparison of new and old solutions, and continues until the convergence of the solution. Fig. 10presents the outcomes of the modified algorithm for cases A and B, respectively.Fig. 10 demonstrates an increase and convergence in the solution value with an increase in the count of sets of non-overlapping stopes. However, given the computational complexity of the problem, it is observed that the solution time increases exponentially with an increase the set count. For example, in case A, on an Intel®, dual core 3.00GHz processor and 4GB RAM, the algorithm achieves solution within 1 minute at set count=500, whereas, the solution time at set count=10,000 remains 17h and 54min. Fig. 11presents the optimal solutions for cases A and B. Similarly, Table 2demonstrates a comparison of the optimal solutions in cases A and B.Table 2 shows that case A generates higher value solution as compared to case B, suggesting that stope size 3×3×3 is the ideal choice between the two options.In this section, the performance of the proposed algorithm is compared with MVN algorithm that has been implemented in commercially available mining software [28]. This implementation of the algorithm requires defining underground mining levels (refer to Fig. 3) as an input to the stope optimisation process. Given that cases A and B do not incorporate underground mining levels, case C is introduced with stope size defined as 36 (nx=4, ny=4, nz=3) mining blocks at a mining level height restricted to 3 blocks along z-axis. The proposed and MVN algorithms take the regularised ore body model as an input and generate optimum solutions for case C. Table 3shows a comparison of solutions of the two algorithms for case C.Table 3 shows that the proposed algorithm generates 10.7% higher value than the MVN algorithm for this case. Furthermore, the proposed algorithm generates a set of mineable stopes based on the given stope size, whereas, the MVN algorithm produces a set of mining blocks violating the stope definition. While, the solution time for MVN is less than that of the proposed algorithm, because MVN algorithm generates a single solution based on the maximum value neighbourhood rather than multiple feasible solutions as implemented in the proposed algorithm, the proposed algorithm generates higher overall economic value. Fig. 12shows the optimal solutions generated by the two algorithms for case C.

@&#CONCLUSIONS@&#
This article presents an innovative heuristic algorithm to solve the stope layout problem for an underground mining operation. The algorithm takes an ore body block model as an input, generates a set of all possible stopes, and recommends the unique solution which maximises the economic value of the stope layout under physical and geotechnical constraints. The article describes and establishes the computational complexity of the stope layout problem, more specifically, in the context of generating unique and non-overlapping stopes, and unlike previous studies, an implementation of the algorithm in an actual case study reflects the success in addressing the computational complexity of the problem.The application of the algorithm in cases A and B demonstrates that the algorithm is robust and its structure ensures convergence to the highest economic value, however, depending upon the stope size and resulting stope combinations, the solution time to generate the optimal stope layout may vary from one scenario to the next. The validation study indicates that the proposed algorithm generates more profitable solutions than the industrially available MVN algorithm for realistic block models. While, the proposed method generates unique and non-overlapping stopes, it is limited to the predefined stope sizes. Also, it ignores the stope shape variations and the provision of rock pillars between consecutive stopes for improved stability of these production zones. Therefore, in future, it will be worth incorporating these additional features into the structure of the algorithm.