@&#MAIN-TITLE@&#
Model-based fault localization in bottling plants

@&#HIGHLIGHTS@&#
We created a customizable solution for automatic fault diagnosis in bottling plants.The model-based approach allows the generation of individual diagnosis solutions.New validated models for all relevant plant components were developed.The diagnosis solution was tested in practical scale and judged as a useful tool.Up to 87.1% of compliant diagnosis results were obtained.

@&#KEYPHRASES@&#
Model-based fault localization,Automatic fault diagnosis,Consistency-based diagnosis,Bottling plant,Packaging line,

@&#ABSTRACT@&#
The bottling of beverages is carried out in complex plants that consist of several machines and material flows. To realize an efficient bottling process and high quality products, operators try to avoid plant downtimes. With actual non-productive times of between 10% and 60%, the operators require diagnosis tools that allow them to locate plant components that cause downtime by exploiting automatically acquired machine data.This paper presents a model-based solution for automatic fault diagnosis in bottling plants. There are currently only a few plant-specific solutions (based on statistical calculations or artificial neural networks) for automatic bottling plant diagnosis. In order to develop a customizable solution, we followed the model-based diagnosis approach which allows the automatic generation of diagnosis solutions for individual plants. The existing stochastic and discrete-event models for bottling plants are not adequate for model-based diagnosis. Therefore, we developed new first-principle models for the relevant plant components, validated them numerically, and abstracted them to qualitative diagnosis models. Based on the diagnosis engine OCC’M Raz’r, application systems for two real plants and one virtual plant (based on discrete-event simulation) were generated and evaluated. Compared to the reasons for downtime identified by experts, we obtained up to 87.1% of compliant diagnosis results. The diagnosis solution was tested by practitioners and judged as a useful tool for plant optimization.

@&#INTRODUCTION@&#
A bottling plant for filling beverages into returnable bottles is an assembly of different types of specialized machines and conveyors. They automatically handle the complete process, from pallets with crates containing empty bottles to the final output of pallets with (cleaned) crates and filled and labeled bottles. The plants can be large, distributed over several halls, and have a complex 3D layout, as illustrated in Fig. 1. This shows a bottling hall of a brewery with two large bottling plants. One can see the filling, labeling, packing, and cleaning machines at the back and conveying systems for empty, filled, and labeled bottles at the front.From an abstract point of view, which reflects the flows and manipulation of different types of objects, the basic schematic topology can be simplified as indicated in Fig. 2. There are lines for primary packaging (M3 for cleaning bottles, M4 for filling and capping bottles, and M5 for labeling bottles), secondary packaging (unpacking and packing crates with M2 and M5) and tertiary packaging (de-palletizing and palletizing with M1 and M7), all organized as an automated branching but directed flow. Certain backward loops, such as re-submission of improperly cleaned or filled bottles to previous steps, are omitted in Fig. 2. Besides the machines (M1–M7) shown in Fig. 2, there are additional machines for inspection and for sorting out improper objects.In order to prevent oxygen intake or microbiological contamination of the beverage, a major objective is to avoid interruptions to the filling process (M4). Apart from internal reasons, the filling and capping machine will stop operating if there is a lack of input, i.e. bottles, or a tailback of filled bottles preventing further output, i.e. disturbances caused by other machines (Section 5 presents two examples). Due to the high speeds and output rates (up to 100,000 packages per hour), machines and conveyors are failure-sensitive with a degree of availability of 92–98% [1]. In order to avoid each disturbance of a machine in the line resulting in the filling machine stopping, the conveyors are designed as buffers (BB2-5, BC1,2,5, BP0,1), which should provide a continuous supply and output to/from other machines and, in particular, the filling and capping machine (M4). This works in conjunction with a general operating principle: machines and conveyors upstream and downstream from the filler operate at higher throughput rates than the filling machine. This principle is usually the only global one. There is no global control and the machines are controlled individually (or, sometimes, as small aggregates).In practice, these provisions cannot guarantee avoidance of unwanted idle time of the filling machine. Unplanned downtime of the plant can be 10–60% ([2,3]) of the planned production time. Taking steps to reduce downtime by identifying frequent causes requires statistics and an analysis based on the recorded operating data supplied by (some of) the machines. These operating data capture only status information about the machine, such as normal_operation, stopped (due to an internal cause or intervention), lack (stopped because of missing input material), and tailback (stopped because of output by the next component). Due to the interlaced flows of the various object types, time offsets, the large scale of the plants, and the amount and often fragmentary nature of the data (for instance, there are no status data of conveyors), this analysis can be difficult and time-consuming. As a consequence, the bottle filling and packaging industries are very interested in an automated diagnosis tool for their plants that provides information about bottlenecks and weaknesses in the plant, regarding both the physical performance and configuration and the control principles and parameters.Providing such a tool was the goal of the LineMod project that is described in this paper. The project was carried out to find a solution for automatic fault diagnosis of bottling plants. The project addressed industrial needs by localizing the causes of reduced performance of the plant (mainly tied to the output of the filling machine) based on the available production data of the machines (e.g. over a period of weeks or months). Many of the potential end users, for example breweries, are small or medium-sized enterprises that cannot afford spending many resources on the establishment or adaptation of a tailored diagnosis system for their plant. Another practical requirement was to be able to cheaply accommodate frequent changes to the structure of the line, due to rearrangement or addition of machines. Additionally, a plant is a combination of machines from various manufacturers with different instrumentation and data availability. These issues suggested a need for a model-based solution to diagnosis, which allows adaptation to be performed by simply (re-)specifying the plant structure. The project focused on interruptions to transportation that caused a total standstill of the filling machine due to a lack or tailback of containers (as opposed to an automatic reduction of machine speeds to prevent filler stops).This paper starts with a survey of previous literature in order to position our work (Section 2). Section 3 first summarizes the foundations of the chosen approach to diagnosis, called consistency-based diagnosis. Then it presents the key contribution of this paper, the library of the component models that were developed for the domain of bottling plants, and we describe the diagnosis solution. Both have been described in more detail in previous publications (see [4–6]).Section 4 discusses the validation of the component models and the evaluation of the results of the implemented solution using both incidents on real plants and simulated incidents. We carried out a validation of the numerical base model components and present exemplary results. To evaluate the final diagnosis solution we followed two routes, one based on simulation data acquired by discrete event simulation on a plant and the other based on recorded data from two real world bottling plants and a comparison with manual analysis. We present the results and explain them with the help of sample scenarios. Finally, the project outcome is discussed with regard to industrial applicability.Among the existing approaches for modeling bottling plants, several deal with statistical distributions of disturbances and failures and aim to provide a basis for modeling or simulation of the respective plant structures ([7–9], or [10]). Models of chained production lines, which include the application area of bottling and packaging considered here, can be found in queuing theory [11]. Many other solutions pursue analytical approaches. Based on Markov chains, filling degrees of buffer elements can be approximately predicted (see [12,13]). The approach is based on stochastic models describing state changes of a plant with differential equations. However, all stochastic approaches need simplifications to enable the equation systems to be solved. Some important simplifications are (for a more detailed listing see [14]):•Disturbances and failures of machines occur randomly. Lacks or tailbacks in the flow of material caused by failures of downstream or upstream machines have no effect on other machines. Hence, failures are not propagated.The number of operating employees is always sufficient to resolve a disturbance within its determined period of malfunction.Disturbances only occur while machines are operating; if a machine is in lack or tailback states, no disturbance can occur.Along the whole plant, no objects are removed or rejected.Due to these few but necessary simplifications, this approach based on Markov chains is an inadequate solution for diagnosing faulty behavior in bottling plants and is therefore unsuitable for a diagnosis tool. Further characteristics of the application domain, which are not considered, are:•Besides there being a flow of primary packaging materials (bottles), closed flows of secondary packaging materials (crates) and tertiary packaging materials (pallets) also exist.Machines can operate with different output rates and conveyors can transport objects with different velocities; in modern plants, velocities and output rates are controlled.Certain machines can be electronically or mechanically “locked” to form one machine (such as the filling machine and the inspector of the investigated plant structures).Certain machines (such as bottle washing machines) can buffer a considerable number of objects. This has a high impact on the overall behavior of a plant because temporary failures of upstream machines can be compensated due to buffer capacities or failure propagation can be considerably delayed.Inspector machines can remove or reject defective objects.In industry, discrete-event-simulation models are also used for detailed modeling of system behavior. Plants are planned and designed using these kinds of simulation models. Furthermore, it has been attempted to raise the productivity by adjusting and optimizing single machine parameters, and output rates of machines and plants are predicted ([15–18], or [10]). For research activities, simulations have also been used to model virtual systems with realistic behavior ([19,20], or [21]). However, while discrete-event models are useful for simulating the possible behavior of plants under some given initial conditions, they do not lend themselves as diagnosis solutions where the task is to identify a specific actual fault scenario in the plant.

@&#CONCLUSIONS@&#
