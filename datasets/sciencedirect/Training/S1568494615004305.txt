@&#MAIN-TITLE@&#
A memetic algorithm for cardinality-constrained portfolio optimization with transaction costs

@&#HIGHLIGHTS@&#
Novel memetic algorithm for optimal portfolio selection.Proposed framework considers transaction costs, cardinality and other real-world constraints.The combinatorial and the continuous optimitzation aspects of the problem are handled separately.Adaptation of the RAR crossover operator for an extended set encoding.We find that using certain regularization mechanisms results in more efficient portfolios.Ignoring transaction costs results in inefficient portfolios out-of-sample.

@&#KEYPHRASES@&#
Genetic algorithms,Combinatorial optimization,Portfolio selection,Transaction costs,

@&#ABSTRACT@&#
A memetic approach that combines a genetic algorithm (GA) and quadratic programming is used to address the problem of optimal portfolio selection with cardinality constraints and piecewise linear transaction costs. The framework used is an extension of the standard Markowitz mean–variance model that incorporates realistic constraints, such as upper and lower bounds for investment in individual assets and/or groups of assets, and minimum trading restrictions. The inclusion of constraints that limit the number of assets in the final portfolio and piecewise linear transaction costs transforms the selection of optimal portfolios into a mixed-integer quadratic problem, which cannot be solved by standard optimization techniques. We propose to use a genetic algorithm in which the candidate portfolios are encoded using a set representation to handle the combinatorial aspect of the optimization problem. Besides specifying which assets are included in the portfolio, this representation includes attributes that encode the trading operation (sell/hold/buy) performed when the portfolio is rebalanced. The results of this hybrid method are benchmarked against a range of investment strategies (passive management, the equally weighted portfolio, the minimum variance portfolio, optimal portfolios without cardinality constraints, ignoring transaction costs or obtained with L1 regularization) using publicly available data. The transaction costs and the cardinality constraints provide regularization mechanisms that generally improve the out-of-sample performance of the selected portfolios.

@&#INTRODUCTION@&#
The classical framework for the selection of optimal portfolios was established by Markowitz in [25]. The problem consists in finding the allocation of a fixed budget in a universe of assets that maximizes the expected return from the investment in a given period while minimizing the corresponding risk. Since the future evolution of stock returns is uncertain, these returns are modeled as random variables. In the standard Markowitz formulation the risk is quantified in terms of the variance of the portfolio returns. Portfolio selection is therefore a multiobjective optimization task with two conflicting goals: the maximization of profit and the minimization of risk. It can be formulated as a quadratic programming (QP) problem that can be readily solved using standard quadratic optimization techniques. One of the shortcomings of the standard (unconstrained) Markowitz framework is that small variations in the inputs of the model (i.e. in the vector of expected values or in the covariance matrix of the asset returns) often lead to large changes in the composition of the resulting portfolios [7]. Another important drawback is that the portfolios selected generally have poor out-of-sample performance (see [29] and references therein). To address these issues additional constraints can be considered in the model. For instance, it is possible to include no short-selling constraints [16], which restrict all portfolio weights to be non-negative. Besides improving the robustness and performance of the portfolios, these additional constraints reflect actual restrictions in real-world applications. In particular, it is necessary to take into account the impact of the transaction costs incurred when the portfolio is rebalanced. Furthermore, limiting the number of assets in which the portfolio invests makes the management of the portfolio simpler. When cardinality constraints are included the problem becomes NP-Complete [31]. Standard QP solvers can no longer be used to address the portfolio selection problem. Therefore, one needs to resort to other types of methods to find near-optimal solutions at a reasonable computational cost.In this paper, we propose to use a memetic approach that combines a genetic algorithm (GA) [15] with an extended set encoding and quadratic programming (QP) to address the problem of portfolio optimization, taking into account transaction costs and other realistic constraints, such as cardinality constraints (restrictions on the maximum number of assets in the portfolio), minimum trading size constraints (restrictions on the minimum amount of assets that can be bought or sold), minimum and maximum bounds on variables or groups of variables (to limit the fraction of investment in a particular asset or group of assets) and no short-selling constraints (the portfolio weights are non-negative).The proposed memetic approach is benchmarked against other portfolio selection algorithms in experiments that quantify both the in-sample and out-of-sample performance. In-sample performance measures are used to assess how effective the optimization algorithm is and to what extent do the constraints considered affect the value of the objective function that is being optimized. However, practitioners are primarily interested in the out-of-sample performance of the portfolio: using the information that is available at the time of the investment, how does one allocate a fixed budget among different assets so that the expected future return of the portfolio is maximized, while minimizing the corresponding risk? In this respect, the results of the current investigation are in agreement with the observation that in-sample performance is generally not a good predictor of out-of-sample gains [28,10,2]. The situation is analogous to the problem of overfitting in supervised learning [3]: high predictive accuracy in the training data does not guarantee a good generalization performance (i.e. high predictive accuracy in unseen instances).A novel contribution of the memetic approach proposed in this work is the use of a set encoding for the candidate solutions that specifies not only which assets are included in the portfolio but also the type of trade (buy/hold/sell) that is carried out for each asset to rebalance the portfolio. The RAR crossover operator, which was introduced in [38], is adapted in this work to this extended set representation. The adapted RAR crossover operation produces individuals that satisfy all the constraints in the problem, so that no penalty functions or repair mechanisms are needed. An additional contribution of the current investigation is to illustrate how cardinality constraints and transaction costs act as regularization terms. Including these constraints in the optimization problem generally improves the robustness and out-of-sample performance of the portfolios.The paper is organized as follows: previous approaches to the problem are reviewed in Section 2. In Section 3 the problem of mean–variance portfolio selection under transaction costs is described. Section 4 introduces the memetic approach proposed in this work to address the problem. The effectiveness of this approach is illustrated in experiments whose results are presented and discussed in Section 5. Finally, Section 6 summarizes the conclusions and perspectives of the current investigation.

@&#CONCLUSIONS@&#
In this work, a novel memetic algorithm is introduced to address the problem of optimal portfolio selection with piecewise linear transaction costs, cardinality constraints and minimum trading size restrictions. The algorithm is based on handling the combinatorial and the continuous aspects of the optimization separately.The combinatorial problem of selecting the subset of assets of the specified cardinality in which the portfolio invests is addressed by a genetic algorithm in which candidate solutions are represented as extended sets. The elements in the set correspond to the assets included in the portfolio. For each asset, the chromosome considers an additional attribute that indicates the type of trade (‘buy’,‘hold’,‘sell’) that needs to be made in the portfolio rebalancing. The exploration and exploitation capabilities of the algorithm are enforced using specially designed crossover and mutation operators that take advantage of the specific features of the problem. For the selection process, the candidate solutions are evaluated by solving the portfolio optimization problem defined in the restricted investment universe under the conditions specified by the corresponding chromosome. This is a quadratic programming problem that can be solved by a standard quadratic optimization algorithm.One of the main contributions of this research is the adaptation of the RAR crossover operator to manipulate the additional attributes in the genetic representation that specify the direction of the trades in each asset during rebalacing. This extended RAR crossover (eRAR) allows to handle the transaction costs, cardinality constraints and minimum trading size restrictions in such a way that the offspring generated are always feasible.One possibility to improve the results of the proposed memetic approach is to implement other set-based crossover operators that exploit the structure of the problem. In particular, a novel crossover operator based on sets was proposed in [43]. This algorithm can be adapted to work with extended sets in a similar fashion as RAR. Additionally, dimensionality-reduction techniques similar to the ones proposed in [42] could be applied to this problem.Analyzing the results of the extensive empirical evaluation performed, we conclude that it is important to incorporate transaction costs explicitly in the optimization to obtain portfolios that have good in-sample, but specially out-of-sample performance. Another conclusion of this study is that cardinality constraints can also improve the out-of-sample performance of the portfolio. In general, portfolios with cardinality constraints have better out-of-sample performance than portfolios that invest in all assets. In summary, both transaction costs and cardinality constraints can be seen as regularization strategies that allow the identification of stable and robust portfolios with good out-of-sample performance.