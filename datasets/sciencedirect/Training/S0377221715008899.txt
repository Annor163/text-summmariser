@&#MAIN-TITLE@&#
An ILS-based algorithm to solve a large-scale real heterogeneous fleet VRP with multi-trips and docking constraints

@&#HIGHLIGHTS@&#
Framework using a trajectory search based algorithm applied to a large scale VRP.Real-world VRP application saving up to $110,000 through optimization.Smart and efficient neighborhood structures composed by Auxiliary Data Structures.TTT-Plots supporting algorithms efficiency test and calibration.

@&#KEYPHRASES@&#
VRP,Heterogeneous fleet,Multiple trips,Docking constraints,Iterated local search,

@&#ABSTRACT@&#
Distribution planning is crucial for most companies since goods are rarely produced and consumed at the same place. Distribution costs, in addition, can be an important component of the final cost of the products. In this paper, we study a VRP variant inspired on a real case of a large distribution company. In particular, we consider a VRP with a heterogeneous fleet of vehicles that are allowed to perform multiple trips. The problem also includes docking constraints in which some vehicles are unable to serve some particular customers, and a realistic objective function with vehicles’ fixed and distance-based costs and a cost per customer visited. We design a trajectory search heuristic called GILS-VND that combines Iterated Local Search (ILS), Greedy Randomized Adaptive Search Procedure (GRASP) and Variable Neighborhood Descent (VND) procedures. This method obtains competitive solutions and improves the company solutions leading to significant savings in transportation costs.

@&#INTRODUCTION@&#
Vehicle routing problems (VRP) seek to find routes to deliver goods from a central depot to a set of geographically dispersed customers. These problems, faced by many companies, are crucial in distribution and logistics due to the need of finding cost-effective routes providing high customer satisfaction. The classical routing problem, first proposed by Dantzig and Ramser (1959) and known as Capacitated VRP, has the objective of minimizing the total distance traveled by a homogeneous fleet of vehicles to serve the demands of all customers. Although this problem has been studied for more than five decades (Laporte, 2009), real applications remain a challenge. They feature a variety of operational restrictions and rules that complicate the problem and may have a significant impact on the solution. These additional considerations may affect customers, depots, and vehicles, for example.In this paper, we study a real VRP variant of a major distribution company in Europe that serves around 400 customers. This version of the problem addresses the following considerations:1.Limited heterogeneous fleet of vehicles: the company owns a fleet composed of different vehicle types;Possibility of vehicles performing multiple trips;Docking constraints that restrict certain customers to be served by certain types of vehicles;For each vehicle, a fixed and variable (transportation) cost.This problem is a variant of the Heterogeneous Fleet Multi-trip Vehicle Routing Problem (HFMVRP) introduced by Prins (2002). This new variant includes docking constraints and a different objective function. The goal is to minimize the total cost composed of (i) a fixed cost for using each vehicle, (ii) a fixed cost per customer visited, and (iii) a variable vehicle-dependent cost per distance traveled. Besides minimizing total distribution costs, for managerial reasons the company is also concerned about three other routing indicators, namely, (i) the total number of routes employed, (ii) the total distance traveled, and (iii) the vehicles’ idle capacity. Their purpose, apart from saving costs, is to have the least number of routes with full truckload vehicles.The HFMVRP is anNP-Hard problem, and, as such, exact methods have restricted applicability to obtain good solutions. Heuristic methods, like the one presented in this paper, are the most common approach to solve this type of problems. In particular, we use a heuristic algorithm, the GILS-VND, that combines three different procedures:1.Iterated Local Search (ILS) (Lourenço, Martin, & Stützle, 2003; Stützle, 2006);Greedy Randomized Adaptive Search Procedure (GRASP) (Feo & Resende, 1995; Resende & Ribeiro, 2010);Variable Neighborhood Descent (VND) (Mladenović & Hansen, 1997).We test our algorithm using real instances provided by the company. The algorithm proved to be fast and reliable, and the solutions obtained were better than those implemented by the company in all instances and dimensions. Overall, the major contributions of the current work are:•The study of a routing problem of a real company that includes docking constraints, a heterogeneous fleet and multi-trips, and with a realistic cost function based on distance, type of vehicle and customers visited.The design of a trajectory search metaheuristic combining ILS, GRASP and VND.The development of a new multi-trip constructive method inspired by the Clarke and Wright Savings procedure.The application of efficient Auxiliary Data Structures to optimize the search process in the proposed neighborhood structures.The remainder of this paper is organized as follows. Section 2 reviews the literature on heterogeneous VRPs. Section 3 defines formally the HFMVRP with docking constraints. Section 4 describes the GILS-VND algorithm used to solve this problem. Section 5 presents some computational experiments, and finally Section 6 draws the final considerations.VRPs with heterogeneous fleet (HVRP) can be divided according different features (Penna, Subramanian, & Ochi, 2013), including the vehicle availability (limited or unlimited) and vehicle costs (fixed or variable). When the fleet is limited, the number of vehicles and their capacity are known beforehand, and solution routes must consider this availability. In the case of unlimited fleet, however, the required number of vehicles to meet customer demands is unknown initially, and the problem must determine the fleet composition considering the vehicles’ cost and capacity.To the best of our knowledge, the first paper in the literature that involves an unlimited fleet with fixed costs was proposed by Golden, Assad, Levy, and Gheysens (1984). This problem is also referred as the Fleet Size and Mix VRP. The authors designed two heuristic methods to solve the problem: one based on best insertion and the other based on the classical Clarke and Wright Savings (CWS) heuristic (Clarke & Wright, 1964). The latter outperformed the former. They also developed a mathematical formulation for the variant with dependent costs, and obtained the first lower bounds for the VRP with unlimited fixed fleet. More studies on HVRPs with unlimited fleet came thereafter. Gendreau, Laporte, Musaraganyi, and Taillard (1999) included investment costs in the medium term and short-term operating costs that fluctuated according to the specific customers attended per day. The authors suggested an algorithm based on Tabu Search (TS) with a tour construction phase and an improvement phase that considered variable costs. They, however, assumed Euclidean problems only, where nodes were located in the same plane. Choi and Tcha (2007) obtained lower bounds for all variants of the unlimited fleet problem using a column generation approach based on the set covering problem. Baldacci and Mingozzi (2009) proposed a variant based on a set partitioning problem that used bounds provided by a procedure based on the Linear and Lagrangian relaxation. The procedure was applied to solve the main variants of the problem involving limited and unlimited fleet, with costs and dependent variables. The proposed method was able to solve instances with up to 100 customers, presenting itself as the state-of-the-art exact algorithm applied to the problem. Brandão (2009) followed the basic ideas of Gendreau et al. (1999) using a deterministic TS algorithm for the fleet size and mix VRP.Among the heuristic approaches presented in the literature, noteworthy are those based on Evolutionary Algorithms. Ochi, Vianna, Drummond, and Victor (1998) developed an algorithm that combines a Genetic Algorithm (GA) with Scatter Search. Liu, Huang, and Ma (2009) proposed a hybrid GA with a hybrid local search procedure. Prins (2009) presented two Memetic Algorithms. The first approach used a chromosome encoded as a giant tour, and a split procedure that performed the optimal distribution of vehicles and routes. The second algorithm used distance calculation strategies in order to diversify the search in the solution space. Tütüncü (2010) proposed a visual interactive approach based on a greedy randomized adaptive memory programming search algorithm to study an HVRP variant with backhauls. Penna et al. (2013) devised an algorithm based on ILS which used a random VND in the local search phase. More studies on different variants of the HVRP are compiled by Baldaccci, Battarra, and Vigo (2008), Imran, Salhi, and Wassan (2009) and Vidal, Crainic, Gendreau, and Prins (2013).The HVRP is gaining attention from researchers due to its applicability in real cases. In the past years, a variety of papers, including this one, have addressed more realistic setups involving a heterogeneous fleet with additional constraints. Belfiore, Yoshizaki, and Tsugunobu (2009) studied a real-life HVRP with time windows and split deliveries in a major Brazilian retail group. The authors generated some initial solutions that were improved by scatter search. Kritikos and Ioannou (2013) addressed an HVRP with time windows, in which some vehicles were loaded above their nominal capacity (overloads). The authors developed a sequential insertion heuristic with a component in the selection criteria of the non-routed customers and a penalty in the objective function for overloads. Leung, Zhang, Zhang, Hua, and Lim (2013) analyzed a two-dimensional loading HVRP using a simulated annealing with a heuristic local search. Ribeiro, Desaulniers, Desrosiers, Vidal, and Vieira (2014) studied the workover rig routing problem, which can be seen as a variation of the VRP without a depot. In the workover rig routing problem, routes of a heterogeneous fleet of rigs need to be found to minimize the total production loss of the wells over a finite horizon. The authors proposed and compared four heuristics: a variable neighborhood search heuristic, a branch-price-and-cut heuristic, an adaptive large neighborhood search heuristic and a hybrid GA. Another application of the adaptive large neighborhood search method was presented by Amorim, Parragh, Sperandio, and Almada-Lobo (2014). The authors considered a real heterogeneous fleet site dependent VRP with multiple time windows faced by a Portuguese food distribution company. Jiang, Ng, Poh, and Teo (2014) also studied an HVRP with time windows and employed a two-phase TS algorithm. Dayarian, Crainic, Gendreau, and Rei (2015) designed a branch-and-price methodology to tackle a real-life milk collection problem with heterogeneous fleet, multi-depot and other resource constraints. Another real application was handled by de Armas and Melián-Batista (2015), who proposed a variable neighborhood search algorithm to solve an HVRP with multiple and soft time windows and customers’ priorities. Although the problems exposed in this paragraph and our problem have different constraints, most of the algorithms designed to solve them rely on heuristic searches like ILS or variable neighborhood search.The HVRP variants that most resemble the variant we study in this paper are by Prins (2002) and Caceres-Cruz, Grasas, Ramalhinho, and Juan (2014). The reader will find a detailed comparison of both in Caceres-Cruz et al. (2014, Section 3). Our problem and these other two problems are routing problems that include a heterogeneous fleet with the possibility of performing multiple trips (HFMVRP). On one hand, Prins (2002) studied a large-scale real case of a French furniture manufacturer with 775 stores. In Prins’ problem, a time restriction of 5 hours on routes was imposed and the largest demand of a store could not exceed the smallest vehicle’s capacity. The author developed a CWS-based algorithm with two heuristics, New Merge Heuristic (MER) and MER2, to address the single- and the multi-trip problems, respectively. The algorithm solutions were improved via a steepest descent local search and a tabu search with a simple biobjective approach: minimizing the total duration of all trips and the number of vehicles. The results obtained outperformed the solutions used by the furniture company. On the other hand, Caceres-Cruz et al. (2014) also studied an HVRP with multi-trips inspired on the same distribution company that is discussed in the present work. The authors built a randomized hybrid algorithm based on the CWS heuristic, called Rand-MER. The Rand-MER is a biased randomized version of the MER algorithm that also uses local search methods based on cache and splitting techniques. The authors carried out extensive numerical experiments to compare the performance of the MER and the Rand-MER algorithms. To do so, they adapted the instances found in Prins (2002), Golden et al. (1984) and Li, Golden, and Wasil (2007) to make an objective comparison. They also modified the MER algorithm to run 10 company instances analyzed in our paper. The Rand-MER algorithm was able to outperform MER in all experiments conducted. Unlike our paper, both settings considered by Prins (2002) and Caceres-Cruz et al. (2014) did not consider docking constraints and only included distance-based costs in the objective functions.The HFMVRP described in this paper can be defined over an undirected graphG=(V,E),whereV={0,1,…,n}andE={(i,j)|i,j∈V,i<j}represent the vertices and the edges of the graph, respectively. The depot is denoted by 0 and vertices i ∈ V∖{0} represent the n customers, each one with a nonnegative demand di. Each edge (i, j) ∈ E has an associated nonnegative cost or distance cij. There is a fleet T composed of m different types of vehicles, i.e.,T={1,…,m}. For each t ∈ T there are mtavailable vehicles with capacity qt(in boxes of products), fixed cost cftper vehicle used, and variable cost cdtper distance traveled. There is also a fixed cost cctincurred per customer visited.We letS={(r,t)|t∈T,r=(v0,v1,…,vn(r)+1)}be a set of valid routes, where vi∈ V (0≤i≤n(r)+1), n(r) denotes the number of customers visited in route r and t is the vehicle type associated with the route. All routes start and end at the depot, so for each route r, we havev0=vn(r)+1=0. Therefore:•The route total demand is:Qrt=∑i=1n(r)dvi;The route total cost is:Crt=cft+n(r)×cct+cdt∑i=0n(r)cvi,vi+1;The route residual capacity is:Ert=qt−Qrt.This set of features characterizes the HFMVRP tackled in this work. The problem seeks to build a set S* that minimizes the total cost function given by:(1)TC=∑(r,t)∈SCrtNote that the cost of a route,Crt,is composed of three cost terms. For convenience, we group these terms by type for all routes and express the objective function asTC=CF+CC+CDwhere:•CF=∑(r,t)∈Scftis the total fixed cost of the vehicles used.CC=∑(r,t)∈Sn(r)×cctis the total cost of the customers visited.CD=∑(r,t)∈Scdt∑i=0n(r)cvi,vi+1is the total cost of the distance traveled by all vehicles.A valid route must satisfy the following criteria:1.Each route must start and end at the depot.Each customer is assigned to exactly one route.Each customer must be compatible with the vehicle type assigned to its route, i.e., given a route (r, t),∀vi∈r,comp(t,vi)=1,where comp(t, vi) is equal to 1 if the vehicle type t can serve customer vi, and 0 otherwise.The sum of customer demands in the route cannot exceed the maximum capacity of the vehicle type t assigned to that route, i.e.,Qrt≤qt.Each vehicle type can perform one or two routes, that is, it can be a single- or a multi-trip vehicle, respectively.Fig. 1displays a solution example for an HFMVRP with 12 customers, 2 types of vehicles, and only one vehicle per type. The “Parameters” table shows the parameter values for each vehicle type. The “Compatibility” table indicates the values of comp(t, i), for t ∈ {A, B} and i ∈ V∖{0}. Note that a type B vehicle cannot visit customers 8 or 10. The “Solution” table displays the resulting routes, with the total demand served, distance traveled, total cost and residual capacity. Note that the vehicle type A performs two routes, 1 and 3. The graph shows the sequence of the three routes: vertices have the corresponding customer demand, and arcs the corresponding distance next to them. For this example,CF=50,CC=17,CD=68,and the total cost isTC=135.

@&#CONCLUSIONS@&#
