@&#MAIN-TITLE@&#
Optimal two-period inventory allocation under multiple service level contracts

@&#HIGHLIGHTS@&#
We investigate a supply chain with multiple retailers and service level contracts.We analyze the optimal fulfillment of multiple service level contracts.We propose a service level contract balancing approach.

@&#KEYPHRASES@&#
Supply chain management,Contracting,Rationing,

@&#ABSTRACT@&#
Optimal inventory allocation policies have a significant impact on profits in the retail industry. A manufacturer ships products to the retailers’ stores where the end customers buy the product during the selling season. It has been put forward that it is beneficial for the manufacturer to reserve a certain fraction of the inventory for a second replenishment. Then the manufacturer can replenish the retailers’ inventories optimally and can take advantage of the risk pooling effect. In practice, retailers require a certain availability of the product throughout the selling season. Supply contracts are used to coordinate the delivery of products. Under such a contract, the manufacturer agrees to achieve a certain service level and to pay a financial penalty if she misses it. We analyze how a manufacturer responds to a service level contract if she wants to minimize her expected costs. We develop an allocation strategy for the multiple retailer case and find that our results allow for a better understanding of the effect of service level contracts on manufacturers and retailers.

@&#INTRODUCTION@&#
The decision on how to allocate inventory among multiple retailers during a selling season can have a significant impact on the costs of a manufacturer. When Hewlett-Packard rationed among retailers the Laser Jet III as they could not meet demand, they were not anticipating that retailers would exaggerate their future orders, resulting in excess costs for Hewlett-Packard (Lee, Padmanabhan, & Whang, 1993). It has been shown in literature that it is beneficial for the manufacturer to reserve a certain fraction of inventory for a second delivery to the retailers, in order to better balance the retailers’ inventories as much as possible (Jackson, 1988). Nevertheless, retailers have a natural interest in a certain availability of the manufacturer’s product throughout the selling season. Therefore, the manufacturer’s performance is controlled by supply contracts with specific financial consequences (Fry, Kapuscinski, & Olsen, 2001). There are several types of supply contracts that are commonly used. A particularly popular type of such contract is the service level contract (Sieke, Seifert, & Thonemann, 2012). Under a service level contract, retailers specify a service level that the manufacturer must achieve and the financial consequences of missing it. Hewlett-Packard and UPS Supply Chain Solutions are using service level agreements in order to better manage their partnership (Lewis, Rai, Forquer, & Quinter, 2007).Since most companies measure their own service levels and many companies also measure the service levels of their suppliers, the information required for implementing a service level contract is typically available at both partners of the supply chain. In the consumer goods industry, for instance, essentially all manufacturers measure their own service levels and 70 percent of the retailers measure the service levels of the manufacturers. In this industry, manufacturers and retailers typically agree on a service level that a manufacturer is expected to achieve (Behrenbeck, Küpper, Magnus, & Thonemann, 2007). However, one of the main challenges for the manufacturer is the optimal fulfillment of multiple service level contracts. This issue has not been analyzed in literature and we aim to fill the gap with this paper. We analyze a supply chain with one manufacturer and multiple retailers. The manufacturer has signed a service level contract with each retailer. Our interest is in optimal allocation policies for a given set of service level contracts. We analyze how a manufacturer responds to multiple service level contracts optimally. We derive decision rules that allow the manufacturer to trade-off between different contracts. The results of our analyses provide a foundation for decision makers when they have to allocate scarce inventory among multiple retailers.The remainder of the paper is structured as follows: In Section 2, we review the relevant literature. In Section 3, we present a mathematical model of a two-echelon supply chain that is governed by service level contracts. In Section 4, we analyze the one-retailer case. We derive the probability that a penalty has to be paid and show that a ship-all policy is optimal. We extend the analysis to multiple retailers in Section 5 where we trade-off between multiple contracts. We show how the manufacturer can make an optimal allocation at the second replenishment and compare our approach to an inventory balancing policy. We conclude in Section 6. All proofs are in the Appendix.Two streams of research are related to our work: research on inventory allocation decisions in two-echelon supply chains and research on service levels in inventory systems. Next, we review each stream in turn.The inventory allocation literature is the first stream of research that is related to our work. One line of research focuses on supply chains where the central warehouse does not hold any stock and only allocates the inventory optimally among the retailers. Eppen and Schrage (1981) analyze a model with identical costs at the retailers and develop a cost optimal policy. Federgruen and Zipkin (1984) extend their model to non-identical retailers and develop an approximation that is based on the assumption of ideal stock distribution among the demand points. Zipkin (1984) then analyzes the case where inventory imbalances are significant and improves the stocking policy for this case. Verrijdt and de Kok (1996) consider a model where a target service level should be guaranteed at the retailer echelon and develop an optimal ordering and allocation policy. Xu, Bisi, and Dada (2010) extend the research of Eppen and Schrage (1981) by ensuring safety factor equalization through strategically selected lost sales for any discrete or continuous demand distribution.The second line of research is similar to our setup. Inventory can be held back at the central warehouse for a later replenishment of the retailers. Jackson (1988) extends the model of Eppen and Schrage (1981) by allowing to reserve some inventory for a later delivery. They use a ship-up-to-S policy and show that the approach leads to a high reduction in backorder periods. Later Jackson and Muckstadt (1989) analyze the special case for two replenishment opportunities for identical retailers and provide easier approximations. Jönsson and Silver (1987) build on the previous research and use a service level as objective function like in our model. Since their service measure is based on an infinite-horizon, their analysis results in a backorder minimization. Subsequently, McGavin, Schwarz, and Ward (1993) provide important insights for the identical retailers case without considering holding costs. For the infinite-retailer system they show that a 50/25 policy gives good results, i.e., a second replenishment should take place in the middle (50 percent) of the selling season and 25 percent of the inventory should be reserved for this replenishment. They also suggest that this heuristic yields good results in the finite-retailer system.The research on service levels in inventory systems provides the foundation of our paper: In single-echelon supply chains, service levels are used to compute optimal inventory levels that guarantee a prespecified service level at minimal cost. In multi-echelon inventory systems, service levels are typically specified at the most downstream echelon and cost minimizing target inventory levels are computed for each echelon. A review of the relevant service level models can be found in Diks, de Kok, and Lagodimos (1996). Research on service levels in Vendor-Managed Inventory (VMI) systems are particularly relevant for our research. Fry et al. (2001) show that (z,Z)-type VMI contracts perform better than retailer-managed inventory policies. The minimum and maximum inventory levels are denoted by z and Z and penalty payments are due if the inventory levels fall below or above these thresholds. This contract type assures a minimum availability of the product, but limits the maximum inventory at the retailer’s warehouse at the same time. Choi, Dai, and Song (2004) consider a two-echelon supply chain where the supplier has finite capacity and manages the inventory of his components at the manufacturer’s site under a VMI arrangement similar to our model. The manufacturer uses the components for assembling the final product with a finite production capacity. He faces stochastic end customer demand and requires a certain customer service level. Choi et al. (2004) show that specifying target service and backorder levels for the supplier leads to optimal inventory decisions at the supplier.While the latter papers base their analyses on traditional long term service level measures, some recent work has analyzed the distribution of service levels if performance is measured over a finite number of periods. Chen, Lin, and Thomas (2003) study the effect of a finite time horizon on the service level. This approach is of particular interest in practical applications because infinite horizon service levels are difficult to control in reality as companies measure performance over finite time horizons. The authors show that using an infinite horizon to derive optimal base stock levels in a periodic review system leads to a higher than desired short term service level. Subsequently, Thomas (2005) analyzes the effect of the length of the time horizon on the distribution of service levels.In our work, we extend the literature on inventory allocation policies by integrating service level contracts. We use the work of Thomas (2005) to integrate finite horizon service level measures in the objective function and charge financial penalties if a contract service level is not achieved.We consider a two-echelon supply chain with one manufacturer that produces one product (Fig. 1). The product can only be sold during one selling season and is delivered to N identical retailers (indexed byi=1,…,N). The retailers face stochastic, continuous, and stationary end customer demand that is independent and uncorrelated between periods and retailers. We denote the demand in period t at retailer i by ξitand the corresponding p.d.f. and c.d.f. by f(ξit) and F(ξit), respectively. The mean is μ and the standard deviation σ. Demand can be arbitrarily distributed as long as the p.d.f. is strongly unimodal with a non-negative skewness. This property holds for most theoretical distributions that are relevant for modeling demand, such as the Normal, truncated Normal, Gamma with shape parameter α > 1, and the Uniform distributions. For an in-depth treatment of logconcave distributions and their application to inventory control we refer the reader to Rosling (2002). To keep our analyses concise, we will focus on distributions with infinite non-negative support. Distributions with finite support can be treated analogously, but they require the definition of feasible regions for the parameter values of the supply contracts, which makes the analysis much more complex and adds little value.The system is managed by a central decision maker, the manufacturer, where the overall objective is to minimize the manufacturer’s and the retailers’ expected costs for the selling season. Our setup is similar to a VMI system where the manufacturer is responsible for the management of her products at the retailers’ sites. Under such an agreement the manufacturer decides on the shipment quantities (Bernstein, Chen, & Federgruen, 2006). The manufacturer produces R units of the product int=0,i.e., at the beginning of the selling season, without knowing the exact customer demand. She has two replenishment opportunities,t=1andt=2,to ship the product to the retailers’ stores. Two replenishment opportunities are widely used because they offer a good trade-off between the additional fixed delivery costs and the potential savings due to the risk pooling effect (Güllü & Erkip, 1996; Jackson & Muckstadt, 1989). The replenishments of the manufacturer arrive at the retail stores instantaneously, i.e., with zero lead time. Excess customer orders are backordered. The backorder assumption is reasonable in cases where the customers do not have an immediate substitute for the product or where the retailer can quote different lead times to the customer. The latter case is widely used at online retailers. For example, Amazon.com can backorder customer orders into the next replenishment period by quoting longer lead times on their web page.The sequence of events during the selling season is as follows: First, the manufacturer produces R units of the product and allocates the initial inventory to the retailers at the beginning of the first periodt=1. We define α as the reservation factor and it is the fraction of inventory that is reserved for the second delivery. The retailers then receive the customer orders and fill them. If the inventory is not sufficient to fill all customer orders, the retailers backorder and fill the orders after new inventory has arrived att=2. The unit backorder cost at retailer i is b. A unit holding cost h is charged for every left over inventory either at the manufacturer or the retailer. We assume that the holding cost is independent of where the inventory is hold in order to avoid benefits of holding inventory at the manufacturer (Jackson & Muckstadt, 1989). Int=2,the manufacturer can replenish the inventories at the retail stores. The retailers fill open backorders first and start fulfilling new orders if inventory is available. Demand int=2that cannot be filled is backordered. At the end oft=2,excess inventory at the retailers is either transshipped to other retailers in order to fill open backorders. Excess inventory (after transshipments) incurs a unit holding cost of h. Our model can be easily extended to accommodate the case of salvaging inventory at the end of the selling season.To ensure an adequate performance, the retailers require that the manufacturer guarantees a certain service level for the product. This is a common approach in VMI systems as it has been suggested by Choi et al. (2004) or Fry et al. (2001). Choi et al. (2004), for example, use as β-service level (also Type-II service) the infinite-horizon measure1−β=1−expectedunsatisfieddemandperunittimeexpecteddemandperunittime.We focus on contracts that have a finite measurement horizon. The retailers measure the service level during the two replenishment periods. Then, the service level is stochastic. That means that it is not known with certainty which service level can be achieved during a selling season for given replenishments int=1,2(Thomas, 2005).In our paper we consider a flat penalty contract similar to Sieke et al. (2012). Under such a penalty contract, the manufacturer pays the retailer a fixed amount p for a selling season in which the contract service level 0 < SL ≤ 1 is not met, i.e., for a season in which the manufacturer’s replenishments do not allow the retailer to fill at least a fraction SL of the customer demand immediately from stock. Such contracts are commonly used in practice (Shapiro, McOriary, & Cline, 1992). Int=1,the number of units short is(ξi1−Si1)+where Si1 denotes the shipment quantity from the manufacturer to retailer i in period 1. Int=2,only the additional units short are counted towards the service level of the second period, in order to avoid double-counting of backorders that were already accounted for int=1. The additional units short in the second period are(ξi2−(Si1+Si2−ξi1)+)+,where Si2 denotes the shipment quantity from the manufacturer to retailer i in period 2. The reservation factor α is then defined asα=Si2R. The penalty cost function can be written as(1)Pi(Si1,Si2,ξi1,ξi2)={pif(ξi1−Si1)++(ξi2−(Si1+Si2−ξi1)+)+ξi1+ξi2>1−SL0otherwise.In this section, we will gain some important insights on the behavior of a service level contract by analyzing the single-retailer case which serves as a building block for the multiple-retailer case. In the single contract case, the manufacturer only serves one retailer i. We are interested in solutions that coordinate the supply chain. Therefore we present the centralize and decentralized solution and identify the contracts (p, SL) that coordinate the supply chain.In order to gain some important insights on the optimal inventory allocation among multiple retailers we analyze the centralized supply chain. The service level penalty can be omitted in the centralized objective function, because it is a payment transfer between the manufacturer and the retailer. The objective is to decide on the shipment quantities from the manufacturer to retailer i for the two periods Si1 and Si2 that minimize the total supply chain cost denoted asCiSCfor periodst=1,2which, for this one retailer i, is given by(2)minSi1,Si2ECiSC(Si1,Si2)=E[b(ξi1−Si1)++b(ξi1+ξi2−Si1−Si2)++h(Si1−ξi1)++hSi2+h(Si1+Si2−ξi1−ξi2)+],withSi1+Si2=R.The above objective function is convex in Si1 and in Si2. It can be easily proven that in the case of one retailer there is no risk-pooling benefit from reserving inventory at the manufacturer for a second replenishment and therefore a ship-all policy is optimal (Jackson & Muckstadt, 1989).At the beginning of the selling season, the manufacturer is uncertain about the service level performance that she will finally achieve during that season. The cost of the manufacturer for a retailer i is(3)minSi1,Si2ECiM(Si1,Si2)=E[hSi2+h(Si1+Si2−ξi1−ξi2)++Pi(Si1,Si2,ξi1,ξi2)],withSi1+Si2=R.The first two terms of the manufacturer’s cost function represent the holding cost for the inventory physically remaining at the manufacturer at the end of the first and second period correspondingly. The third term is the penalty to be paid to the retailer for not satisfying the service level contract. The manufacturer’s first decision consists of the production quantity R and the initial allocation quantity Si1. The holding cost depends on Si1 and Si2 but the penalty costs have a more complex behavior. Therefore, we will analyze them next. Eq. (1) shows that a penalty p has to be paid by the manufacturer if the service level cannot be met, i.e., if(ξi1−Si1)++(ξi2−(Si1+Si2−ξi1)+)+ξi1+ξi2>1−SLor(ξi1−Si1)++(ξi2−(Si1+Si2−ξi1)+)+−(1−SL)(ξi1+ξi2)>0.Since we are interested in the expected penalty costs, we need to derive the probability of a penalty event, by partitioning the demand space (ξi1, ξi2). The demand partitions correspond to certain stock-out events during the selling season. The following proposition summarizes the conditions for a penalty payment:Proposition 1A penalty payment p has to be paid to the retailer if•ξi2>R+Si1SL−(1SL+1)ξi1for R > ξi1 > Si1andξi1+ξi2>R,orξi2>Si1SL−ξi1for ξi1 > R ≥ Si1andξi1+ξi2>R,orξi2>RSL−ξi1for ξi1 ≤ Si1andξi1+ξi2>R,orξi2<−Si1(1−SL)+SL1−SLξi1for ξi1 > Si1andξi1+ξi2≤R.Proposition 1 states the cases where a penalty payment p has to be paid to the retailer, considering all combinations of whether there was a stock-out in periodt=1or a stock-out at the end of periodt=2. Fig. 2 shows the demand space for a service level 0 < SL < 1 and a low initial allocation Si1 ≪ R. The grey Areas 1–3 indicate the demand space where a penalty payment has to be paid. In Area 1, the initial allocation Si1 was sufficient to fill all demands in the first period, but the second period demand was too high to achieve the contract service level. In Area 2, not all customer demands could be filled in the first period and, furthermore, at the end of the second period some customer orders are still outstanding. In Area 3, the initial inventory Si1 was not sufficient to fill all customer orders int=1. However, the inventory level at the beginning of the second period was high enough to fill all backorders from the first period and a sufficient number of demands in the second period. An exceptional case can appear when the first period demand cannot be fulfilled although the retailer received a high initial allocation Si1 ≤ R and is seen in Fig. 3. This figure shows that the slope at the bottom left of Area 4 equals the slope of Area 1. In this case the demand int=1was higher than the total available inventory R and not a single second period demand could be filled.By integrating the demand probabilities over the demand partitions where a penalty is due, we can derive the probability of a penalty event.Proposition 2The manufacturer has to pay a penalty p with probabilityPr(Pi>0)=∫ξi1=0Si1(1−F(RSL−ξi1))f(ξi1)dξi1+∫ξi1=Si1min(Si1+(1−SL)R,R)(1−F(R+Si1SL−(1SL+1)ξi1))f(ξi1)dξi1+∫ξi1=Si1/SLmin(Si1+(1−SL)R,R)F(−Si1(1−SL)+SL(1−SL)ξi1)f(ξi1)dξi1+1−F(min(Si1+(1−SL)R,R))−∫ξi1=RSi1/SLF(Si1SL−ξi1)f(ξi1)dξi1.The right-hand side terms in Proposition 2 capture the probability of a penalty event for Areas 1–4 correspondingly. For a contract service levelSL=1we get a simple stock-out contract where a penalty is due if in any of the two periods at least one stock-out occurred. Fig. 4shows the case for a service level ofSL=1. In this special case the probability of a penalty simplifies toPr(Pi>0)=∫ξi1=0Si1(1−F(R−ξi1))f(ξi1)dξi1+1−F(Si1).Based on the penalty probability from Proposition 2, we can identify the optimal inventory reservation policy that is summarized in the following proposition.Proposition 3For the single-contract case a ship-all policy is optimal, where the unique cost-minimizing production quantity Rs satisfies−pSL(F1*F2)′(RsSL)+h(F1*F2)(Rs)=!0,where (F1 * F2) is the c.d.f of the demand convolution over the two periods. A ship-all policy is optimal for one retailer because the manufacturer does not have an incentive to hold back inventory as he cannot realize any risk pooling effects.Proposition 4The manufacturer’s production quantity is equal to the centralized optimal quantity, if(4)p=hSL(b−h)/(b+h)(F1*F2)′(F−1(b−hb+h)/SL).Since in both the centralized and the decentralized case a ship-all policy is optimal we do not need to define the reservation factor α in the previous proposition as it will be zero. For the flat penalty case Sieke et al. (2012) proved that the penalty cost p is quasi-convex in the contract service level SL.In this section we discuss the multiple retailer case and show how the manufacturer can take advantage of the risk-pooling effect by holding back inventory and allocating it optimally among the retailers. Similarly, we present the centralized and decentralized solution and identify contracts (p, SL) that coordinate the supply chain.In the centralized supply chain, the objective is to decide on the optimal shipment quantities from the manufacturer to N identical retailers for the two periods that minimize the total supply chain cost denoted as CSC(5)minS¯1,S¯2ECSC(S¯1,S¯2)=E[b∑i=1N(ξi1−Si1)++b∑i=1N(ξi1+ξi2−Si1−Si2)++h∑i=1N(Si1−ξi1)++h∑i=1NSi2+h(∑i=1N(Si1+Si2−ξi1−ξi2))+],with|S¯1|+|S¯2|=R,whereS¯t=(S1t,…,SNt)denotes the shipment vector in periodst=1,2. The operator | | sums the components of a vector, for instance,|S¯1|=∑i=1NSi1. In the case of N identical retailers it can be easily shown that the optimal first period allocation is equal for all retailers, i.e.Si1=(1−α)RN. The second period allocation depends on the first period performance of all retailers and the remaining inventory at the manufacturer. For a discussion of solving techniques of such problems please refer to Jackson and Muckstadt (1989). The authors state that an order-up-to level inventory policy is optimal that balances inventories at the retailers, however, an exact optimal solution for more than two retailers is intractable.In the multiple-contract case, the manufacturer is managing multiple retailer’s accounts, where her expected cost is(6)minS¯1,S¯2ECM(S¯1,S¯2)=E[h|S¯2|+h(∑i=1N(Si1+Si2−ξi1−ξi2))++∑i=1NPi(Si1,Si2,ξi1,ξi2)]with|S¯1|+|S¯2|=R.The manufacturer faces two decisions: (i) how much inventory to reserve for the second replenishment and (ii) how to allocate the inventory among the retailers in each replenishment period. The – inventory reservation decision – allows the manufacturer to hold back a fractionα=|S¯2|Rfor a second replenishment. This inventory can be used to replenish the retailers’ inventory optimally. Holding back inventory leads to positive risk pooling effects because it gives the manufacturer a higher degree of freedom to equalize different demand realizations at the manufacturers. The – inventory allocation decision – takes the retailer’s characteristics into account in order to decide on the quantity each retailer receives at each replenishment. In the first replenishment, retailers receive the same quantities. In the second period, the retailers normally differ with respect to their first period performance. Therefore, a manufacturer would prefer to stock more inventory at a retailer where the improvement in the expected penalty costs is the highest.In literature, several approaches for an optimal solution of the two decisions exist. A common approach that is frequently used is inventory balancing, which is used to minimize expected backorder costs. The manufacturer has to balance the inventories after observing the first period’s demand. For identical retailers this is done by simply equalizing the inventory levels at the retailers (McGavin et al., 1993). For non-identical manufacturers, Zipkin (1984) proposed an equal-fractile rule. Note that it is not always possible to rebalance retailer inventories if excess stock at the retailer cannot be transshipped or returned to the manufacturer.We propose a contract balancing approach, where the manufacturer minimizes her expected costs from Eq. (6). As other authors have stated, the joint optimization of the manufacturer’s production quantity and the allocation decision among multiple retailers is not straightforward (Jackson & Muckstadt, 1989). We propose a solution algorithm to solve the allocation problem for a given reservation factor α and production quantity R, where we assume that both α and R are determined initially from a heuristic. For example, McGavin et al. (1993) have derived an optimization approach for the infinite-retailer case and found out that a reservation factor α of 25 percent leads to good results in the finite-retailer model for a variety of parameter sets. In order to keep our analysis tractable, we assume that R is determined by a single-retailer ship-all policy, i.e.,R=N·Rswith N being the number of retailers and Rsbeing determined from Proposition 3. Even though we expect further pooling effects for the production quantity in the case of multiple retailers, this assumption allows us to provide a computational approach for an otherwise mathematically intractable problem. In our numerical analyses we useR=N·Rsas an upper bound and find the optimal second period allocation for various sets of reservation factors and production quantities. By comparing these solutions we are able to numerically evaluate the cost minimizing reservation factor, production quantity and second period allocation for all retailers.The discussion in Section 4 has shown that the probability for a penalty event depends on the demands in periodt=1andt=2. Therefore, we cannot base our allocation decision int=2solely on the current inventory levels at the retailers, but we also have to take the first period performance into account, i.e., the demand ξi1 and the number of unfilled customer orders(ξi1−Si1)+. Since the retailers are identical, the first replenishment isSi1=(1−α)RNfor retailer i. Now the first period demand ξi1 is observed and the retailers use their initial inventory Si1. The manufacturer then has to decide on the optimal replenishment at the second replenishment opportunity. Some retailers can already be excluded from a replenishment decision if there is no possibility of avoiding a penalty payment any more.Proposition 5A penalty is always due at retailer i if the first period demandξi1>Si1+αRSL.For a given first period demand ξi1, the manufacturer can determine the probability of a penalty event for each service level contract. These penalty probabilities can be influenced by the second replenishment Si2 . We exclude the probabilitiesF(−Si1(1−SL)+SL(1−SL)ξi1)andF(Si1SL−ξi1)from our analysis because they do not depend on the second replenishment Si2. More specifically,F(−Si1(1−SL)+SL(1−SL)ξi1)represents Area 3 from Fig. 2. In this case, the initial inventory was not sufficient to fill all customer orders in the first period, but the second allocation was sufficient to cover all backorders from the first period and a sufficient number of demands in the second period. Since the service level is a weighted average of both periods’ stock-outs, a perfect second allocation cannot offset the inferior performance of the first period. This probability as seen from Fig. 2 is small and only relevant if some retailers have negative inventory level after the first period. Thus we decided to exclude it from our analysis for simplicity reasons. The second probabilityF(Si1SL−ξi1),represents Area 4 from Fig. 3. This is an exceptional case where the first period demand was beyond the first period allocation even though the retailer received a high initial allocation Si1 ≤ R. In this case the demand of the first period was higher than the total available inventory and not a single second period demand could be filled ξi1 > R ≥ Si1. We decided to exclude this probability as the second period allocation would not affect this probability. This leads to a small overestimation of the improvement of penalty probabilities in some cases. However, a stock-out after the first period is not highly probable in practical applications (for example, if the 50/25-heuristic is used). Therefore, we suggest that the error from our approximations is small. Then the total available inventory after the replenishment for retailer i isRi=Si1+Si2and the corresponding penalty probabilities arePr(Pi>0∣ξi1,Si2)={1−F(RiSL−ξi1)forξi1≤Si11−F(Ri+Si1SL−(1SL+1)ξi1)forξi1>Si1={1−F(Si1+Si2SL−ξi1)forξi1≤Si11−F(2Si1+Si2SL−(1SL+1)ξi1)forξi1>Si1.Next, we define the contract inventory level as(7)Iic(Si1,Si2,ξi1)={Si1+Si2SL−ξi1forξi1≤Si12Si1+Si2SL−(1SL+1)ξi1forξi1>Si1.The contract inventory level is used as a substitute for the inventory levelSi1−ξi1because only the contract inventory level drives the probability of penalty events. The marginal penalty probability then reduces todPr(Pi>0∣ξi1,Si2)dIic(Si1,Si2,ξi1)=−f(Iic(Si1,Si2,ξi1)).It follows that all contracts lie on the same marginal trade-off curve−f(). Fig. 5 shows an example before the second replenishment (i.e. withSi2=0) for eight retailers with truncated-normally distributed demand. As a result, even before the optimization of the second period replenishment, we can already identify the retailers where a replenishment will have the greatest impact on the reduction of the manufacturer’s expected penalty costs, as seen in the next proposition.Proposition 6Replenishing retailers with the smallest|Iic(Si1,0,ξi1)−ν|has the highest marginal penalty probability where ν denotes the modal value of f.That means that the manufacturer has the incentive to prioritize retailers where he expects to have a high penalty cost reduction potential and thus, not to replenish retailers where a penalty cannot be avoided with a high probability. Based on this finding, we can characterize the optimal solution in the next proposition.Proposition 7In the optimal second period allocation solution, the marginal penalty probability and contract inventory level is equal for all i and j with Si2, Sj2 > 0, i.e.,dPr(Pi>0∣ξi1,Si2)dIic(Si1,Si2,ξi1)=dPr(Pj>0∣ξj1,Sj2)dIjc(Sj1,Sj2,ξj1),Iic(Si1,Si2,ξi1)=Ijc(Sj1,Sj2,ξj1).For the optimization of the second period allocation decision, we have to adapt the steepest-descent approach. The steepest-descent approach would lead to the optimal solution if all contracts would lie on the convex part of the demand c.d.f. Unfortunately, retailers can also lie in the concave part of the demand c.d.f. as Fig. 5 shows. The following algorithm extends the steepest-descent approach and finds the optimal solution:Solution-Algorithm:1.Sort the retailers in ascending order indexed by k with respect toIic(Si1,0,ξi1)M=L=argminkIkc(Sk1,0,ξk1)−νwithIkc(Sk1,0,ξk1)−ν≥0where ν is the modal value of the distribution function fτ=0,Δ=0,A=αR,S=∅,Ic*=ILc(SL1,0,ξL1)While A ≥ 0 then(a)M=M+1;τ=τ+1U=min(τSL(IMc(SM1,0,ξM1)−IM−1c(S(M−1)1,0,ξ(M−1)1)),A)A=A−U;Ic*=Ic*+UτSLΔ=Δ+τ(F(IMc(SM1,UτSL,ξM1))−F(IMc(SM1,0,ξM1)))S=S∪(L,Ic*,Δ)If (L > 1) ThenM=L=L−1,τ=0,Δ=0,A=αR,Ic*=ILc(SL1,0,ξL1)and go back to Step 4Ic*=(0,1,0)T{(L,Ic*,Δ)|(L,Ic*,Δ)∈S,Δ=Δ*},L*=ILc(SL1,0,ξL1)withL=(1,0,0)T{(L,Ic*,Δ)|(L,Ic*,Δ)∈S,Δ=Δ*}whereΔ*=argminΔ{Δ|(L,Ic*,Δ)∈S}.The Solution-Algorithm minimizes the manufacturer’s expected penalty costs for a given first period demand ξi1.The algorithmallocates inventory based on the remaining inventory, and the distance of the contract inventory level and the modal value of f. Therefore, the optimal replenishmentSi2*of retailer i depends on the optimal replenishments of the retailers who received inventory prior because they had a smaller distance|Ijc(Sj1,0,ξj1)−ν|. The intuition behind the algorithm is to increase the convex contract set by sequentially adding contracts from the concave part. The contract sets have been highlighted in Fig. 6. Since the solutions for the contract sets are also locally optimal, we get several local optima under which we find the optimal solution.For our numerical analysis, we assumed four retailers and a truncated normal demand with meanμ=10and standard deviationσ=4. We performed 6384 simulations for three holding costs(h=10,h=50,h=100)and three penalty costs(p=1000,p=5000,p=10000). Based on the selected parameters we defined the search range for the production quantity R as [70, 140] and for the reservation factor α as [0 percent, 15 percent]. We summarize our findings in Table 1, where we present the cost benefits when using the optimal reservation policy in comparison to the optimal ship-all policy. For example forh=10andp=1000the ship-all policy with the minimum cost would be that withR*=113with an expected cost of 394.70. If we would instead reserve 1 percent for a second allocation then we would achieve cost savings of 1.70 percent as opposed to using the optimal ship-all policy. In this table we have used a wide range of parameters in order to better showcase the observed effects, however a penalty value ofp=10000for a holding cost ofh=10would be rather high, and thus the cost savings of 6.70 percent would be on the upper limit. From Table 1 we can observe that the cost benefits increase when p increases or h decreases. For a very high holding cost and a relatively low penalty cost (for exampleh=100andp=1000), a ship-all policy is optimal. This is because the manufacturer has to pay the holding cost for the reserved inventory for the first period, which in this case exceeds the potential penalty cost benefits of reserving inventory for a second allocation.From the decentralized solution we can observe that in the first period, all retailers have the same inventory level and the performance does not differ among the retailers. In the second period however, some retailers might receive a replenishment and some not. Retailers with a low first period demand might not receive a replenishment because the availability is still guaranteed by the excess stock from the first period. Retailers with a very high first period demand might not receive a replenishment because additional stock would not reduce the probability of a penalty significantly as shown in Proposition 8.It is interesting to investigate how our proposed contract balancing approach compares to the inventory balancing approach (Jackson & Muckstadt, 1989). Since an exact optimal solution for more than two retailers is intractable, we resorted to a numerical comparison. We found that the results derived from the contract balancing are equivalent to those of Jackson and Muckstadt (1989). Our findings extend the observation of Choi et al. (2004) who analyzed the one retailer case. They found out that a minimum service level constraint on the manufacturer does not always lead to a minimum retailer service level and that an additional backorder contract parameter is needed to ensure a minimum retailer performance.

@&#CONCLUSIONS@&#
