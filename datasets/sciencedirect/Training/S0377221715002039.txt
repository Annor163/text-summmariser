@&#MAIN-TITLE@&#
Notes on order preservation and consistency in AHP

@&#HIGHLIGHTS@&#
The ranking error is generalized to the maximal reciprocal error.The value of the maximal reciprocal error (MRE) is defined.MRE limits the level of Saaty’s consistency index (CI).MRE helps to decide whether the Conditions of Order Preservation (COP) are met.Provided theorems help to understand the relationship between COP, MRE and CI.

@&#KEYPHRASES@&#
Decision analysis,Pairwise comparisons method,AHP,Conditions of order preservation,

@&#ABSTRACT@&#
The pairwise comparisons method is a convenient tool used when the relative order among different concepts (alternatives) needs to be determined. One popular implementation of the method is based on solving an eigenvalue problem for the pairwise comparisons matrix. In such cases the ranking result for the principal eigenvector of the pairwise comparisons matrix is adopted, while the eigenvalue is used to determine the index of inconsistency. A lot of research has been devoted to the critical analysis of the eigenvalue based approach. One of them is the work of Bana e Costa and Vansnick (2008). In their work, the authors define the conditions of order preservation (COP) and show that even for sufficiently consistent pairwise comparisons matrices, this condition cannot be met. The presented work defines more precise criteria for determining when the COP is met. To formulate the criteria, an error factor is used describing how far the input to the ranking procedure is from the ranking result. The relationship between the Saaty consistency index and COP is also discussed.

@&#INTRODUCTION@&#
The origins of pairwise comparisons (herein abbreviated as PC) date back to the thirteenth century (Colomer, 2011). The contemporary form of the method owes much to Fechner (1966), Thurstone (1994) and Saaty (1977). The latter proposed the Analytic Hierarchy Process (AHP) –a hierarchical, eigenvalue based extension to the PC theory, which provides useful methods for dealing with a large number of criteria. AHP is used in decision theory, economics, and other fields. Despite its long existence, pairwise comparisons still prompts researchers to enquire further into this area. Examples of such exploration are the Rough Set approach (Greco, Matarazzo, & Słowiński, 2011), incomplete PC relation (Bozóki, Fülöp, & Rónyai, 2010), non-numerical rankings (Janicki & Zhai, 2012), rankings with the reference set of alternatives (Kułakowski, 2014; Kułakowski, Grobler-Dębska, & Wąs, 2014), fuzzy PC relation handling (Fedrizzi & Brunelli, 2010; Mikhailov, 2003) and others. More can be found in Ishizaka and Labib, 2009; Smith and Von Winterfeldt, 2004.Some aspects of PC still raise vigorous discussions (Barzilai & Golany, 1994; Dyer, 1990). In particular, Bana e Costa and Vansnick (Bana e Costa & Vansnick, 2008) pointed out that sometimes the expert judgments are not always appropriately reflected in the final assessment. They formulate two conditions of order preservation (COP) which they believe the paired rankings should satisfy (see Section 2.3). Their work arouses different reactions. On the one hand, there is criticism (Saaty, Vargas, & Whitaker, 2009; Wang, Chin, & Luo, 2009), on the other hand, recognition and praise (Andronikidis, Georgiou, Gotzamani, & Kamvysi, 2009; Çakır, 2008). Without doubt, however, their work seems to reveal important properties of the pairwise comparisons method.In the presented article, the conditions formulated in Bana e Costa and Vansnick, 2008 are discussed in the context of the ranking errors (Sections 2.2 and 3). Considerations of errors (Section 3) lead to the formulation of three short theorems showing the relationship between inconsistency, the ranking error and COP (Section 4). The obtained results suggest that the AHP limitations as described in Bana e Costa and Vansnick, 2008 are not an inherent problem of the eigenvalue based prioritization procedure, but are a matter of error and inconsistency. Two of the provided theorems (Theorems 2 and 3), provide two sufficient conditions that easily allow one to check if the conditions for the preservation of order preference, from both an ordinal (4) and cardinal (5) point of view, are met. The situation in which COP is not met is considered in Section 5. A brief summary is provided in Section 6.Analytic Hierarchy Process (AHP) has been proposed by Saaty in 1970s (Saaty, 1977). It is a multi-criteria decision making method based on comparing concepts (alternatives) in pairs. Central to the AHP is the pairwise comparisons (PC) matrix A = [aij], whereaij∈R+and i, j ∈ {1, …, n}, that expresses a quantitative relationship over the set of concepts C. The values aijand ajiare interpreted as the relative importance, value or quality indicators of the concepts ci, cj∈ C, so that according to the best knowledge of experts ci= aijcjshould hold.Definition 1The matrix A is said to be reciprocal if ∀i, j ∈ {1, …, n}: aij= 1/ajiand A is said to be consistent if ∀i, j, k ∈ {1, …, n}: aij· ajk· aki= 1.There are several methods to determine how far the PC matrix A is inconsistent (Brunelli, Canal, & Fedrizzi, 2013). The most popular method is to calculate Saaty’s consistency indexCI(Saaty, 1977).The result of the pairwise comparisons method is a priority functionw:C→R+,so that w(c) represents the priority value for c ∈ C, where C is the set of concepts. The values of w for the sequence of concepts c1, …, cnis a priority vector [w(c1), …, w(cn)]. In AHP, vector w is obtained by calculating the principal eigenvector wmax of A and rescaling it so that the sum of its elements is 1. Due to the Perron–Frobenius theorem (Saaty, 1977) wmax exists.It is easy to see11(1) can be easily derived from the first equation on page 238 of (Saaty, 1977).that(1)CI=(1n−1∑j=1,j≠inaijw(cj)w(ci))−1.Following (Saaty, 1977, p. 238) let us denote:(2)ϵ(i,j)=dfaijw(cj)w(ci)=1ajiw(cj)w(ci).If the priority vector w was ideal, i.e. if each expert judgment perfectly corresponded to the priority vector, then every aijwould equal the ratio w(ci)/w(cj). In such a case every ε(i, j) would be equal to 1. Otherwise, when the priority vector is imperfect the values aijand w(ci)/w(cj) may vary. In other words ε(i, j) describes the local error (sometimes referred to as local inconsistency22For example, the idea to control the inconsistency at the comparison level instead of at the matrix level can also be found in Ishizaka and Lusti (2004).) between the particular expert judgment aijand the priority vector w(ci)/w(cj). The relationship between ε(i, j) andCI(adoptingwev– the appropriately rescaled eigenvector of A as the priority function) could be written as follows:(3)CI=1(n−1)∑i=1,i≠jn(ϵ(i,j)−1).In other words, the given value of the consistency index guarantees that the arithmetic mean of the difference between local error (2) and one equals CI.In (Bana e Costa & Vansnick, 2008) there are two postulates (conditions of order preservation) as regards the meaning of an eigenvalue based priority vector. The first one, ordinal, the preservation of order preference condition (POP) claims that the priority vector in relation to the given pair of concepts (ci, cj) should not break with the expert judgment. In other words, for the pair of concepts c1, c2 ∈ C such that c1 dominates c2 i.e. a1, 2 > 1 it should hold that:(4)w(c1)>w(c2).The second one, cardinal, the preservation of order of intensity of preference condition (POIP), stipulates that if c1 dominates c2, more than c3 dominates c4 (for c1, …, c4 ∈ C), i.e. if additionally a3, 4 > 1 and a1, 2 > a3, 4 then also(5)w(c1)w(c2)>w(c3)w(c4).Despite the fact that both conditions of order preservation have been formulated in the context of an eigenvalue based approach, it is important to note that, in principle, they remain valid in the context of any priority deriving method. Neither of the two conditions require w be a rescaled eigenvector of A. Moreover, meeting the POP and POIP conditions seems to be natural for any w.It is easy to see (2) that ε(i, j) = 1/ε(j, i). For example, if some ε(i, j) = 2 then ε(j, i) = 0.5. In fact, both of these values carry the same information, which is: the priority vector for the pair (ci, cj) differs twice from the expert judgment. In other words, one concept got a 100 percent better score than it should. The usefulness of the ε(i, j) parameter has been recognized by researchers. For instance, in Saaty (2013, p. 203) the matrix [ε(i, j)] is used to determine which expert judgments need to be improved in order to reduce the inconsistency of A (see Section 5).The same meaning of ε(i, j) and ε(j, i) and the further convenience led the author to define the reciprocal errorE(i,j)as:(6)E(i,j)=dfmax{ϵ(i,j)−1,1/ϵ(i,j)−1}.The valueE(i,j)reflects local differences between computed priorities and given expert judgments. Information that for certaini^,j^the valueE(i^,j^)=0.8means that the error between the expert judgmentai^j^and the prioritiesw(ci^)andw(cj^)reaches 80 percent. Similarly for the matrix [ε(i, j)], the reciprocal error matrix[E(i,j)]may also help to discover where the highest discrepancy is, hence, where the expert judgment (or the priority vector) could be improved.It turns out that ε(i, j) can also be used to formulate sufficient conditions for which both POP and POIP postulates (Section 2.3) hold. For this purpose, let us define the concept of the maximal reciprocal error.Definition 2Let the maximal reciprocal error for the pairwise comparisons matrix A, and the priority vector w, be defined as(7)Emax(A,w)=dfmaxi,j=1,…,nE(i,j)=maxi,j=1,…,n(ϵ(i,j)−1).Thus, a certain value of the maximal reciprocal errorEmax(A,w)≤δprovides a guarantee that the maximal discrepancy between a single assessment of an expert and the comparison of corresponding results will not be greater than δ. The ranking errorEmax(A,w)translates directly into the inconsistency CI. The relationship can be expressed as the following theorem.Theorem 1For every pairwise comparisons matrix A and the eigenvector based priority vectorwevit holds that:(8)Emax(A,wev)≤δ⇒CI≤δ.SinceEmax(A,wev)≤δ,thus according to (7), it holds that ε(i, j) − 1 ≤ δ for every i, j ∈ {1, …, n}. In particular, for any j ∈ {1, …, n} it is true that:(9)∑i=1,i≠jn(ϵ(i,j)−1)≤(n−1)δhence(10)1(n−1)∑i=1,i≠ln(ϵ(i,j)−1)≤δwhich, in the light of (3) satisfies the assertionCI≤δ.□Hence, besides the fact that the maximal reciprocal errorEmax(A,wev)detects and limits the worst case difference between a single expert judgment and the ranking result, it also provides a guarantee in the original sense proposed by Saaty (1977). Therefore, wherever the inconsistency index CI has so far been used,Emax(A,wev)might be used instead. Provided, of course, thatEmax(A,wev)is sufficiently small. In return, in addition to the requirements of the level of inconsistency, the users receive a guarantee of even error distribution.Similarly to POP and POIP (Section 2.3), the maximal reciprocal error is derived from the eigenvalue based approach, but it does not depend on it. Thus, Definition 2 remains valid for any priority deriving method and any w. Moreover, the valueEmax(A,w)remains in the immediate connection with POP and POIP. This relationship could be expressed in the form of the following two assertions.Theorem 2For every pairwise comparisons matrix A = [aij]expressing the quantitative relationships R between the concepts c1, …, cn∈ C, and the priority vector w, the order preference condition is preserved i.e.(11)aij>1impliesw(ci)>w(cj)ifE(i,j)<δand aij≥ δ + 1, for some δ > 0, where i, j = 1, ….n, and i ≠ j.SinceE(i,j)<δ,thus according to (7), every ε(j, i) − 1 < δ. Therefore, due to the definition of ε (2) it is true that(12)1aji·w(cj)w(ci)<δ+1hence(13)ajiw(ci)w(cj)>1δ+1and due to the reciprocity(14)w(ci)w(cj)>aijδ+1.Therefore the ratio w(ci)/w(cj) is strictly greater than one if only aij/δ + 1 ≥ 1. Thus, ifE(i,j)<δthen aij≥ δ + 1 implies w(ci) > w(cj).□If the maximal reciprocal errorδ>Emax(A,w)and aij≥ δ + 1 for every i, j = 1, …n then the POP condition is met.The above assertions easily translate into an algorithm that allows us to decide whether the pairwise comparisons matrix A and the priority ranking w are POP-safe, i.e. whether the POP condition will never be violated for this pair. Let us note that if we adopt a weak inequality as the upper bound of the ranking error i.e.Emax(A,w)≤δ,then to meet the POP the strong inequality aij> δ + 1 is needed. Thus, assuming thatδ=Emax(A,w)is known, all the ratios greater than one i.e. aij> 1 need to be examined to determine whether they are also greater than δ + 1. If so, A is POP-safe, which means that POP is not violated.The relationship between POIP and the reciprocal error can also be expressed in the form of assertion.Theorem 3For every pairwise comparisons matrix A expressing the quantitative relationships R between the concepts c1, …, cn∈ C, and the priority vector w, the order of intensity of preference condition is preserved i.e.(15)aij>akl>1impliesw(ci)w(cj)>w(ck)w(cl)ifE(i,j)<δ,E(k,l)<δand aij/akl≥ (δ + 1)2for some δ > 0, where i, j, k, l = 1, ….n, and i ≠ j, k ≠ l.SinceE(i,j)<δ,then according to (7) also ε(j, i) − 1 < δ and ε(k, l) − 1 < δ. Thus, following the same reasoning as in Theorem 2 (12, 13 and 14) we obtain that(16)w(ci)w(cj)>aijδ+1andw(cl)w(ck)>alkδ+1hence due to the reciprocity,(17)w(ci)w(cj)>aijδ+1andw(ck)w(cl)<akl(δ+1).Therefore, dividing the left inequality by the right inequality leads to the formula(18)w(ci)w(cj)w(ck)w(cl)>aijδ+1akl(δ+1).Therefore, the ratio (w(ci)/w(cj))/(w(ck)/w(cl)) is greater than 1 if aij/(δ + 1)/akl(δ + 1) is not smaller than 1. In other words, the truth of the following inequality:(19)aijakl≥(δ+1)2implies that(20)w(ci)w(cj)>w(ck)w(cl)which is the desired assertion.□If the maximal reciprocal errorδ>Emax(A,w)and aij/akl≥ (δ + 1)2for every i, j, k, l = 1, …n where i ≠ j, k ≠ l, (i, j) ≠ (k, l) and δ > 0 then the POIP condition is met.Similarly as before, to hold the assertion (3) it is enough for the weak inequalityEmax(A,w)≤δand the strong inequality aij/akl> (δ + 1)2 to hold. Thus, for the practical verification of whether the POIP is violated, the condition aij/akl> (δ + 1)2 needs to be examined for every pair aij, aklthat meets the requirements of the theorem.The situation in which the priority vector does not meet the POP and POIP is uncomfortable for the decision makers. Different parties may object to the results of the ranking, arguing that some (important and influential) experts think differently. To cope with this, the person responsible for the ranking procedure can either modify the priority vector w or modify the matrix A.The first option means a change of the ranking procedure. In addition to the eigenvalue based method as proposed in Saaty (1977) there are several other methods (Fedrizzi & Brunelli, 2010). The solution proposed by Bana e Costa and Vansnick in their work (Bana e Costa & Vansnick, 2008) suggests the first option is the best. In three of the four examples provided they show that when the eigenvalue based weight vectors fail to meet POP or POIP (in all the cases the consistency index is below the acceptance threshold) there are other weight vectors which do not pose such problems.Selecting the second option involves modification of the initial expert judgments. Usually the reason for modifying the matrix A is its high inconsistency. Generally, in AHP it is accepted that A is consistent enough when the ratio (called the consistency ratio) of its consistency index CI to the consistency index of a random matrix of the same size is smaller than 0.1. There are several methods to reduce the inconsistency of A (Ergu, Kou, Peng, & Shi, 2011; Koczkodaj & Szarek, 2010). The work (Saaty, 2013) proposes the procedure consisting of (1) finding the most inconsistent judgment in the matrix (the one with the greatest local error), (2) determining the range of values to which that judgment can be changed, then (3) asking experts to consider, if they can, changing their judgment to a plausible value in that range. Steps (1)–(3) should be repeated until the desired consistency is reached. Theorem 1 confirms the validity of this approach. DecreasingEmax(A,wev)leads to a decrease of CI. At the same time, however, decreasingEmax(A,wev)makes the POP and POIP conditions easier to be meet. Indeed, according to Theorems 2 and 3 the smaller the δ for which holdsEmax(A,wev)<δ,the greater the chance that if aij> 1 then also aij≥ 1 + δ (POP) and if aij> akl> 1 then also aij/akl≥ (1 + δ)2 (POIP). Thus, the same inconsistency reduction procedure as proposed in Saaty (2013) can be used for such modification of A that both POP and POIP are satisfied.Theorems 2 and 3 also indicate another important feature of the COP postulate. Even if the matrix A is highly consistent i.e.Emax(A,wev)and CI is small (Theorem 1), then if two different concepts are preferentially close to each other, there is still no guarantee that POP and POIP are met. Indeed, this observation allows for easy generation of almost consistent matrices that fail either the POP or POIP postulate. For example:(21)A=(11.011.021.031/1.0111.091.021/1.021/1.0911.011/1.031/1.021/1.011).The consistency index for A is CI = 0.0002. In particular w(c1)/w(c2) = 0.99 while a12 = 1.01, and similarly w(c3)/w(c4) = 0.991. The matrix (21) is a clear example that if the elements of the PC matrix are close to one then even the high consistency of the matrix may not translate into the compliance with POP and POIP.33Note that according to Theorems 2 and 3 for a fully consistent matrix A and the priority vectorwevboth POP and POIP are always met.Both changing the vector w and modifying the matrix A have their proponents and opponents. For example, advocates of the first approach indicate that the inconsistency reduction (especially proposed in Saaty, 2013) for various reasons may not be optimal (Kyriacos & Ishizaka, 2014; Lamata & Peláez, 2002). On the other hand, the opposite option provides arguments that “only the eigenvalue gives the correct ordering and priority values” (Saaty et al., 2009), and therefore, adopting another priority deriving method is beyond dispute. Regardless of the debate on the pros and cons of both approaches, the popularity of AHP means that very often the second approach is considered as a viable alternative.

@&#CONCLUSIONS@&#
