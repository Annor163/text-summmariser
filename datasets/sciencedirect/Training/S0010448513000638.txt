@&#MAIN-TITLE@&#
Structure and spatial consistency of network-based space layouts for building and product design

@&#HIGHLIGHTS@&#
A schema is defined for space layouts that represent spatial relations as networks.Spatial constraints for spatial consistency checking extend the schema.An inconsistency resolution operation resolves inconsistencies in a layout.A layout modeling system prototype has been implemented and validated with examples.

@&#KEYPHRASES@&#
Space model,Building information modeling (BIM),Product model,Aspect model,Spatial data quality,

@&#ABSTRACT@&#
Network-based space layouts are schematic models of whole spaces, subspaces, and related physical elements. They address diverse space modeling needs in building and product design. A schema (data model) for network-based space layouts is defined that is influenced by existing space schemas. Layout elements and selected spatial relations form a geometric network. The network is embedded in 3-space and facilitates analysis with graph and network algorithms. Spatial constraints on layout elements and spatial relations extend the schema to support spatial consistency checking. Spatially consistent layouts are required for reliable network analysis and desirable for layout modification operations. An operation is introduced that evaluates spatial constraints to detect and semi- or fully-automatically resolve spatial inconsistencies in a layout. A layout modeling system prototype that includes proof-of-concept implementations of the layout schema extended by spatial constraints and the inconsistency resolution operation is described. Layouts of a floor of an office building and a rack server cabinet have been modeled with the system prototype.

@&#INTRODUCTION@&#
Space layouts are used in various design domains to model spaces and related physical elements. In building design, whose diverse space modeling needs have motivated the work presented in this paper, building services designers reuse space layouts created by architects to develop access, lighting, heating, ventilation, and air conditioning systems. The design of electronic systems is an example of a product design domain where designers rely on space layouts to optimize the thermal performance of computers, networking equipment, or printers.Space data authoring for building design is increasingly supported by commercial building information modeling (BIM) systems  [1]. These systems use elaborate data structures to model buildings. The Industry Foundation Classes (IFC) are an open, STEP based building data sharing standard and an example for such a data structure  [2,3]. Although several graph and network representations of space layouts have been developed (see Section  2 for a review), implementation of these representations and applications in BIM systems is still limited.Network-based space layouts extend the notion of representing spatial relations in space layouts as graphs or networks  [4]. In a network-based space layout, spatial relations between layout elements, which include whole spaces and partial spaces or subspaces, form a network. Spatial relation edges in such a layout element network are directed and weighted. This characteristic distinguishes network-based space layouts and other network representations from graph representations of space layouts. A layout element network may be accessed by graph and network algorithms for design analysis. Existing network representations of space layouts have been developed for specific design domains. Their networks typically include one type of node (representing e.g. spaces or walls) and one type of edge (representing e.g. space adjacencies or openings). By contrast, multiple node and edge types are modeled in a network-based space layout in order to support space modeling needs of multiple domains. A layout element network is further a geometric network that is embedded in 3-space. Spatial relation edges may thus be viewed as line segments whose end points correspond to positions of related layout elements. As a result, shortest path searches that are based on Euclidean distances and consider line-of-sight are feasible.The structure and spatial consistency of network-based space layouts are the focus of this paper. Spatially consistent layouts are required for reliable network analysis and desirable for operations that modify the structure of a layout  [5,6]. Although relevant for the usability and interoperability of design support systems, little work exists, at least in building design, on the spatial consistency of space data  [7].The remaining sections are organized as follows. Existing graph and network representations of space layouts and their applications are reviewed in Section  2. The modeling approach that underlies a schema (data model) for network-based space layouts is outlined in Section  3. The schema is presented in Section  4. In Section  5, the schema is extended by spatial constraints to detect spatial inconsistencies, and an inconsistency resolution operation is described. Section  6 describes the design and implementation of a layout modeling system prototype. Section  7 provides examples of layouts that have been created with the system prototype. Section  8 concludes with a summary and identifies future work.Graph and network representations of space layouts were developed in the 1970’s and 1980’s to assist space layout planning. Grason  [8] introduced a representation that consists of a rectangular plan graph and a space adjacency graph. The dual relationship between the graphs facilitates layout synthesis from required space adjacencies and dimensions  [9]. Edges in Grason’s space adjacency graph or network are directed and weighted. Edge weights correspond to lengths of wall segments. Steadman  [10,11] developed a similar network representation of layouts. Space adjacency and space access graphs underlie several space layout planning systems that have been developed since. For a comprehensive survey of these systems, the reader is referred to  [12]. More recently, Grabska  [13] has proposed an attributed access hypergraph, which facilitates subgraph matching e.g. to generate layout alternatives with genetic operators  [14].Network representations of space layouts have been developed for air and pedestrian circulation design. Air circulation in buildings may be simulated with flow networks. In the COMIS air circulation simulation engine  [15], for example, spaces and openings are modeled as, respectively, network nodes and edges. Weights of opening edges correspond to air flow resistances. Similarly, flow networks are used to determine air circulation in electronic systems  [16]. Here edge weights correspond to air flow resistances of fans or CPU heat sinks. The analysis of a pedestrian circulation design requires fine-grained space access networks. In the EGRESS building evacuation simulation engine, for example, spaces are decomposed into hexagonal cells whose size corresponds to the area occupied by a person  [17]. Adjacent cells are connected by edges. Toll et al.  [18] use a navigation network that corresponds to the medial axis (or skeleton) of space enclosures. Lee et al.  [19] derive a pedestrian circulation network from the vertices of buffered space boundary polygons.Existing graph and network representations of space layouts tend to be specific to particular design domains and limited regarding spatial granularity, relations, or consistency. As outlined in the next section, extended, more general representations are desirable to better address diverse space modeling needs in building and product design.Spaces may be modeled from two views. The first is a space-centered view where a space is seen as an object that encloses a void and may accommodate user activities, equipment, or furniture  [20]. A space is bounded by space boundaries that may be formed by space enclosure elements such as walls and openings. The second view is enclosure-centered. According to that view, a space may be seen as a shared, emergent property of space enclosures  [20]. Existing space schemas, including the space schema in IFC, support both views  [21,22,20,2]. As support for heterogeneous subspaces and their spatial relations is limited in IFC (as will be discussed in Section  4.7), it was decided to define a space schema that incorporates aspects of IFC and other space schemas, and to introduce new concepts where necessary. The schema adopts a space-centered view with a simplified space enclosure representation. It is general in the sense that it is independent of specific design domains.Selected spatial relations between layout elements that appear particularly useful across design domains are modeled explicitly in a network-based space layout. These include whole space adjacency and subspace adjacency relations. Automated derivation of spatial relations from layout element geometries is desirable in order to minimize modeling effort. It is also relevant to assess the spatial consistency of a layout. Thus formal definitions of spatial relations are provided in the layout schema.Several methods exist to derive space enclosure data from space data, or vice versa  [23–27]. A spatial query language is proposed by Borrmann and Rank  [28] to derive topological spatial relations in building information models. The spatial relation between two building elements is determined by applying the 9-intersection model  [29] to their geometries. Spatial relations in network-based space layouts are derived from boundary representations (Brep) of layout element geometries. This is similar to the work of van Treeck and Rank  [25] where space volumes or space adjacency graphs are derived from Brep geometries of space enclosures.Design analysis may fail or generate inaccurate results if design data are spatially inconsistent. In general, spatial consistency (or data quality) refers to the correctness and accuracy of spatial data. Logical consistency is an important type of spatial consistency  [30]. An example for a potential logical inconsistency in space modeling are two spaces that overlap. Spatial constraints may be defined to detect logical inconsistencies in spatial data.Existing space schemas include multiplicity (or cardinality) constraints on spatial relations. It is important to note that these multiplicity constraints are necessary but not sufficient to ensure logical consistency of space data. For example, overlapping spaces are not addressed by multiplicity constraints. Data modeling languages such as EXPRESS support the definition of additional constraints by means of ’where’ clauses, functions, and procedures [31,32]. The EDM information model supports constraints that are defined as stored procedures  [33,22]. However, use of constraints is limited in other space schemas  [21,20,2].The schema for network-based space layouts is extended by spatial constraints that detect logical inconsistencies not addressed by multiplicity constraints. Spatial constraints are defined for layout elements as well as spatial relations. The definitions may be used as specifications for implementations in data modeling or programming languages. However, these constraints do not address spatial inconsistencies such as positional and attribute errors  [30], or defective volumes or faces  [34].

@&#CONCLUSIONS@&#
A schema for network-based space layouts has been defined that extends the notion of modeling spatial relations as graphs or networks in space layout representations. Layout examples suggest that the schema may be sufficiently general to support diverse space modeling needs across building and product design domains. Spatial consistency of layouts, which is a prerequisite for reliable layout element network analysis and useful for layout operations, has been addressed by extending the layout schema with spatial constraints and an inconsistency resolution operation. Proof-of-concept implementations of the schema extended by spatial constraints and the inconsistency resolution operation have been realized in a layout modeling system prototype and demonstrated with realistic examples.Further work is necessary to ensure the formal correctness and extend the scope of the layout schema. Formal definitions of spatial relations have been proposed, however, the sufficiency of these definitions for all conceivable two- and three-dimensional spatial configurations has not been proven. In order to improve data exchange between BIM-ADS and LMS, the layout kernel schema may be extended by associating layout element classes with corresponding classes in the IFC schema and their property sets. For similar reasons, coverage of CSG and sweep solid representations is desirable in the geometry schema.In addition to addressing these issues, as well as those raised in Sections  4.7 and 7.4, the definition of layout operations is seen as an important area for future work. Initial ideas for such operations have been outlined in  [5,6]. For example, variants ofselectandaggregateoperations as well as binary operations that combine pairs of layouts into single layouts are conceivable. Other operations may facilitate the definition of spatial relations (such as containment relations) between layout elements in different layouts. Eventually, a comprehensive set of layout operations or layout algebra may enable designers to effectively model multiple spatial abstraction levels and domain-specific spatial views of buildings  [51].