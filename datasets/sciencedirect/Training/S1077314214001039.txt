@&#MAIN-TITLE@&#
Radial distortion invariants and lens evaluation under a single-optical-axis omnidirectional camera

@&#HIGHLIGHTS@&#
We establish invariants for space points and radially distorted image points.We construct the invariant criterion functions that are very stable to noise.A feature vector is constructed from the functions and its infinity norm is computed.The norm is applied to evaluate camera lens alignment or tangent distortion.The evaluation is flexible and useful in applications such as 3D reconstruction.

@&#KEYPHRASES@&#
Geometric invariant,Omnidirectional camera,Tangent distortion evaluation,

@&#ABSTRACT@&#
This paper presents radial distortion invariants and their application to lens evaluation under a single-optical-axis omnidirectional camera. Little work on geometric invariants of distorted images has been reported previously. We establish accurate geometric invariants from 2-dimensional/3-dimensional space points and their radially distorted image points. Based on the established invariants in a single image, we construct criterion functions and then design a feature vector for evaluating the camera lens, where the infinity norm of the feature vector is computed to indicate the tangent distortion amount. The evaluation is simple and convenient thanks to the feature vector that is analytical and straightforward on image points and space points without any other computations. In addition, the evaluation is flexible since the used invariants make any a coordinate system of measuring space or image points workable. Moreover, the constructed feature vector is free of point orders and resistant to noise. The established invariants in the paper have other potential applications such as camera calibration, image rectification, structure reconstruction, image matching, and object recognition. Extensive experiments, including on structure reconstruction, demonstrate the usefulness, higher accuracy, and higher stability of the present work.

@&#INTRODUCTION@&#
Geometric invariants, reflecting intrinsic properties of objects, are extremely useful for classifying and recognizing objects [1–5]. In particular, projective geometric invariants between scene and image can be applied to recognizing objects without requiring camera calibration and complete 3-dimensional (3D) reconstruction.In the past years, there have been many studies on projective geometric invariants under perspective cameras [1–5]. However, there are few studies on invariants under omnidirectional cameras due to the severe image distortions and the nonlinear imaging processes. The omnidirectional cameras, having a large field of view, offer great benefit to three-dimensional modeling of wide environment, robot navigation, and visual surveillance. Geometric properties of these cameras are currently being studied by a number of authors [6–18,29–37].Catadioptric camera, fisheye camera, and wide-angle camera are all omnidirectional cameras with radial distortion. In 2005, Bayro-Corrochano and Lopez-Franco [16] projected features of the catadioptric image to the sphere defined by Geyer and Daniilidis [17], and then calculated projective geometric invariants using conformal geometric algebra, where camera intrinsic parameters should be known. Also in the same year, Wu and Hu [18] established invariant equations of space points and their radially distorted image points, in which camera optical axis position was used for 3D points and intersection point of camera optical axis with 2-dimensional (2D) scene plane was used for 2D points. Establishment of invariants without involving the optical axis knowledge in scene space or other camera parameters deserves investigations because solving these parameters is a complex task.In this work, we:(1)define the single-optical-axis omnidirectional camera to be a kind of omnidirectional cameras that have a single optical axis and whose optical center loci lie on the optical axis. For example, the catadioptric camera with a quadric as its mirror [17], the fisheye camera, some wide angle cameras, and the traditional perspective camera are all single-optical-axis cameras.establish projective geometric invariant between 2D/3D space points and their radially distorted image points under a single-optical-axis camera. The invariants are called radial distortion invariants. These invariants do not involve the camera optical axis position in 3D space or the intersection point of the camera optical axis with the scene plane. Additionally, they do not involve any other camera parameters except for the principal point. The principal point can be well approximated by the center of the imaged edge contour (see the analyses in the fourth paragraph of Section 5.1 and the fourth paragraph of Section 5.2). Thus, the invariants are more practical and flexible.apply the established invariants for evaluating a single-optical-axis camera lens. We construct a criterion function and then design a feature vector. The infinity norm of this feature vector is computed which indicates the tangent distortion amount of the camera. By comparing the infinity norm with a given threshold, whether a single-optical-axis camera lens is aligned or has tangent distortion is evaluated. The algorithm is simple and convenient for evaluating a camera as the feature vector is analytical that is directly constructed from image points and space points without any other computations. In addition, the vector is free of point orders and resistant to noise. Once a camera is evaluated as no tangent distortion, only radial distortion model should be used in applications. In this paper, scene structure recovery after lens evaluation is proposed like in [18].Geometric distortion of a camera lens includes: radial distortion, tangent distortion, or the hybrid distortion of both [29]. The distortion is an important factor for evaluating the quality of a camera lens [19–22]. However, detecting tangent distortion is difficult. Moreover, for a single-optical-axis omnidirectional camera, detection of its alignment is needed. As pointed out in [6,8,11], if the distortion center and the principal point are different for a misaligned camera, tangent distortion will appear. Thus, this paper is very useful for a single-optical-axis camera to tell whether it is aligned or has tangent distortion.For example in Fig. 1, a catadioptric camera consisting of a quadric mirror and a perspective camera lens is a single-optical-axis omnidirectional camera. Before using this camera, alignment is needed to make the mirror face the lens rightly. In [34], Mashita, Iwai, and Yachida also think the mirror alignment is absolutely essential and think it is difficult to align the mirror and camera positions. If images of the misaligned camera were used to do camera calibration or 3D reconstruction by regarding it aligned, the results would not be accurate. How to know whether the camera is aligned or the alignment extent can be accepted? The infinity norm of the designed feature vector in this paper can be as an indication.Besides the proposed evaluation application, the established invariants can find other applications. For example, they can be used for recognizing polyhedrons or polygons directly from 2D distorted images without a complete 3D reconstruction like those for perspective images in [23,24].The remainder of this paper is organized as follows. Some preliminaries are listed in Section 2. The radial distortion invariants are given in Section 3. Section 4 proposes the lens evaluation algorithm for a single-optical-axis camera. The experimental results are reported in Section 5, followed by a conclusion in Section 6.As we all know, a pointain a 1-dimensional (1D) space (a line) may be represented by the coordinate x, a pointBin a 2D space (a plane) may be represented by the coordinates (x,y), and a pointCin a 3D space may be represented by the coordinates (x,y,z). In a projective space, point representations are slightly different and they are represented by homogeneous coordinates. The homogeneous coordinates of the above pointais s(x,1)Tif it is not at infinity or is s(x,0)Tif it is at infinity, where s is any a nonzero scalar. Similarly, the homogeneous coordinates ofBis s(x,y,1)Tor s(x,y,0)Tand ofCis s(x,y,z,1)Tor s(x,y,z,0)T. In the following of this paper, a bold italic letter just denotes a point or its homogeneous coordinates and sometimes a vector or a matrix.We use the symbol “∣ ∣” to denote determinant of points in it. For example, ∣a1a2∣ is the determinant of 1D finity pointsai, i=1, 2 with homogeneous coordinates si(xi,1)T, whose absolute value is also the distance betweena1 anda2 if both siare taken as 1. ∣B1B2B3∣ is the determinant of 2D finity pointsBi, i=1,2,3 with homogeneous coordinates si(xi,yi,1)T. ∣C1C2C3C4∣ is the determinant of 3D finity pointsCi, i=1, 2, 3, 4 with homogeneous coordinates si(xi,yi,zi,1)T. For notational convenience, if there is no risk of ambiguity, ∣B1B2B3∣ for 2D pointsBiwill be simply written as ∣B1,2,3∣ and ∣C1C2C3C4∣ for 3D pointsCias ∣C1,2,3,4∣.The cross ratio is fundamental in projective geometry that keeps invariant under a projective transformation [25]. For four collinear pointsai, i=1…4 being 1D homogeneous coordinates, the cross ratio is defined as(1)|a1a3||a2a4|/(|a2a3||a1a4|).In a 2D projective plane, a pencil of lines is a set of lines, each of which passes through a fixed point. The fixed point is called the vertex of the pencil. There is a cross ratio from a pencil of four lines, which is equal to the cross ratio of four collinear intersection points of a general transversal line with this pencil. As shown in Fig. 2, the four linesA0Ai, i=1…4 construct a pencil withA0 being the vertex. This pencil is denoted asA0(A1,A2,A3,A4) and its cross ratio is equal to the cross ratio of the four pointsai, i=1…4 on l. This cross ratio is computed as ∣A013∣∣A024∣/(∣A023∣∣A014∣) byAiand the derivation is shown in the third paragraph of Section 3.1.Similarly in a 3D projective space, a pencil of planes is a set of planes, each of which passes through a fixed line. The fixed line is called the axis of the pencil. Cutting a pencil of planes by a general space plane generates a pencil of lines. The two cross ratios of the pencil of planes and the pencil of lines are equal, which is also equal to the cross ratio of the collinear intersection points of a general transversal line with this pencil of planes. As shown in Fig. 3, the four planesA0A1Ai, i=2…5 construct a pencil of planes withA0A1 being the axis. This pencil is denoted asA0A1(A2,A3,A4,A5). The plane PL cuts the pencil as the pencil of lines Li, i=1…4 and the transversal line L cuts asbi, i=1…4. The three cross ratios of the planesA0A1(A2,A3,A4,A5), the lines Li, i=1…4, and the pointsbi, i=1…4 are equal. This cross ratio is computed as ∣A0A1A2A4∣∣A0A1A3A5∣/(∣A0A1A3A4∣∣A0A1A2A5∣) byAiand the derivation is shown in the third paragraph of Section 3.2.There exist relations among determinants. One kind of these relations is the following Grassmann–Plücker relation [26,27]:(2)|B1,2,3||B1,4,5|-|B1,2,4||B1,3,5|+|B1,2,5||B1,3,4|=0,withBi, i=1…5 being 2D homogeneous coordinates. This equation will be used to simplify the later polynomial computations in this paper.The central catadioptric cameras with paraboloid, ellipsoid, or hyperboloid mirrors are unified as an equivalent spherical projection by Geyer and Daniilidis [17]. The spherical projection is recalled as follows: As shown in Fig. 4, a space pointMis projected to a pointXon the viewing sphere through the sphere centerOthen projected tomon the image plane through the camera viewpointOc. The camera optical axis is the line throughOandOc, denoted asOOc. The camera principal point, denoted asm0, is the intersection point ofOOcwith the image plane. The distance betweenOandOc, denoted as e, is the mirror parameter. The mirror used in this model is a paraboloid when e=1, an ellipsoid or hyperboloid when 0<e<1, and a plane when e=0.Geometric distortion of a camera lens includes: radial distortion, tangent distortion, or the hybrid distortion of both as shown in Fig. 5, whereCdenotes the distortion center,Adenotes the ideal position of an image point under a perspective camera, if the obtained image point is located atB, we say the image point has radial distortion; if atD, we say the image point has tangent distortion; if atE, we say the image point has radial-tangent distortion. The aligned central catadioptric cameras have only radial distortion because the optical axisOOc,m0,M,mare coplanar.A single-optical-axis camera is defined to be the above kind of omnidirectional cameras which has a single optical axisOOcbut whose optical centersOorOcare not necessarily fixed and could vary along the optical axis. For example, besides the above central catadioptric cameras, some fisheye cameras, some wide-angle cameras, and the traditional perspective camera are all the single-optical-axis cameras.From 1D space points, the radial distortion invariant with known camera principal point was reported in [18]. However, the presented invariants from 2D/3D space points [18] involve intersection point of camera optical axis with the 2D scene plane or involve camera optical axis position in the 3D space. In the following, we show how to derive invariants without the knowledge of the intersection point or the camera optical axis. In order to have a geometric intuition, we illustrate some derived invariant equations only under the sphere model of the central catadioptric cameras.LetMi, i=1…6 be six points on a space plane andmitheir image points under a single-optical-axis camera with only radial distortion. The base plane containingMiis denoted as Π and the camera optical axis is still denoted asOOc. The intersection point ofOOcwith Π is denoted asM0. We assume that no four ofMi, i=1…6 are collinear.From four pointsMi,Mj,Mk,Mnwith i, j, k, n∈{1,2,3,4,5,6} amongMl, l=1…6, we construct a pencil of planesOOc(Mi,Mj,Mk,Mn). The pencil of planes is cut asM0(Mi,Mj,Mk,Mn) by the space plane Π. Furthermore, if the camera has no tangent distortion, the pencil of planes is cut asm0(mi,mj,mk,mn) by the image plane. It follows that by the cross ratio introduction for a pencil of planes in Section 2, the cross ratio ofM0(Mi,Mj,Mk,Mn) is equal to the cross ratio ofm0(mi,mj,mk,mn). An example by (M1,M2,M3,M4) under the sphere model is shown in Fig. 6.The cross ratio of the pencil of linesm0(mi,mj,mk,mn) is ∣mi,k,0∣∣mj,n,0∣/(∣mj,k,0∣∣mi,n,0∣). The derivation is as follows. We use the linemimjto cut this pencil. The obtained four collinear points aremi,mj,ak=(mi×mj)×(m0×mk),an=(mi×mj)×(m0×mn), where × means outer product of two vectors,akdenotes the intersection point of linemimjwith linem0mk, andandenotes the intersection point of linemimjwith linem0mn. Expand the outer products, we have:(3)ak=(mi×mj)×(m0×mk)=|mj,k,0|mi-|mi,k,0|mj,an=(mi×mj)×(m0×mn)=|mj,n,0|mi-|mi,n,0|mj.Letmiandmjbe the projective coordinate bases on the linemimj, the 1D homogeneous coordinates of the four pointsmi,mj,ak,anare (1,0), (0,1), (∣mj,k,0∣,−∣mi,k,0∣), (∣mj,n,0∣,−∣mi,n,0∣) respectively. It follows that according to (1), the cross ratio of the four pointsmi,mj,ak,anis:(4)|mi,k,0||mj,n,0||mj,k,0||mi,n,0|.Since a cross ratio is invariant to projective coordinate systems, the result (4) still holds under any other projective coordinate systems. From the cross ratio introduction for a pencil of lines in Section 2, we know that this cross ratio (4) of the four collinear pointsmi,mj,ak,anis just the cross ratio ofm0(mi,mj,mk,mn).Similarly, we could obtain the cross ratio ofM0(Mi,Mj,Mk,Mn) is ∣Mi,k,0∣∣Mj,n,0∣/(∣Mj,k,0∣∣Mi,n,0∣). As stated above like shown in Fig. 6 that the cross ratio ofM0(Mi,Mj,Mk,Mn) is equal to the cross ratio ofm0 (mi,mj,mk,mn), we have:(5)|Mi,k,0||Mj,n,0||Mj,k,0||Mi,n,0|=|mi,k,0||mj,n,0||mj,k,0||mi,n,0|,This equation is consistent with the established homography between the space plane and the 1D radial lines by Thirthala and Pollefeys in [13,14]. Next, we eliminateM0 of (5).By across multiplying the corresponding Eq. (5) for k=1, n=2, j=3, there are:(6)|m2,3,0||m1,i,0||M1,3,0||M2,i,0|-|m1,3,0||m2,i,0||M2,3,0||M1,i,0|=0.Multiply (6) with ∣M1,2,3∣. And then from the result by the Grassmann–Plücker relations (2):(7)|M2,i,0||M1,2,3|=|M2,3,0||M1,2,i|-|M1,2,0||M2,3,i|,|M1,i,0||M1,2,3|=|M1,3,0||M1,2,i|-|M1,2,0||M1,3,i|we obtain:(8)(|m2,3,0||m1,i,0|-|m1,3,0||m2,i,0|)|M1,2,i||M2,3,0||M1,3,0|+|m1,3,0||m2,i,0||M1,3,i||M2,3,0||M1,2,0|-|m2,3,0||m1,i,0||M2,3,i||M1,3,0||M1,2,0|=0.By applying the Grassmann–Plücker relation like (2):(9)|m2,3,0||m1,i,0|-|m1,3,0||m2,i,0|=-|m1,2,0||m3,i,0|to (8) again, we have:(10)-|m1,2,0||m3,i,0||M1,2,i||M2,3,0||M1,3,0|+|m1,3,0||m2,i,0||M1,3,i||M2,3,0||M1,2,0|-|m2,3,0||m1,i,0||M2,3,i||M1,3,0||M1,2,0|=0.LetV0 be the vector:V0=-|m1,2,0||M2,3,0||M1,3,0||m1,3,0||M2,3,0||M1,2,0|-|m2,3,0||M1,3,0||M1,2,0|.In generalV0 is nonzero. This is because ifV0 is zero, then ∣m1,2,0∣∣M2,3,0∣∣M1,3,0∣=0, ∣m1,3,0∣∣M2,3,0∣∣M1,2,0∣=0, and ∣m2,3,0∣∣M1,3,0∣∣M1,2,0∣=0. This implies that eitherm1,m2,m3,m0 are collinear orM1,M2,M3,M0 are collinear. This is not the general case and here we do not consider such special cases.Consider the three Eq. (10) from i=4, 5, 6. BecauseV0 is nonzero, the determinant of the coefficient matrix of these three equations with respect toV0 should be zero, namely:(11)|m3,4,0||M1,2,4|,|m2,4,0||M1,3,4|,|m1,4,0||M2,3,4||m3,5,0||M1,2,5|,|m2,5,0||M1,3,5|,|m1,5,0||M2,3,5||m3,6,0||M1,2,6|,|m2,6,0||M1,3,6|,|m1,6,0||M2,3,6|=0Expand the left side and the resulting expression is denoted as f123;456, where changing the order of the subscripts (1, 2, 3) or changing the order of the subscripts (4, 5, 6) does not change the expression of (11).Interpretation of the geometric invariance for(11): Since we assume that no four of the space points are collinear, at least one term in the expansion of (11) is nonzero. Assume the nonzero term is the last term, then (11) is equivalent to:(12)f=|m1,6,0||m3,4,0||m1,4,0||m3,6,0|In1-|m1,5,0||m2,6,0||m3,4,0||m1,4,0||m2,5,0||m3,6,0|In2-|m1,6,0||m2,4,0||m3,5,0||m1,4,0||m2,5,0||m3,6,0|In3+|m2,6,0||m3,5,0||m2,5,0||m3,6,0|In4+|m1,5,0||m2,4,0||m1,4,0||m2,5,0|In5-1=0,whereIn1=|M1,2,4||M2,3,6||M1,2,6||M2,3,4|,In2=|M1,2,4||M1,3,6||M2,3,5||M1,2,6||M1,3,5|||M2,3,4|,In3=|M1,2,5||M1,3,4||M2,3,6||M1,2,6||M1,3,5||M2,3,4|,In4=|M1,2,5||M1,3,6||M1,2,6||M1,3,5|,In5=|M1,3,4||M2,3,5||M1,3,5||M2,3,4|.These Ini, i=1…5 are invariants ofMi, i=1…6 to a 3D projective transformation and their coefficients are invariants ofmi, i=1…6 to a 2D projective transformation. This is because they are cross ratios or cross ratio functions. For example, In1 is the cross ratio ofM2(M1,M3,M4,M6), whose coefficient is the cross ratio ofm0(m1,m3,m6,m4). In2 is the product of the cross ratio ofM1(M2,M3,M4,M6) with the cross ratio ofM3(M1,M2,M4,M5) and its coefficient is the product of the cross ratio ofm0(m1,m2,m5,m6) with the cross ratio ofm0(m1,m3,m6,m4).(11) or (12) does not involveM0 anymore and requires at least six pairs of space points and their image points. Whether (11) or (12) holds is not related to a specific order of the space points and the image points. It follows that changing the order of the space points and their corresponding image points in (11) or (12) still gives an invariance relation between the space points and their image points. But, such relations are not independent of the original ones in (11) or (12).In order to establish invariance equation for 3D space points, eight pairs of space points and their image points are required. LetMi, i=1…8 be eight 3D space points of which no five are coplanar. Letmi, i=1…8 be their image points under a single-optical-axis camera with only radial distortion.From the four pointsMi,Mj,Mk,Mnwith i, j, k, n∈{1,…,8}, we construct a pencil of planesOOc(Mi,Mj,Mk,Mn). If the camera has no tangent distortion, this pencil is cut as the pencil of linesm0(mi,mj,mk,mn) by the image plane. It follows that the two cross ratios ofOOc(Mi,Mj,Mk,Mn) andm0(mi,mj,mk,mn) are equal. An example byM1,M2,M3,M4 under the sphere model is shown in Fig. 7.Now we derive the cross ratio ofOOc(Mi,Mj,Mk,Mn). We use the space lineMiMjto cut the pencil of planes. The obtained four collinear points areMi,Mj,bk=(MiMj)∩(MkOOc),bn=(MiMj)∩(MnOOc).bkis the intersection point of lineMiMjwith planeMkOOc, andbnis the intersection point of lineMiMjwith planeMnOOc.bkandbncan be computed as:(13)bk=|Mj,Mk,O,Oc|Mi-|Mi,Mk,O,Oc|Mj,bn=|Mj,Mn,O,Oc|Mi-|Mi,Mn,O,Oc|Mj.LetMiandMjbe the projective coordinate bases on the lineMiMj, the 1D homogeneous coordinates of the four pointsMi,Mj,bk,bnare (1,0), (0,1), (∣Mj,Mk,O,Oc∣,−∣Mi,Mk,O,Oc∣), (∣Mj,Mn,O,Oc∣,−∣Mi,Mn,O,Oc∣) respectively. It follows that according to (1), the cross ratio of the four collinear pointsMi,Mj,bk,bn, also the cross ratio ofOOc(Mi,Mj,Mk,Mn), is:(14)|Mi,Mk,O,Oc||Mj,Mn,O,Oc||Mj,Mk,O,Oc||Mi,Mn,O,Oc|.The cross ratio ofm0(mi,mj,mk,mn) is (4). As stated above like shown in Fig. 7 that the cross ratio ofOOc(Mi,Mj,Mk,Mn) is equal to the cross ratio ofm0(mi,mj,mk,mn), we have:(15)|Mi,Mk,O,Oc||Mj,Mn,O,Oc||Mj,Mk,O,Oc||Mi,Mn,O,Oc|=|mi,k,0||mj,n,0||mj,k,0||mi,n,0|,By across multiplying the corresponding Eq. (15) for k=1, n=2, j=3, we get:(16)|m2,3,0||m1,i,0||M1,M3,O,Oc||M2,Mi,O,Oc|-|m1,3,0||m2,i,0||M2,M3,O,Oc||M1,Mi,O,Oc|=0,Like in Section 3.1, by the similar transformation for (16) and elimination ofO,Oc, we get:(17)|G5,G6,G7,G8|=0,whereGi=|m4,i,0||M1,2,3,i||m3,i,0||M1,2,4,i||m2,i,0||M1,3,4,i||m1,i,0||M2,3,4,i|,fori=5…8.The left side of (17) is denoted as g1234;5678, where changing the order of the subscripts (1, 2, 3, 4) or the order of subscripts (5, 6, 7, 8) does not change the expression. Under the condition that no five ofMi, i=1…8 are coplanar, at least one term of the expanded g1234;5678 is nonzero. Like (12), dividing g1234;5678 by one of its nonzero terms will give a relation between space invariants and image invariants. Also, changing the order of the space points and their corresponding image points in (17) does not give additional independent invariants.The distortion invariants (11) and (17) are derived under a single-optical-axis camera with only radial distortion. It follows that if a single-optical-axis camera has non-radial distortion, i.e. tangent distortion, then (11) and (17) cannot hold. Usually a nonaligned single-optical-axis camera has tangent distortion and thus cannot satisfy (11) and (17). Fig. 8(a) shows a nonaligned catadioptric camera lens, where the perspective camera optical axisOcm0 and the mirror axisOVare not coincident, and consequentlymno longer lies on planeOVXM. Fig. 8(b) shows a thin prism with tangent distortion, where the non-coincident degrees of solid lines and the closer dashed lines say the tangent distortion degrees, the two thick solid lines denotes the axes of the minimum tangent distortion and the maximum distortion. From the minimum axis to the maximum axis, the tangent distortion angles become greater and greater.The values of f123;456 or g1234;5678 could be used to determine whether a single-optical-axis camera is aligned or whether it has tangent distortion. Based one them, we can construct a feature vector and then compute its norm to measure the camera lens tangent distortion amount. To this end, we need to construct two criterion functions at first. One is for 2D case and the other for 3D case.Stability of (11) or (17) to noise is affected by the order of space points and their image points. Thus in order to efficiently use the invariants, we need to consider more equations by changing the order of space points and their image points. The following criterion functions are constructed.For 2D case from six points: The criterion function is constructed as:(18)I2D=120∑ijk;opq∈S1wijk;opq2fijk;opq2,where S is the set of all the combinations (ijk;opq) from 1, 2, 3, 4, 5, 6 with 20 elements in total, fijk;opqis the result of f123;456 (as given in Section 3.1) after changingM1,M2,M3,M4,M5,M6 toMi,Mj,Mk,Mo,Mp,Mqand simultaneously changing the corresponding image points, wijk;opqis a weight to fijk;opqgiven as follows. In the n-th summation term of the expanded polynomial of fijk;opqon determinants, let wn1 be the absolute value of product of determinants containing the space points, and let wn2 be the absolute value of product of determinants containing the image points. For example, in the 1-th term of f123;456, w11 is the absolute value of ∣M1,2,4∣∣M1,3,5∣∣M2,3,6∣ and w12 is the absolute value of ∣m1,6,0∣∣m2,5,0∣∣m3,4,0∣. Then sort ascendingly all wn1 with varying n and let the result be B1. Sort ascendingly all wn2 with varying n and let the result be B2. We take the product of the fifth element of B1 and the fifth element of B2 as the weight wijk;opq. After adding the weight wijk;opqto fijk;opq, I2Dis a function on invariants of the space points and their image points as shown in (12).For 3D case from eight points: The criterion function is constructed as:(19)I3D=170∑ijkl;opqr∈S1wijkl;opqr2gijkl;opqr2,where S is the set of all the combinations (ijkt;opqr) from 1, 2, 3, 4, 5, 6, 7, 8 with 70 elements in total, gijkt;opqris the result of g1234;5678 (as given in Section 3.2) after changingM1,M2,M3,M4,M5,M6,M7,M8 toMi,Mj,Mk,Mt,Mo,Mp,Mq,Mrand simultaneously changing the corresponding image points, wijkt;opqris a weight to gijkt;opqrtaken as follows. In the n-th term of the expanded polynomial of gijkt;opqron determinants, let wn1 be the absolute value of product of determinants containing the space points, and let wn2 be the absolute value of product of determinants containing the image points. Then sort ascendingly all wn1 with varying n and let the result be B1. Sort ascendingly all wn2 with varying n and let the result be B2. We take the product of the twenty-second element of B1 with the twenty-second element of B2 as the weight wijkt;opqr. After adding the weight wijkt;opqrto gijkt;opqr, I3Dis a function on invariants of the space points and their image points.Remark 1The above constructed weights are always nonzero under the respective assumptions that no four ofMi, i=1…6 are collinear in 2D case and no five ofMi, i=1…8 are coplanar in 3D case.We analyze the details of the above construction for each fijk;opq, gijkt;opqrin this subsection 4.1.2.In fact, any functions on fijk;opqor gijkt;opqrby dividing some term in the function will be invariant. Why do we take such I2D, I3Din (18) and (19)? The first reason is that the individual fijk;opqor gijkt;opqris related with point order which makes the values sensitive to noise. So, all the possible point orders in (18) and (19) are considered. Secondly, that we take the square sum other than absolute value sum of fijk;opqor gijkt;opqris because it could make the functions more distinct between zero and nonzero. Besides, the reason why we do not consider higher order sum of fijk;opqor gijkt;opqris because the high order sum is too sensitive to noise. Lastly, weighted fijk;opqand gijkt;opqrin such a way become the functions of cross ratios as shown in (12). The cross ratios are the most basic invariants in projective space which are independent of any specific coordinate systems. Why do we take the fifth elements of B1 and B2 when assigning the weights to fijk;opq? The reason is detailed next. The similar reason holds for gijkt;opqrand is omitted.Error analysis for added weights The reason why we take the fifth elements of B1 and B2 when assigning the weight wijk;opqto fijk;opqis given below. fijk;opqhas six terms. LetF=∑i=16vibe a general function containing six terms vi, i=1…6. The error for viis denoted as ei. In practice the obtained function value is the value ofFe=∑i=16(vi+ei). Without loss of generality, we assume ∣vi+ei∣⩽∣v5+e5∣⩽∣v6+e6∣, i=1…4, namely the ∣v5+e5∣ term is the fifth element of the list ∣vi+ei∣ after being ordered ascendingly. Since for our case of fijk;opq, the values of viare much bigger than the errors ei, from ∣vi+ei∣⩽∣v5+e5∣⩽∣v6+e6∣ there is still ∣vi∣⩽∣v5∣⩽∣v6∣. We assign the weight v5+e5 to Feand then have the weight functionFev5+e5. The error for the weight function is the value ofFev5+e5-Fv5, denoted as ER. We expand ER in the first-order Taylor series:(20)ER≈e1+e2+e3+e4+e6v5-(v1+v2+v3+v4+v6)e5v52.For some parameters, if the value of F is zero, then we have v5=−(v1+v2+v3+v4+v6). Substitute v5=−(v1+v2+v3+v4+v6) into (20), we obtain:ER≈|e1+e2+e3+e4+e5+e6||v5|. Since ∣v5∣ is much bigger than the errors ei, ER is small and thus for the zero F, the weight functionFev5+e5is stable to noise ei. Clearly, the bigger the denominator is, the smaller the error ER is. However, for some parameters, the values of F will not be zero, a large weight is not a good choice. Assume we assign the largest term ∣v6+e6∣ in the list ∣vi+ei∣, i=1…6 to Fe, thenFev6+e6⩽Fev5+e5. Therefore, the weight function by v6+e6 is more close to zero than the weight function by v5+e5. This means that the discriminability between the zero values of F and the nonzero values of F byFev6+e6is poor. Thus, using the fifth element as the weight is a tradeoff between the stability to noise and the distinctiveness from zero to nonzero.Based on the criterion functions constructed in Section 4.1, we are able to give an algorithm to determine whether a single-optical-axis camera is aligned or has tangent distortion. In addition, the infinity norm of a constructed feature vector is outputted to indicate the tangent distortion amount. Here, the camera principal pointm0 is assumed to be known and can be reasonably approximated by the image center or the center of the imaged mirror contour in practice (see the analyses in the fourth paragraph of Section 5.1 and the fourth paragraph of Section 5.2). Let ε be a threshold. Assume there are some known space points. The known space points can be obtained by a known grid object or by manual measurement and their accuracies are determined by this object or measurement. A set consisting of six (eight) pairs of space points and their image points is called a six (eight)-point group. In 2D case, we use six-point group and I2D. In 3D case we use eight-point group and I3D. The proposed algorithm is given in Fig. 9.In the following, some implementation issues in the algorithm about sufficiency condition of the zero infinity norm P, monotonicity of the infinity norm P, threshold setting, and degeneracy will be addressed.In Section 3, we have proved that if a camera has only radial distortion, i.e. no tangent distortion, all fijk;opq=0 and gijkt;opqr=0 in theory, or I2D=0 on all six-point groups for 2D case and I3D=0 on all eight-point groups for 3D case. Equivalently, we can say if there exist I2D≠0 on some six-point groups (I3D≠0 on some eight-point group), the camera must have tangent distortion. This means that if P⩾ε, the camera is nonaligned or has tangent distortion without any question.Conversely, if a camera has tangent distortion, should there exist some six (eight)-point group whose value of I2D(I3D) is nonzero? Or, if I2D=0(I3D=0) on all six (eight)-point groups that is P<ε, does it mean the camera is tangent distortion free? In general, the answer is affirmative. Assume that all the values of I2D(I3D) are zero but the camera lens has tangent distortion, this means that there is a projective transformation between pencil of linesm0midand pencil of linesm0miuin 2D image space, where i is the index of different image points,midis the image point with tangent distortion, andmiuis the corresponding image point without tangent distortion. If the number of the image points is sufficiently large, this tangent distortion being a projective transformation is not a true tangent distortion because we can make a global projective transformation to remove it in the image. In conclusion, if P<ε, we could say the image has no tangent distortion.Does a smaller value of P indicate a smaller tangent distortion and does a larger value of P indicate a larger tangent distortion? Or mathematically, is P monotonic?P is the maximum of the values of the feature vectorFandFconsists of values of I2D(I3D) on different six (eight)-point groups. Some smaller values of I2D(I3D) from only a few number of six (eight)-point groups cannot indicate smaller tangent distortions. But usually in practice, there are sufficient image points in an image and so we have sufficient six (eight)-point groups. Thus,Fcontains a sufficient number of values. If P is smaller, all the values inFare smaller. Based on the analysis of sufficiency condition of the zero infinity norm P, we know smaller P can indicate smaller distortions in an image.We performed extensive simulations to investigate the monotonicity of the infinity norm P. We generate different radial distortion images and then add tangent distortion to them. In 2D case, based on different six-point groups, we increase tangent distortion angle for one point in these groups, and then compute the values of I2D. Repeat the processing by increasing tangent distortion angles for two, three, four, five, six points in these groups respectively. We observe that these values of the single function I2Dincrease gradually with the tangent distortion angles increasing in 12,539 cases out of 14,060, but the rest 1521 cases do not. Among these 12,539 cases, all the different monotonicity shapes are shown in Fig. 10. I3Dbehaves similarly. BecauseFis composed of all the values of I2D(I3D) on different point groups and P is the maximum of these values, the most part of values inFthat are strictly monotonic assure the monotonicity of P.Conclusively, the infinity norm P in the proposed algorithm is monotonic with respect to the tangent distortion degree, which supports the output P can measure the tangent distortion amount.Based on the experiments for monotonicity analysis, we also study how to choose the threshold ε for the algorithm. We collect all the values of the criterion functions on points without tangent distortion to be a set and those with tangent distortion being monotonic to be another set. These two sets are denoted as ST1 and ST2. The maximum of the values in ST1 is taken and denoted as s1. ST2 consists of values of different point groups with increasing tangent distortion level. We take all these values at the lowest tangent distortion level to be a set, denoted as st. Then, the mean of st is taken and denoted as s2. Having obtained s1 and s2, take a value between them and the result is the threshold in our algorithm. In our experiments, we have s1=0.0052, s2=0.0189, and the threshold is taken as 0.01. The reason why we take the mean of st other than the minimum is as follows. Under the lowest tangent distortion level, the tangent distortion of most points is very small, for example in one of our experiments, the tangent distortion angles of 10 points among all 16 points are smaller than 1° and those larger angles are 3.14°, 4.48°, 4.03°, 1.06°, 1.33°, 1.27°. Therefore, all the points in some six (eight)-point groups may be with the very small tangent distortions. It follows that taking the minimum value of st as s2 cannot distinguish between the points without tangent distortion but only disturbed by small noise and the points having tangent distortion. Another reason of why we take the mean of st other than the minimum is that the camera lens is not necessarily meant tangent distortion free when the value of a single criterion function is zero (but there exist nonzero values when the camera has tangent distortion).If we cannot obtain such a G in Step 1, the used space points distribute in some specific configurations, for example, the configuration with N−1 space points collinear (N is the number of the total space points) or with all space points collinear. These configurations should not be chosen when applying the above algorithm and can be separately dealt with by using the invariants of 1D space points in [18].The feature vector in the proposed algorithm is invariant to a projective transformation, which makes any a world coordinate system of measuring the space points workable. Another advantage of our work is that it is straightforward from space points and image points, where no other parameters except for the principal point are needed. Some vision tasks such as camera calibration, camera pose determination, and 3D reconstruction are required to solve the camera parameters under some camera imaging model. Once the model is used mistakenly, the solved results are unreliable. Also, to evaluate distortion of a camera by after solving camera parameters cannot be trusted either. For example, tangentially distorted image points do not satisfy the homography transformation [13,14] between space points and image points. If the homography is compulsively computed from tangent distorted images, the result is unreliable. Then the subsequent computation for detecting tangent distortion from such unreliable estimation cannot be reliable either. However, our method does not involve the unreliability and can be trusted. Therefore, it is better to use our method to make camera lens verification before performing some vision task when taking a radial distortion camera. Such an example is shown in the following Section 4.3.Once we know a camera has only radial distortion, the established invariance equations can also be used for reconstructing the scene structure. In [18], a method to recover structure of a plane is presented from two views, where the intersection points of the camera optical axes with this plane are estimated at first. We present an improvement without resorting to the intersection points. Similar to [18], five points on the scene plane should be known and then from two views to recover the other point coordinates of the plane. As analyzed before, we use the center of imaged mirror contour asm0. The known five points are denoted asMi, i=1…5, others unknown asMj, j=6…n with n being the number of points on the plane. Now we have two views, the image points aremk, k=1…n under the first view andmk′,k=1…nunder the second view, as shown in Fig. 11. Then we establish the corresponding Eq. (11)f123,45j=0, j=6…n under the first view (which is the equation of the line L shown in Fig. 11) and those denoted as f′123,45j=0, j=6…n under the second view (which is the equation of the line L’ shown in Fig. 11). These equations are linear for the coordinates ofMj, j=6…n. EachMj, j=6…n has two coordinates unknown. So, from f123,45j=0 andf123,45j′=0we could solve outMj. In order to obtain a more stable estimation, we use all the possible equations of f123,45j=0 andf123,45j′=0by changing the point order like in the construction of I2Dwhen solving the equations. The above process can be extended to 3D space based on (17), but at least three views are needed and seven known space points in scene are required.

@&#CONCLUSIONS@&#
