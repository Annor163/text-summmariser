@&#MAIN-TITLE@&#
Application-based dynamic reconfiguration in optical network-on-chip

@&#HIGHLIGHTS@&#
ReFaT enables run-time reconfiguration of network topology and routing algorithm.ReFaT adopts wavelength routing and avoids electrical control packets.ReFaT utilizes a novel wavelength assignment approach to map various topologies.ReFaT architecture facilitates simultaneous multicast and unicast data transmission.ReFaT improves power and energy efficiency compared to non-reconfigurable topologies.

@&#KEYPHRASES@&#
Optical NoC,Application-based reconfiguration,Power and energy efficiency,

@&#ABSTRACT@&#
We propose a new optical reconfigurable Network-on-Chip (NoC), named ReFaT ONoC (Reconfigurable Flat and Tree Optical NoC). ReFaT is a dynamically reconfigurable architecture, which customizes the topology and routing paths based on the application characteristics. ReFaT, as an all-optical NoC, routes optical packets based on their wavelengths. For this purpose, we propose a novel architecture for the optical switch, which eliminates the need for optical resource reservation, and thus avoids the corresponding latency and area overheads. As a key idea for dynamic reconfiguration, each application is mapped to a specific set of wavelengths and utilizes its dedicated routing algorithm. We compare the proposed reconfigurable optical NoC with traditional electrical NoCs, as well as non-reconfigurable optical NoCs in terms of data transmission delay, power consumption, and energy dissipation. The simulation results show that on average, ReFaT reduces power and energy consumption by 54.75% and 40%, respectively, compared to the non-reconfigurable ONoC.

@&#INTRODUCTION@&#
With advances in semiconductor technology in recent years, current multi-core systems-on-chip (SoCs) have rapidly grown in size and complexity. Future SoCs will consist of complex integrated components communicating with each other at very high rates. The microprocessor industry has moved from single-core to multi-core and eventually will lead to many-core architectures containing tens to hundreds of identical cores arranged as chip multiprocessors (CMPs) [1]. The lack of scalability in bus-based systems-on-chip, large area overhead and unpredictability of electrical parameters for point-to-point dedicated links in multi-core SoCs have motivated researchers to propose packet-switched network-on-chip [2]. However, traditional NoC architectures cannot continue to satisfy future requirements such as bandwidth and latency within the package power budget [1,3].Since power dissipation is an important issue in NoCs, capability of on-chip optical interconnects in power reduction has introduced optical interconnects as an excellent candidate for transmitting data. This structure is a physical approach and novel technology solution with high transmission capacity, low power consumption, low latency and low crosstalk [4,5]. Optical Network-on-Chip (ONoC), as a novel solution, provides low power dissipation that remains independent of data capacity and distance, as well as wavelength parallelism, ultra-high throughput, and minimal access latencies. Hence, low propagation loss in optical switching elements [6] and bit rate transparency [7] of optical on-chip interconnection make ONoCs attractive as a high-bandwidth, low-power, and low-latency interconnection network in Chip Multi-Processors (CMPs).In application-specific multi-core SoCs, application-specific optimization is one of the most effective approaches to provide optimal conditions across a range of applications, and bridge the exiting gap between the current and the ideal NoC in terms of power/performance metrics [8]. This method of optimization tries to customize the architecture of an ONoC for a target application in the case where the application and its traffic characteristics have been specified at design time. However, recent technology advances try to map different applications onto a single SoC as a cost effective approach. Since different applications have different functionalities, interconnection networks for this highly complex SoCs should closely match the traffic characteristics and performance requirements of different target applications. Consequently, an ONoC that is customized to run one application will not meet the constraints of other applications. By considering dynamic behavior of an on-chip traffic pattern, reconfigurable communication architectures are inevitable to fully utilize network resources for various communication requirements.In this paper, we propose a reconfigurable ONoC whose topology changes dynamically to efficiently route various traffic patterns. Specifically, the proposed architecture can be reconfigured either as flat-based or tree-based networks with negligible area overhead. Our proposed architecture, named as ReFaT ONoC (Reconfigurable Flat/Tree Optical Network-on-Chip), customizes the network topology and routing algorithm based on the communication requirements. As well, passive routing is adopted in the proposed photonic architecture, which is performed by routing optical data streams based on their wavelengths. Utilizing wavelength routing method, ReFaT ONoC eliminates the need for optical resource reservation at the intermediate nodes, and thus avoids the corresponding latency and area overheads. Moreover, passive micro-architecture of the proposed optical switch reduces energy consumption and power dissipation, compared to non-reconfigurable architectures, and it also provides the ability to implement multiple Butterfly networks simultaneously. ReFaT utilizes wavelength division multiplexing scheme to support simultaneous unicast and multicast data transmission.In summary, we make the following contributions in this paper:•We introduce an application-based reconfigurable Optical NoC which dynamically configures the optical network under various traffic patterns.ReFaT can be extended to map various flat-based and tree based topologies.ReFaT architecture facilitates simultaneous multicast and unicast data transmissions.Compared to non-reconfigurable topologies, ReFaT improves power and energy efficiency under various traffic patterns.The rest of the paper is organized as follows: Section 2 introduces the proposed reconfigurable data plane for optical NoCs. In Section 3, we describe the control plane. Section 4 explores the developed simulation environment. In Section 5, we present our experimental results and compare the proposed architecture with alternative optical on-chip architectures. Related work is reviewed in Section 6. Finally, Section 7 concludes the paper and presents the future work.The selected topology for optical network-on-chip plays an important role in the performance of ONoC, and addresses some key issues in design of on-chip networks, as well. These critical issues, such as node degree, planner layout, scalability, and symmetry, have considerable effects in the simplicity of the photonic switch as well as its implementation cost.Most recent optical networks are built upon traditional topologies such as Mesh, Torus, Fat-Tree, Butterfly and Spidergon while each of them optimizes the network performance under a limited range of traffic patterns. For example, the n-dimensional mesh is the most popular direct topology which is best suited for the planar, regular layout of the CMPs. In this regard, most recent optical NoC architectures have been implemented on top of Mesh or Torus topologies [1]. In addition to their simple layout, these topologies provide a good tradeoff between network diameter, connectivity, and area requirements for on-chip network architectures. On the other hand, tree-based topologies, such as butterfly, are excellent in huge data transform and clustering operations. These kinds of topologies are widely used in applications such as Fast Fourier Transform due to their small diameter [9–11].Since well-designed NoCs are required to run a wide range of applications, the proposed architecture should enable runtime reconfiguration according to the dynamic behavior of the traffic pattern. This paper proposes a new application-based ONoC which can be dynamically reconfigured either as flat-based or tree-based networks with negligible area overhead.Schematically, an N-node ReFaT topology is implemented as a 2D topology with m columns and n rows, where N=m×n. Each node communicates with its neighbors through four diagonal, two horizontal, and two vertical links. The proposed topology is shown in Fig. 1a.Flat-based and tree-based topologies adopt their specific deterministic routing algorithms. Specifically, Torus-based network adopts XY routing algorithm, while in the case of Butterfly topology, either of first common ancestor or the dimension order routing algorithms is chosen to route packets to the destination node. Utilizing diagonal links by common ancestor algorithm may lead to shorter path in terms of number of hops. However, non-uniform traffic distribution may result in more contention and increased overall delay. To investigate this trade-off, Section 3.4 illustrates the paths taken by common ancestor and XY routing algorithms in the case of Butterfly and Torus topologies, respectively, in a 16-node ReFaT.Switching can be accomplished by adding microring resonators [12] alongside waveguide [13] intersections. These silicon microring resonator based electro-optic switch arrays coupled with waveguide crossings can constitute a potential architecture for on-chip photonic crossbar interconnection. Various studies have focused on the design of efficient optical switches customized for existing topologies. However, most of them are controlled electrically, which enforces reservation phase prior to optical data transmission.Utilizing Optical Add/Drop (OAD) filters [14], we propose a passive optical switch which adds (drops) optical wavelengths to (from) the optical transmission stream without any electronic processing. The proposed optical switch eliminates optical resource reservation at intermediate nodes. The key idea of passive optical switching is based on wavelength routing method, which passively routes optical data streams based on their wavelengths. For this purpose, one wavelength is associated to each node in the network. For data injection, optical streams targeted to a specific node are modulated on its dedicated wavelength. Hence, the address of the target is not contained in the packet; rather, it is embedded in the wavelength of the optical signal [14].As a key idea of wavelength routing mechanism, the addresses of the destination nodes are embedded in the wavelengths of the optical signals. Hence, optical packets targeted to different nodes should be modulated on distinct wavelength channels to avoid optical interference. As a key idea of topology reconfiguration, wavelength assignment should be dynamically adopted for various topologies; In other words we assign different sets of wavelengths to each topology to map them dynamically. On the other hand, distinct wavelength sets for various topologies increase the number of required wavelengths, and thus degrades the network scalability. Specifically, unique wavelength assignment leads to (m×n) and n distinct wavelengths for Torus and Butterfly topologies, respectively. To achieve more scalability, we propose to partition each network into two sub-networks. While distinct wavelengths are assigned to the nodes in each sub-network, the sub-networks reuse the same wavelength set. In other words, ReFaT assigns each wavelength channel to two different nodes. In this manner, ReFaT provides multicast data transmission, as well as more scalability. The following equation specifies wavelength channels dedicated to node (x, y):(1)λ(x,y)=m×(xmod⌈n/2⌉)+yFig. 1b shows data transmission by using two injection channels. For more clarity, only the utilized links are shown. Now, we require⌈N/2=(m×n/2)⌉and⌈n/2⌉distinct (sets of) wavelengths in a Torus and Butterfly architecture, respectively. This way, the less the number of assigned wavelengths in ReFaT, the more the scalability is provided. To avoid interference between the sub-networks in each topology, ReFaT topology is augmented by some wraparound links.According to the ReFaT topology, two dimensional m×n optical switches interconnect the corresponding local IPs to neighbor nodes. Utilizing Optical Add/Drop (OAD) filters, we propose a passive optical switch which is based on wavelength routing. To send data to a destination node, source node modulates optical data based on the destination node’s wavelength.The destination node extracts its own data according to the wavelength. To implement different routing algorithms, the ReFaT switch has more microrings compared to a non-reconfigurable switch, which may increase delay and power consumption. However, as simulation results show, and discussed in details in Sections 2.4 and 5.2, power consumption and energy dissipation are reduced by ReFaT due to reconfiguration capability. Fig. 2depicts micro-architecture of the proposed switch, while various paths of the switch are discussed as follows.(a)Injection: To support multicast as well as unicast transmissions, ReFaT switch injects data packets to the network via double injection channels to send packets to n destination nodes simultaneously,1⩽n⩽N. By doing this, the number of wavelengths will be reduced by half, which leads to better scalability. The appropriate injection port for data injections is chosen based on destination node. As each wavelength is assigned to two nodes, we can consider two wavelength groups. The first (I1) and second (I2) injection links are utilized for optical data transmission to the same and the other wavelength groups, respectively.Ejection: To extract optical data streams targeted to the local IP from those streams passing through the switch, the ReFaT switch benefits from Ejection Microring Resonators (EMRs) which are briefly shown by E in Fig. 2. EMRs are activated when the modulated wavelength of the optical stream matches the dedicated wavelength of the local node.Routing: Routing Microring Resonators (RMRs), such as N, NE, NW, S, SE and SW, are utilized for appropriately demultiplexing optical data streams targeted to different destination nodes. These elements are optically controlled, and multiplex optical data streams transmitted from the source node with those passing through the optical switch. N, NE and NW are utilized to send data to north, north-east and north-west neighbors, respectively. S, SE and SW microrings send data to south, south-east and south-west neighbors, respectively. For example, microring NW is activated when N1 wants to send data to N2, its northwest neighbor. In the case of sending data to north, e.g. communication from N0 to N2, microring N is activated. To transfer data from N2 to its right neighbor N3, no microring will turn on.Dummy microrings: In ReFaT, we add more microrings to support different turns of routing algorithms, which lead to negligible increase in power consumption. Moreover, routing data through diagonal channels includes passing through the crossing where two waveguides cross each other. These crossings affect power in terms of Y conjunctions crossing and Y coupler, which lead to 0.12dB and 0.51dB power losses, respectively. To decrease power consumption, we insert dummy microrings in place of Y conjunctions; each Y crossing consumes 51 (0.51/.01) times more power than an off microring.ReFaT can dynamically map two classes of topologies. In general, choosing between topologies and changing the networks parameters can be classified into two types, static and dynamic. In the static method, parameters are set based on the application characteristics in advance, while dynamic methodologies allow runtime parameter adjustments. Comparing these two categories, static methods reduces design efforts at the expense of reduced network efficiency. Since ReFaT ONoC adopts wavelength routing mechanism, distinct sets of wavelengths are assigned to each topology. In this way, dynamic topology reconfiguration is achieved by dynamic management of modulation wavelength channels. For each topology, optical data modulates on its dedicated set of wavelengths.It is worth noting that resonant wavelengths of various microrings in each optical switch passively determine optical data traversal through the optical switch, such that in the case of Torus topology, data traverses solely through horizontal and vertical links, while in case of Butterfly topology, diagonal links are incorporated for data traversal, as well. Fig. 4 shows various scenarios for optical data routing in the case of Torus and Butterfly networks.In addition to regularity, constant node degree, high degree of connectivity, and symmetry, the key advantages of ReFaT are listed as follows:(a)Reconfigurability: Although customizing SoC for a specific application is an effective way to improve performance and power efficiency, nowadays mapping different applications on a single SoC has been proposed as a cost effective design approach. In these highly complex SoCs, reconfigurable communication architectures are inevitable to fully utilize network resources for various communication requirements of different applications. Reconfigurable ONoCs usually suffer from huge area overhead, low efficiency and lack of ability to implement various kinds of topologies. To address the shortcomings, we offer ReFaT, an optical reconfigurable ONoC which enables network reconfiguration based on different application patterns utilizing the minimum amount of microrings and wavelengths. To keep cost in a reasonable state, ReFaT is able to implement various topologies which belong to either flat-based or tree-based categories.Scalability: Increase in the number of processing cores increases the number of distinct wavelengths. Also, wavelength constraints limit the feasibility of photonic architecture for future SoC designs. For routing data correctly without contention, ReFaT utilizes⌈N/2=(m×n/2)⌉+⌈n/2⌉wavelengths, which is negligibly higher than the number of wavelengths in regular optical mesh and Butterfly networks.Multicasting: The proposed architecture benefits from WDM technique and double injection channels in the proposed switch for simultaneous transmission of unicast and multicast packets. In this regards, it is capable of handling multicast optical messages without imposing area, power, and energy overheads.To achieve reconfigurability, we insert more microrings, wavelengths and crossings. In this regard, there are some issues which need to be handled in order to keep ReFaT feasible. Our tact to control these issues can be described as follows:(a)Waveguides Crossing: One of the major concerns through ReFaT is the huge number of crossings, which leads to increase in delay and power consumption, and threats the feasibility of the proposed architecture. Although, we insert more crossing links and microrings, the experimental results show that ReFaT improves power and energy consumption compared to non-reconfigurable optical networks. Comparing to reconfigurable electrical NoC, ReFaT decreases power and energy by 46% and 40%, respectively, while [15] reports 20% increase in power and 22% decrease in energy consumption, and [9] reports more delay under lower traffic load. Fig. 2 shows the layout for connecting four cores together in order to reduce the effect of waveguide crossing.Y connection: Increasing the number of Y connections increases power consumption. In order to decrease the number of this kind of connections, we utilize dummy microrings which consume 51 times less power than a Y connection.Microrings: ReFaT inserts additional microrings per router, by 30% and 16% in comparison with non-reconfigurable Torus and Butterfly ONoCs, respectively. As Fig. 2 shows, we placed these extra microrings such that the area overhead is kept as low as possible.Due to limitation on the number of received wavelengths in each node, optical data transmission phase proceeds checking the state of destination node. In the following, we explain the control architecture and its procedure to start data transmission.For control network, we use the model presented in [14], where every four nodes make a sub local network and each row of nodes has its dedicated receiver channel, as is shown in Fig. 3.All nodes in each local network are electrically connected to a control unit, which monitors the status of the ejection channels in the local network. To do so, optical control packets, such as destination checking and acknowledgement packets, are transmitted and received by the control unit.In the optical network, control network indicates whether destination node is ready to start data transfer. If destination node is ready, source will modulate data on the destination node’s wavelength, and will send it through the network. Otherwise, it reattempts to send data after a period of waiting time.To check the status of the corresponding ejection channels in destination node, a destination-checking packet is routed to the destination before initiating optical data transmission. If all of the ejection wavelength channels at the destination are fully occupied, checking packet is sent back to the transmitter IP. Then, transmitter waits for a period of waiting interval and reattempts to transmit the optical data [16]. Otherwise, an acknowledgement packet is sent to the source node to initiate optical transmission with the corresponding free ejection wavelength set.After verifying the existence of a free ejection wavelength channel at the destination node, optical message can be transmitted without buffering. The switching state of the micro resonators on the data stream path is optically controlled by modulated wavelengths of the optical data streams.Fig. 4shows a routing sample between source node and destination node in the case of Torus and Butterfly topologies. We route data by applying different routing algorithms for each topology. Specifically, common ancestor and XY routing algorithms are adopted in Butterfly and Torus topologies, respectively. In this figure, source and destination nodes are shown by red and green colors, respectively. For each topology, only the active links are shown, while the traversed path is highlighted by red arrows. Details of selected links and microrings in each middle node have been indicated in the blocks that are marked by numbers assigned to the corresponding visited node.We developed a behavioral simulator based on OMNet++ [17] to validate the functional behavior, and investigated the efficiency of the network along with its power consumption, data transmission delay, and energy dissipation for various traffic patterns, including varying percentages of unicast and multicast traffics.As a case study, we have implemented a parameterized ReFaT ONoC in a two-dimensional layout. Assuming a chip size of 1.8cm×1.8cm [18], we analyze a 64-node topology, 8×8 planar layout, which will be built in a 22nm CMOS process technology [19]. According to the chip dimensions and 2D layout, optical links between adjacent nodes have an approximate length of 2mm. We assume a propagation velocity of 30.8ps/mm in a silicon waveguide for the optical signals [19]. Also, propagation delay in an optimally repeated wire for the electronic signals traveling along electrical wire is 262ps/mm. Since in each switch, local link to the IP block is shorter than the three other links, we assume a length of 0.5mm for local links, which leads to delay values of 15.4ps and 131ps for the local optical and electrical links, respectively. Moreover, 8-bit electrical links are utilized for transmitting electrical destination-checking packets through the network with 5GHz clock speed [19].Traffic pattern in an on-chip network is defined by packet size distribution, packet injection process and distribution of the packet destination. Packet sizes are uniformly distributed in the range of [128B–1KB] for unicast and [10B–500B] for multicast [19] traffics, respectively. The load offered to the network (α) is defined as [20]:(2)a=MessageDurationMessageDuration+μThe parameter μ models inter-message gap as a Poisson random variable. This parameter indicates the amount of traffic load in ONoC. Increase in Poisson variable leads to much longer inter message gap, and offers less load to the network. The exact amount of load depends on data rate and packet average length. 10, 1, 0.05(μs) values for this parameter indicate 0.29, 0.81 and 0.99, which respectively represent light, fair and heavy traffic loads in the network. At the behavioral level, multicast traffic is defined by three different parameters, i.e. multicast percentage (5%), number of destinations and destination distribution. For investigating efficiency of the proposed ONoC, we perform various simulations under different synthetic workloads: uniform (Un), neighborhood (Ne), tornado (To), bit reversal (BR), bit complement (BC), matrix transpose (MT), hotspot (HS) and perfect shuffle (PS) [21].

@&#CONCLUSIONS@&#
Although customizing the architecture of an ONoC for a target application is a way to improves performance and power consumption, mapping different applications on a single SoC is more cost effective. In these highly complex SoCs, interconnection network needs to match the traffic characteristics of different applications. To this end, reconfigurable communication architectures are inevitable to fully utilize network resources for various communication requirements of different applications. In this paper, we proposed ReFaT ONoC as a dynamic reconfigurable optical network, whose architecture can be reconfigured either as flat-based or tree-based networks, based on the communication requirements, with negligible area overhead. This photonic network adopts passive routing, which is performed by routing optical data streams based on their wavelengths. Utilizing wavelength routing method, ReFaT ONoC eliminates the need for optical resource reservation at the intermediate nodes, and thus avoids the corresponding latency and area overheads. Moreover, passive micro-architecture of the proposed optical switch reduces energy consumption and power dissipation, compared to non-reconfigurable architectures, and it also provides the ability to implement multiple Butterfly networks simultaneously.The simulation results depict that compared to a non-reconfigurable ONoC, ReFaT reduces energy consumption and power dissipation around 40% and 54.75%, respectively; while increases delay negligibly around 4.3%. Moreover, in comparison to reconfigurable electrical NoC, ReFaT reduces power and energy consumption and delay up to 98.35%, 99.69% and 89.95%, respectively. As a future work in this line, ReFaT can be improved to map different classes of topologies such as hypercube. Moreover, as a new approach, we can address adaptive routing algorithm to achieve better performance.