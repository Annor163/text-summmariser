@&#MAIN-TITLE@&#
Resource based process planning for additive manufacturing

@&#HIGHLIGHTS@&#
Resource based process planning model is proposed for Additive manufacturing.Optimum build direction is determined for free-form object.Deposition directions are optimized for generated slices.Proposed methodology minimizes the resource consumption during part fabrication.Better build time and length are found during implementation.

@&#KEYPHRASES@&#
Additive manufacturing,Process planning and optimization,Build direction,Material deposition direction,

@&#ABSTRACT@&#
Resource consumption in additive manufacturing (AM) is often tied with the physical attribute of the fabricated part. Thus, optimizing the processes plan for minimum part fabrication resource requirement is a matter of great interest. In this work, the hierarchical nature of the AM process plan steps are emphasized and both build direction and material deposition direction are optimized while considering the resource requirement. A novel combined two-step optimization methodology is presented to determine optimal build direction for the object and material deposition direction for layers while considering minimum contour plurality, surface quality, build height, fabrication factor, and layer contour concavity to compensate the fabrication and resource limitations. The proposed methodology is implemented for an example object and the results indicate that the total build time can be significantly reduced compared to the total build time associated with arbitrary build and deposition directions.

@&#INTRODUCTION@&#
Additive Manufacturing (AM) processes are at the core of next generation manufacturing which focuses on accelerating the domestic manufacturing competitiveness and reviving the overall economy. Hailed as the “third industrial revolution”  [1], AM has inverted the ‘Design for Manufacturing’ concept into ‘Manufacture for Design’. The fundamental agility in AM processes comes with the layer based building technique from the digitized model. The digital object model is usually constructed using the CAD modeler or reverse engineering techniques. The validated model needs to be sliced with a set of intersecting parallel planes perpendicular to a predetermined build direction along which the layers are placed one upon another. Thus, the 3D model is discretized into a set of closed 2D slice contours generated from the intersection between the 3D geometric model of the object and the planes. Material is added within these sliced contours by following a specific tool path and the object is built by putting those consecutively.Considering the desired attributes in the process and the object geometry, the process planning steps can be dramatically simplified in the layer-based manufacturing approach which can vary the resource requirements such as time and travel length. Such attributes include number of layers, shape and their size, single or multiple contour in a slice, support material, functionality, accuracy, and surface quality  [2]. Each of these attributes depends upon the execution of the process steps and is often related with multiple process steps. As a result, the effect of these attributes is carried out between steps towards the finished object. Each of the AM process steps is equally important and can have significant impact on the attributes of the manufactured part. But due to their hierarchical relationship, predecessor process steps have more influence on the finished product than their successors. Fig. 1shows the hierarchical process planning steps to fabricate an object with additive manufacturing techniques. The hierarchical steps can be distinguished as virtual and physical strategy.Build direction, which belongs to the virtual strategy, can be defined by the perpendicular vector on the imaginary plane for material deposition. Build direction attracted least attention from the AM research community and more or less considered as a user defined parameter  [3]. When developing the process plan for AM, the build direction is a crucial factor to be considered. The most common assumption about build direction is that it affects the build time and the volume of support structure required during fabrication  [4,5]. Often, build direction is also associated with the number of layers of the part  [6] to control the build time attribute. For the same part, any arbitrarily chosen build direction may result in a relatively larger build height, which would, in turn, definitely increase the number of layers and so the build time. Furthermore, surface quality of the part may also depend upon the build direction  [7,8]. Curved surfaces and the planer surfaces other than those which are either parallel or perpendicular to the selected build direction inherit poor surface quality due to the stepping effect of adding 2.5D layers one upon another in order to approximate the part surfaces  [2,9,10].Alexander et al.  [7] determined build direction by maximizing the external surface accuracy through minimizing the average weighted cusp height. In bottom up AM technique, which requires support structure, the build direction is often confined with the planar (flat) surfaces of the object  [6,11,12] as base. Xu et al.  [4] proposed the selection of an optimum building direction considering the differences of building inaccuracy, surface finish, and manufacturing time and cost for multiple additive manufacturing processes. An empirical knowledge based expert system tool developed by Frank  [13] uses the expert questionnaire for decision matrix which helps establish the optimum or near optimal build direction.The fabrication issue such as volumetric error  [8] during deposition is also considered to find out an appropriate build direction. A multi-objective optimization method  [14] is proposed to achieve good surface finish, accuracy and minimum build time. Byun and Lee  [2] and Pham et al.  [11] considered build time, surface quality, and cost of part to determine the optimum build direction from a set of pre-selected orientations. A proposition of a mathematical model to predict the layered process error considering the fabrication orientation is demonstrated by Lin et al.  [15]. In order to improve the productivity, part quality, and economy during part fabrication, optimum orientation of part is determined by minimizing build time, staircase error, and material used  [16] while maintaining the desired shell thickness. Tyagi et al.  [17] modeled the optimal build orientation by considering the staircase effect and required build time. Both surface roughness and built time were used to determine the optimal part orientation for fused deposition modeling (FDM) system  [18], selective laser sintering (SLS) and laminated object manufacturing (LOM) processes  [19]. Thus, most of time build directions are selected to improve factors such as surface finish, build time and volume of support structure required, shrinkage, curling and part cost, but often time build direction is not the sole parameter that affect those factors. However, choice of the build direction can create multiple contours for free form shape object in the same layer which can increase the build time during fabrication.Once the build direction is defined, the model requires slicing. The 3D model is sliced by a set of parallel and intersecting planes perpendicular to the build direction. Closed 2D contours are generated by connecting the intersection points between the plane and the surface model. Material deposition path or tool-path is generated for individual slice with raster angle and hatch density to fill the internal space. The extruder or laser/light head need to be guided through the pre-defined contours or tool-path in order to create an internal meso-structure. Since each deposited layer is supported by its precedence layer, a 0°–90° raster angle pattern among successive layers is commonly used crisscrossing the meso-structure. However, other pre-determined layout patterns are tested for the structural integrity  [20] and the attributes (i.e. pore size and geometry)  [21] as well. Adaptive layout patterns  [22] have recently been proposed by Khoda et al. to achieve the desired attributes i.e. porosity. Besides, a multi-directional parametric deposition orientation  [23] is also proposed by considering the accessibility and porosity of the internal region. Tool-path generation is the final step of the virtual strategy for affecting the attributes of the manufactured part. Physical strategies need to be deployed for better attributes as 2.5D layers are accumulated/cured and stacked successively to generate the 3D part. Depending upon the AM technique and the process plan, the fabricated part may require post processing i.e. cleaning extra material, heat treatment to diffuse adjacent layer etc.From the above discussion it is clear that, the build time, volume of support structure, surface quality, dimensional accuracy, number of slices and cost are often used as metrics to optimize both virtual and physical strategies in process planning steps. However, with rapid growth and diversity in the technology, the weightage and effect of these matrices become dynamic and cannot be measured in a same scale. For an example, slicing an object along a predefined build direction creates closed contour called layer. For free form shape object with concave surface, multiple closed contours may be generated for the same layer in a particular build direction. Such phenomenon can be defined as contour plurality. Continuous material deposition gets disrupted for layers with contour plurality and generates start–stop as well as higher non-deposition time within layers. Such deposition disruption requires machine/deposition system having very low response time, and high precision and resolution which in other word mean more resources. Moreover when the concave surface is sliced, the resulting contour may contain consecutive upward (minima) or downward (maxima) segment which can be defined as concavity. Continuous deposition will also be hampered because of start–stop along concavity.A mathematical model of curve slicing for fiber continuity shows better meso-structure and mechanical characteristics of curved parts  [24]. Khoda et al.  [25] proposed computational model for continuous path planning for complex internal architecture. However, we have not found any attempt so far reported in literature to address the contour plurality as well as concavity issue while determining the build direction as well as tool path in AM process plan. The presence of contour plurality in layers and concavity in the contour may increase build time and the discontinuity in the filament and may lower the structural integrity  [26]. In this work, a systematic process plan frame work is presented for virtual strategies to minimize the resource consumption during part fabrication. We are specifically focusing on build direction and material deposition direction steps and identify the feature characteristics that are tied with them. By incorporating the resource requirements with the generated feature characteristics a sequentially optimized process plan is proposed. The road map of our modeling and optimization methodology is shown as in Fig. 2.The rest of the paper is organized as follows: Section  2 describes the effect of build direction on contour plurality, object feature’s shapes, and surface quality. The methodology to determine the optimal material deposition angle by analyzing the layer contour concavity and contour feature’s shapes is presented in Section  3. The proposed methodology is implemented and results are shown in Section  4. Finally, Section  5 wraps ups and highlights the findings of the paper.Slicing an object with that has concaved surface, for instance, the object shown in Fig. 3, results in some slices that will contain more than one disjoint closed contour within each layer. In this paper, this phenomenon is termed contour plurality. Contour plurality might also happen for objects with internal hollow features. The number of layers with contour plurality is fully dependent upon the build direction. For the same object, the overall contour plurality can be varied with different build directions as shown in Fig. 3.If the object shown in Fig. 3 is sliced and then built layer by layer along theith build direction, several layers will have disjoint closed contours. While depositing material on these particular layers, it is not possible to achieve continuous deposition, thereby causing increased ‘start–stops’. Besides, such disruption in deposition will impair the highly desired surface quality. If the machine is not responsive enough to start and stop depositing material precisely where it is needed, the exact shape of the object has to be sacrificed to some extent, causing volumetric error to increase. Overall, all these effects will increase the build time. Even though a machine might be highly responsive, it is necessary to avoid slice contour plurality to increase deposition continuity and in turn to achieve lower build time. On the other hand, there might be another build direction along which, if the same object is sliced and built layer by layer, there will be no, or a relatively less layers having disjoint closed contours. Thus, properly selected build direction for an object can significantly reduce the overall contour plurality throughout the layers and minimize the adverse effects of contour plurality. Conversely, choosing an arbitrary build direction could result in most of the layers being contour plurality layers. Hence, the build vector along which the total volume of the object’s regions having contour plurality layers is minimum can be considered favorable to resources.The build height and object features’ sizes and shapes are other criteria which are also directly related to the resource requirement and may be affected by the build direction. Increased build height will increase the number of layers, thereby increasing the build time. The tiny or slender features of an object may result in contour plurality with tiny disjoint layer contours for a build direction. In this paper, we have considered contour plurality, build height, object features’ sizes and shapes, and surface quality while finding out the proper build direction. An optimization algorithm is proposed to determine a build direction favorable to resources considering contour plurality and build height.To quantify the contour plurality in layers, first we generate a build direction through coordinate system transformation. Then the object volume is discretized considering the contour plurality along the build direction. This analysis is repeated for a number of build directions to quantify their effects on contour plurality as well as build height. In 3D Euclidean spaceℜ3, build direction can be represented as a 3D vectorDi⃗=[xi,yi,zi]∈ℜ3,∀i=0,…,n. To determine a set of build vectors{Di}⃗i=1,…,n, the global coordinate system is rotated throughψandφangles aroundZandYaxes, respectively  [22], which can be represented by the following equation.(1)[xi′,yi′,zi′]=[xiyizi]⋅Rz(ψ)⋅Ry(φ)∈ℜ3;ψ=[−π/2,π/2];φ=[0,2π];∀iwhereRz(ψ)andRy(φ)denote the rotation aroundZandYaxis throughψandφangles, respectively.[xi′,yi′,zi′]represents the transformed coordinate system, and the unit vectorηˆzi′alongZi′axis is considered as the corresponding build vectorDi⃗. Therefor, each build vectorD⃗icorresponds to an angle pair(ψ,φ).At any build directionDi⃗, the object is discretized by a set of parallel planesPki={aXi,k′+bYi,k′+cZi,k′=Constant}k=1,…,K,∀ithat intersect the object surface. The parametric surfaceS(ui′,vi′)⊂ℜ3of the object can be represented with parameterui′andvi′whereui′,vi′∈[ai,bi]. A set of finite number (L) of pointsPi={pli=(xli,yli,zli)}l=1,…,L,∀iassociated with the corresponding parametric valuesqi={(ui,l′,vi,l′)}l=1,…,L,∀iis sampled on the surfaceS(ui′,vi′). At all these sampled points, the surface’s unit surface normal vectorsN→liare determined which can be defined by Eq. (2).(2)N→li=Sui(ui,l′,vi,l′)×Svi(ui,l′,vi,l′)|Sui(ui,l′,vi,l′)×Svi(ui,l′,vi,l′)|,l=1,…,L;∀iwhereSui(ui,l′,vi,l′)=∂S(ui,l′,vi,l′)∂ui,landSvi(ui,l′,vi,l′)=∂S(ui,l′,vi,l′)∂vi,l. A point is defined as a critical pointCPifN→li⋅ηˆzi′=1i.e.,Sui(ui,l′,vi,l′)=0, orSvi(ui,l′,vi,l′)=0, which means that the surface’s unit normal vectors at the critical points are parallel to the corresponding build vector. The critical points are, therefore, the extreme points on the surface with respect to the build direction. Let a point setCPi={cpmi}m=1,…,M⊂Picontain only the critical points. A sorted critical point setSCPi={scpti=(xscpt′,yscpt′,zscpt′)}t=1,…,T⊂CPiis formed through sorting the critical points along the build directionDi⃗based on their perpendicular distance from the build plane and then discarding the redundant critical points. A rectilinear 3D bounding box  [22] for the object is constructed along the transformed coordinate system using the vertex point setVi={pt1i,pt2i,pt3i,…,pt8i}defined by the combination of the minimum and maximum extents of the object’s surface along the transformedX′,Y′, andZ′axes.The plane on which the bottom bounding face of the bounding box lies, which is also perpendicular to the build directionDi⃗, is considered the base plane or build plane of the object with respect to the coordinate system, as shown in Fig. 4.In theith transformed coordinate system, if a pointpt=(Xt′,Yt′,Zt′)lies on thetth cutting plane, a set ofTnumber of cutting planesCPLi={cplti}t=1,…,Tis generated through the sorted critical point setSCPiusing Eq. (3), which are parallel to the base plane.(3)[cosψ⋅cosφsinψ−cosψ⋅sinφ]⋅[Xt′−xscpt′Yt′−yscpt′Zt′−zscpt′]=0;t=1,…,T.After generating the cutting planes, the object volume between the consecutive planes needs to be evaluated for contour plurality. The object/part is split into(T−1)strips with the generated parallel cutting planes forming the strip setSTi={stri}r=1,…,T−1. The total object volume generated between two consecutive parallel cutting planescpltiandcplt+1iis termed as a part strip. If any strip contains more than one part split as shown in Fig. 4, that part strip will comprise the layers with contour plurality along the corresponding build direction. So all the generated stripes are analyzed for contour plurality and a weight is determined for the corresponding build direction. The indexifor build direction will be dropped to simplify the notations of some parameters and variables from now on.The part strips generated by the parallel cutting planes can be classified as mono-split strip (red strips shown in Fig. 5) and multi-split strip (middle strip in Fig. 5) depending on the number of split part-volumes generated in the corresponding strip. Assume thatrth part strip contains a set{spfr}f=1,…,FofFnumber of split part-volumes. IfF=1, therth part strip is a mono-split strip and ifF>1, therth part strip is a multi-split strip. Multi-split strip may be generated if there is any concavity on the part surface or the part has one or more hollow features inside it. In a multi-split strip, the split part-volumes would yield multiple disjoint closed contours on the same layer. Thus, a build direction needs to be identified along which the total volume of the multi-split strips in regard to the total part volume would be minimum. Similarly, build height which usually changes with build direction directly affects the build time. A larger build height requires longer build time. When determining a desirable build direction taking contour plurality criterion into account, it is also necessary to ensure that the build direction does not lead to a considerably higher build height.The build direction weight function corresponding to contour plurality for each part strip is, therefore, defined based on the number of split volumes existing in the strip and their volume values with respect to the total volume of the object. By summing up the volume of the split part-volumes, the total volume of each strip is calculated as,(4)vol_stri=(∑f=1Fvol_spfr)×wr,∀rwhere,wr={1,whenF>10,whenF=1.Here,vol_striis the volume ofrth strip determined forith build direction,vol_spfris the volume offth split part-volume ofrth multi-split strip. Hence, the contour plurality volume fraction corresponding toith build direction can be evaluated as,(5)VolFi=∑r=1T−1vol_strivol_part,∀iwhere,vol_partis the volume of the part andVolFis the volume fraction of split part-volumes evaluated forith build direction. This volume fraction represents the total volume fraction of all the split part-volumes generated in multi-split strips of the object for the corresponding build direction, which is directly proportional to the total volume of the multi-split strips. The minimum possible value of the volume ratio is zero when there would be no multi-split strip i.e., no contour plurality in the layers throughout the whole part along a build direction.Sometimes the part splits, i.e., split part-volumes, might be considerably tiny or thin which would lead to layers with fabrication complexity. For example, if the object is oriented and built along the build directionD⃗ias shown in Fig. 6, the thin feature of the object would result in thin layer contours which are susceptible to fabrication complexity. For some other build directions, there might be a lower number of layers or even no layers having tiny or thin contours. This fabrication issue is captured by analyzing the shape of the split part-volumes through using the bounding box technique to quantify the shape factor of the split part-volumes associated with the build direction. For each of the split part-volumes in a strip, a bounding box aligned with the build direction is generated and the shape factor is quantified, as discussed in Sections  2.2.1–2.2.3 for a single split part-volume and as shown in Fig. 6. The same procedure is applied for all the split part-volumes. Finally, the four elements are aggregated together to get the shape factor of the object for the corresponding build direction.Height/Width (H/W) factor is used as one of the measures of fabrication complexity. A rectilinear bounding box aligned with the build direction is constructed for each split part-volume, as shown in Fig. 6, to determine each split part-volume’sH/Wfactor. The height component of theH/Wfactor is considered as the length of smaller side and the width component is considered as the length of larger side between two contiguous sides of the bounding box’s top or bottom face. For thefth split part-volume, ifLf,1randLf,2rare the lengths of the two sides of the bounding box’s bottom or top face andLf,3ris the length of the bounding box’s other side which is parallel to the build direction, theH/Wfactor can be determined using Eq. (6)(6)H/W_Factori=1−∑r=1T−1∑f=1F(HfrWfr)×vol_spfrvol_part,∀iwhere,Hfr=min{Lf,1r,Lf,2r}andWfr=max{Lf,1r,Lf,2r}.HereHfris the height andWfris the width of thefth split part-volume inrth strip alongith build direction.For each split part-volume, the build plane height and width are assumed as the height and width of the corresponding split part-volume, as shown in Fig. 6 and calculated in Section  2.2.1. Forfth split part-volume shown in Fig. 6,HfrandWfrare the build plane height and width, respectively. To address the fabrication complexity, build plane height and build plane width factors are calculated by using the corresponding height and width and a given threshold value, assuming that fabrication complexity for the part splits will arise because of their tininess or slenderness when the build plane height, build plane width, or both values of the associated part splits are below the threshold value. The build plane height and width factors forith build direction, which are the volume weighted fraction deviations with respect to the threshold values, can be quantified by Eqs. (7) and (8), respectively.BPHeight_Factori=∑r=1T−1∑f=1FBPHeightRfr×vol_spfr∑r=1T−1∑f=1Fvol_spfr,∀i(7)where,BPHeightRfr={HthrHfr,whenHfr>Hthr1−HfrHthr,whenHfr≤Hthr,∀f,rBPWidth_Factori=∑r=1T−1∑f=1FBPWidthRfr×vol_spfr∑r=1T−1∑f=1Fvol_spfr,∀i(8)where,BPWidthRfr={WthrWfr,whenWfr>Wthr1−WfrWthr,whenWfr≤Wthr,∀f,r.Here,HthrandWthrare the given threshold values for build plane height and width, respectively, which are specified based on the machine capability and material type and composition.BPHeightRfrandBPWidthRfrare the fraction deviations of height and width, respectively, from the threshold values for thefth split part-volume inrth strip.BPHeight_FactoriandBPWidth_Factoriare the overall volume weighted build plane height and width factors, respectively, of the object forith build direction.In order to address how the material of a part split is distributed within its bounding box, fill factor takes into account the ratio of each part split’s volume to the volume of their corresponding bounding box. Hence this measure of shape factor captures how much the part splits fill their bounding box. If a part split fills its bounding box to a very low extent, fabrication complexity will again increase for that split. Eq. (9) symbolizes the fill factor.(9)Fill_Factori=1−∑r=1T−1∑f=1F(vol_spfrvol_BBoxfr)×vol_spfrvol_part,∀i.Here,vol_BBoxfris the volume of the bounding box offth split part-volume inrth strip aligned withith build direction.The four normalized components of shape factor discussed above are aggregated together by summing up their weighted values as denoted by Eq. (10).(10)ShapeFi=(H/W_Factori×wHWF)+(BPHeight_Factori×wHF)+(BPWidth_Factori×wWF)+(Fill_Factori×wFF)whereShapeFiis the aggregated shape factor of the object forith build direction andwHWF,wHF,wWF, andwFFare the associated weights for the four components of shape factor and their sum is unity. These weights reflect the relative importance of the associated factors and can be user defined. In this paper, the Hypothetical Equivalents and Inequivalents Method (HEIM) [26] is utilized to determine the appropriate values of these weights analytically. In this method, user gives the preferences, both equality and inequality, among the hypothetical alternatives. Here, the hypothetical alternatives are the hypothetical build directions. A set of constraints are formed using the preference which is shown by Eq. (11). Each constraint represents the preference between any two build directions in terms of their corresponding weighted sum of factor values. The weights are the decision variables and the objective is to make the sum of the weights one. Finally, the weights are generated by solving the minimization model.(11)Min[1−∑ρwρ]2s.t.∑ρFρυwρ−∑ρFρτwρ⩽−δ;υ,τ=1,2,…,ℓandυ≠τ0⩽wρ⩽1;∀ρHere,ρis the index for factors andwρis the weight assigned toρth factor.FρυandFρτare the values of theρth factor obtained forυth andτth hypothetical build directions, respectively. The constraints are formulated given thatυth hypothetical build direction is preferred toτth hypothetical build direction.δis a small positive number which is used to ensure the inequality between two alternative hypothetical build directions. The optimization problem given by Eq. (11) is solved by using the constrained nonlinear minimization routine provided in MATLAB package.Surface quality of additively manufactured objects largely depends on the build direction which yields the object orientation during fabrication. The staircase effect between the consecutive layers impairs the surface quality of AM objects. There will be almost no staircase effect for an object oriented along a build direction when the build direction will be parallel or perpendicular to the surface of the object. In order to quantify the surface quality with respect to the build direction, the angles{θgi}g=1,…,Gbetween the build direction and the facet normals{Fg⃗}g=1,…,Gof the triangulated mesh model of the object having totalGnumber of triangular facets are identified, as shown in Fig. 7. It is assumed that the staircase effect, due to a facet, exists over the whole area of the triangular facet. Therefore, when the facet normals are either parallel (θgi=0°) or perpendicular (θgi=90°) to the build direction, the staircase effect will be minimum giving good surface quality. Staircase effect will be maximum giving poor surface quality when the facet normal is aligned at 45° with the build direction. The surface quality index for each facet, e.g.,gth facet shown in Fig. 7, can be determined using Eq. (12).(12)SQIndexgi={0,whenθgi=0°,90°,or180°|tanθgi|,when0°<θgi≤45°,or135°<θgi<180°1|tanθgi|,when45°<θgi<90°,or90°<θgi≤135°,∀g.The surface quality factor of the whole object forith build direction is quantified by averaging the facet surface quality indices{SQIndexgi}g=1,…,Gwith the corresponding facet areas as(13)SQFi=∑g=1GSQIndexgi×FAg∑g=1GFAg,∀iwhereSQFidenotes the surface quality factor of the object determined forith build direction andFAgis the area ofgth facet of the object surface. Build height which usually changes with build direction directly affects the build time. The larger the build height, the longer the build time is. So while determining a good build direction considering the other phenomena discussed above, it is also necessary to ensure that the build direction does not lead to a considerably higher build height. Forith build direction, the build height (BH) of the part is determined as the height of part’s bounding box along that build direction and then normalized to get the build height factor(BHF).The objective function to determine an optimal build direction, which will be the weighted sum of normalized contour plurality volume fraction, shape factor, surface quality factor, and build height, is expressed as(14)TotalWeight_BDi=(VolFi×wCP)+(ShapeFi×wSF)+(SQFi×wSQ)+(BHFi×wBH),∀iwhereTotalWeight_BDiis the overall weight determined for the build directionDi⃗.wCP,wSF,wSQ, andwBHare the weights for contour plurality volume fraction, shape factor, surface quality factor, and normalized build height, respectively. The optimal values of these weights are determined using HEIM [26] discussed in Section  2.2.4. Finally, the optimum build direction can be determined solving the following minimization problem.(15)Min{TotalWeight_BDi}i=1,…,ns.t.Di⃗≔ηˆzi′ψ=[−π/2,π/2]ϕ=[0,2π]wCP+wSF+wSQ+wBH=1where{TotalWeight_BDi}i=1,…,nis a set of objective function values, which can also be termed as a set of overall weights of the build directions. The individual elements of this set can be calculated with Eqs. (4)–(10), (12), and (13). Each build directionD⃗iand hence the transformed coordinate system[xi′,yi′,zi′]can be constructed by rotating the standard coordinate system aroundZandYaxes with angleψ∈[−π/2,π/2]andϕ∈[0,2π], respectively. The following greedy heuristic is applied to determine the optimum build direction using Eq. (15). First, a candidate set of finite number of build directions{(ψ,ϕ)}is formed at a uniform intervalγon bothψandϕ. From this candidate set, the build directions with the lowest objective function value are chosen. Their neighborhoods are then explored with higher resolutionλ, whereλ≪γ. The transformedZaxis vector corresponding to the angle pair(ψ∗,ϕ∗)that yields the minimum objective function value is selected as the optimal build direction.The object is sliced along the resource favorable build direction (described in Section  2) by a set of intersecting planes parallel to each other. The non-self-intersecting, closed, and planar layer contours which will represent the object are generated by connecting the intersection points between each intersecting plane and the object surface. The distance between the consecutive intersecting planes is kept constant which is the diameter of the filament to be deposited. This uniform slicing results in a set of contours,C={Ck}k=1,2…Kfor depositing material layer-by-layer. The following analysis has been done for a specific contour. As all the contours are planar closed curves, they only intersect to their start and end points. These contours can be parametrically represented by Eq. (16)(16)Ck(uk)=(x(uk),y(uk)),wherek=1,2,…,Kuk∈[ak,bk]Ck(ak)=Ck(bk)where,Ck(uk)represents the parametric equation forkth contour with respect to the parameterukranging between[ak,bk]. The presence of contour plurality in the object will result a set of contour on the same layer and that can be represented asL={Ly}y=1,2…YandLy={Ck}wherek>1,Lstands for a set of layers.Concavity is the property of curving a graph of the function upward or downward. In 3D free-form shaped object, the layer contour may contain curving upward (minima) and downward (maxima). In between of two adjacent minima or maxima on a layer contour curve, there will be a maxima or minima, respectively as shown in Fig. 8. During material deposition across these adjacent maxima or minima, the print head has to stop, pass through air and then start material deposition again as shown in Fig. 8(a). The deposition direction across the adjacent minima or maxima, therefore, introduces deposition discontinuity in layers as well as two cut-off parts.Because of deposition discontinuity, the print head frequently starts and stops during deposition as shown in Fig. 8(a), and causes over-deposition. This costs resources such as time and material for over deposition as well as is not good for the surface integrity and dimensional accuracy of the finished part  [3]. Therefore, a suitable material deposition direction for each layer needs to be determined in order to minimize the resource requirements for the concave layer contours.To analyze each layer contour, a 2D rectilinear bounding box of each 2D layer contour is constructed as shown in Fig. 8. To get a set of deposition directions the coordinate system is rotated aroundZaxis throughβangle whereβ∈[0,π]. Each time the transformedXβ′axis vector is considered as the deposition direction. In a transformed coordinate system, a set of tangent vectors,T={tj}j=0,1…Nis considered on the layer contour on anNnumber of equidistant points and the transformedXβ′axis vector is regarded as the base vector (B→). The points on the contour curve at which the first derivatives of the curve (tangent vectors) with respect toXβ′axis are zero, are the stationary or extreme points of the curve.The set of extreme points can be represented asE={en}n=0…N′. If more than two extreme points exist on a contour, there will be discontinuity for a number of deposition directions and the print head will pass through the air as shown in the Fig. 8(a). The straight lines passing through the extreme points (E) and parallel toXβ′(the base vector) are defined as cutting lines which constitutes the cutting line setCL={lc}c=0…m. Usually the number of cutting lines (N′) is equal to the number of extreme points except when a cutting line passes through more than one extreme point. But this is generally an unusual case. The area of the contour curve between two adjacent cutting lines (lc,lc+1) is denoted as a strip. The generated strips are classified as continued and discontinued strips. The stripsST={St}t=0…(n−1)which contain the stop–start event or discontinuity or the cut off contour parts are considered as discontinued strip as shown in Fig. 9. The continued strip containing no stop–start event or cut off part is more expected in layer manufacturing.For the set of cut-off partsP={px}x=0..Xof a contour curve obtained for a deposition direction, the total area of the cut-off parts and discontinuous area factor can be calculated by Eq. (17).(17)DAFk=∑x=oXCxAreak,∀kwhereCxis the area ofxth cut-off part,Areakis the total area, andDAFkis the discontinuous area factor of thekth contour. The more value of discontinued area factor, the more resources will be consumed.Once the contour contains cutoff parts, each part is analyzed for fabrication complexity. Shape of the contour plays a significant role to determine fabrication complexity. For example, contour with tiny feature or segment is difficult to produce. Even though, build direction methodology minimizes such slender feature generation, many times it would be difficult to eliminate it completely. Thus, some layer contour may still end up with tiny features after slicing and proper deposition direction may minimize their adverse effect. To quantify the layer-wise fabrication complexity for tiny features, the shape factor for each cut off part consisting of aspect ratio and fill factor of that cut-off part are calculated and finally, the overall contour shape factor is determined for a deposition direction.An aspect ratio of a geometric shape normally reflects the ratio between its sizes in different dimensions. If each cut-off part of a layer contour is inscribed by a rectilinear 2D bounding box, the ratio of larger dimension to shorter dimension of this bounding box is considered as aspect ratio of this part as shown in Fig. 10and the area weighted aspect ratio for the entire layer contour can be determined by Eq. (18).(18)ARk=1−∑x=1XARx×CxAreak∀xwhere,ARx={HbbxWbbx,whenWbbx>HbbxWbbxHbbx,whenHbbx>Wbbx,∀x.Here,ARxis aspect ratio ofxth cut off part,ARkis the total aspect ratio forkth contour, andWbbxandHbbxare the width and height of the bounding box, respectively, ofxth cut off part.Often time the aspect ratio may not reflect the actual shape of the cut off part as shown in the Fig. 10(b). Another factor namely contour fill factor is incorporated to have the better sense of shape. The ratio between the total area of cut off parts and area of its bounding box is considered as contour fill factor in this paper. The fill factor for a contour can be determined as(19)CFFk=1−∑x=1XCx2BBAreaxAreak,∀k.Here,BBAreaxis the area of the bounding box ofxth cut-off part, andCFFkis the fill factor forkth contour. The less value of contour fill factor reflects ease of deposition of on the corresponding contour. Finally, the total contour shape factor is considered as the weighted sum of aspect ratio and contour fill factor and represented by Eq. (20).(20)CSFk=(ARk×wAR)+(CFFk×wCFF),∀kwhere,CSFkis the contour shape factor forkth contour,wARis the weight for aspect ratio,wCFFis the weight for area factor. The optimal values of these weights are determined using the same HEIM method  [27] discussed in Section  2.2.4.To quantify the deposition direction, Eq. (1) in Section  2.1 is used for one axis rotation and rotates the coordinate system byβangle around thez-axis. One sample example of two deposition directions along with corresponding area of cut-off parts is shown in the Fig. 11.The resultant weight for a deposition direction is determined as the weighted sum of the discontinuous area factor and the contour shape factor–(21)weight_DDkβ=(DAFk×wDAF)+(CSFk×wCSF),∀kwhere,weight_DDkβis the resultant weight ofβdeposition angle forkth contour,wDAFis the weight for discontinuous area factor,wCSFis the weight for contour shape factor. The HEIM technique  [27] discussed in Section  2.2.4 is also used here to determine the optimal values of these weights. The model of finding optimal material deposition direction can be represented by Eq. (22)(22)Min{weight_DDkβ}s.t.β=[0,π]βy≠(βy−1±ϕ),∀ywDAF+wCSF=1.The optimal material deposition direction i.e., tool path orientation angle can be determined by solving the optimization problem presented by Eq. (22) using the same method explained in Section  2.4. While determining the optimal tool path orientation angles for consecutive layers, a tabooed range of angle defined by±ϕmust be constrained for the consecutive layers to ensure the structural continuity and integrity of layers. Hence, the material deposition angle depends on the angle of the supporting layer. If the deposition angle ofLyth layer isβ∗, the acceptable deposition angle ofLy+1th layer cannot beβ∗±ϕ.After getting the optimal build direction and deposition direction, the total build time is measured to validate the proposed methodology. In order to determine the total fabrication/build time of an object, it can be classified into two components: deposition time and air/non-deposition time  [28] as shown in Eq. (23). The total air time will be the summation of air time for contour plurality and contour concavity. During the calculation of deposition time, if the deposition length is greater than a threshold value,Thfor any segment then three stages of motion are considered namely acceleration stage, constant speed stage and deceleration stage  [29]. If the filament size is smaller than the thresholdTh, only acceleration stage and deceleration stage are considered.(23)BuildTime(ψ,φ)=∑y=1Y(LBTyβ+LATyβ).Here,BuildTime(ψ,φ)is the total build time of an object oriented along(ψ,φ)build direction,LBTyβandLATyβare the build and air time ofyth layer forβdeposition angle.

@&#CONCLUSIONS@&#
